(this["webpackJsonprestaurant-ordering-system"]=this["webpackJsonprestaurant-ordering-system"]||[]).push([[0],{2806:function(e,t,n){},2934:function(e,t,n){},2935:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"TOLOGIN",(function(){return le})),n.d(a,"SUCCESSLOGIN",(function(){return ue})),n.d(a,"ERRORLOGIN",(function(){return de})),n.d(a,"NETERROR",(function(){return be})),n.d(a,"CHEFLOGINSUC",(function(){return je})),n.d(a,"WAITERLOGINSUC",(function(){return fe}));var r={};n.r(r),n.d(r,"types",(function(){return a})),n.d(r,"toLogin",(function(){return Ve}));var c={};n.r(c),n.d(c,"GETDASHBOARD",(function(){return Je})),n.d(c,"GETDASHBOARDSUC",(function(){return Ye}));var s={};n.r(s),n.d(s,"types",(function(){return c})),n.d(s,"getDetail",(function(){return Xe}));var i={};n.r(i),n.d(i,"GETFAILED",(function(){return kt})),n.d(i,"GETLIST",(function(){return Dt})),n.d(i,"GETSUCCESS",(function(){return wt})),n.d(i,"ADDSTAFF",(function(){return Rt})),n.d(i,"ADDSUCCESS",(function(){return It})),n.d(i,"ADDERROR",(function(){return Lt})),n.d(i,"TOGGLEPAGE",(function(){return Nt})),n.d(i,"TOGGLED",(function(){return At})),n.d(i,"DELSTAFF",(function(){return Mt})),n.d(i,"DELSUCCESS",(function(){return Ut})),n.d(i,"DELERROR",(function(){return Gt})),n.d(i,"EDITSTAFF",(function(){return _t})),n.d(i,"EDITSUCCESS",(function(){return Ft})),n.d(i,"EDITERROR",(function(){return zt}));var o={};n.r(o),n.d(o,"types",(function(){return i})),n.d(o,"delStaff",(function(){return Vt})),n.d(o,"addStaff",(function(){return Jt})),n.d(o,"togglePage",(function(){return Yt})),n.d(o,"editStaff",(function(){return Kt}));var l={};n.r(l),n.d(l,"GETFAILED",(function(){return fn})),n.d(l,"GETDISHLIST",(function(){return On})),n.d(l,"GETCATELIST",(function(){return hn})),n.d(l,"GETCATELISTSUCCESS",(function(){return pn})),n.d(l,"GETSUCCESS",(function(){return mn})),n.d(l,"ADDDISH",(function(){return xn})),n.d(l,"ADDDISHSUC",(function(){return gn})),n.d(l,"ADDDISHERR",(function(){return vn})),n.d(l,"EDITDISHDISHSUC",(function(){return yn})),n.d(l,"EDITDISHERR",(function(){return Sn})),n.d(l,"EDITDISH",(function(){return Cn})),n.d(l,"DELDISH",(function(){return En})),n.d(l,"DELDISHSUC",(function(){return Tn})),n.d(l,"DELDISHERR",(function(){return kn})),n.d(l,"ADDSUCCESS",(function(){return Dn})),n.d(l,"ADDERROR",(function(){return wn})),n.d(l,"TOGGLEPAGE",(function(){return Rn})),n.d(l,"TOGGLED",(function(){return In})),n.d(l,"DELSUCCESS",(function(){return Ln})),n.d(l,"DELERROR",(function(){return Nn})),n.d(l,"EDITSUCCESS",(function(){return An})),n.d(l,"EDITERROR",(function(){return Mn}));var u={};n.r(u),n.d(u,"types",(function(){return l})),n.d(u,"toggleDishPage",(function(){return qn})),n.d(u,"addDish",(function(){return Pn})),n.d(u,"delDish",(function(){return Bn})),n.d(u,"editDish",(function(){return Wn}));var d={};n.r(d),n.d(d,"GETCATELISTS",(function(){return na})),n.d(d,"GETCATELISTSUC",(function(){return aa})),n.d(d,"GETCATELISTERR",(function(){return ra})),n.d(d,"CATEADD",(function(){return ca})),n.d(d,"CATEADDSUC",(function(){return sa})),n.d(d,"CATEADDERR",(function(){return ia})),n.d(d,"CATEEDIT",(function(){return oa})),n.d(d,"CATEEDITSUC",(function(){return la})),n.d(d,"CATEEDITERR",(function(){return ua})),n.d(d,"CATEDEL",(function(){return da})),n.d(d,"CATEDELSUC",(function(){return ba})),n.d(d,"CATEDELERR",(function(){return ja}));var b={};n.r(b),n.d(b,"types",(function(){return d})),n.d(b,"toggleCatePage",(function(){return va})),n.d(b,"addCate",(function(){return ga})),n.d(b,"editCate",(function(){return ya})),n.d(b,"delCate",(function(){return xa}));var j={};n.r(j),n.d(j,"GETCUSCATELISTERR",(function(){return Ca})),n.d(j,"GETCUSCATELIST",(function(){return Ea})),n.d(j,"GETCUSCATELISTSUC",(function(){return Ta})),n.d(j,"CUSCATEEDIT",(function(){return ka})),n.d(j,"CUSCATEEDITSUC",(function(){return Da})),n.d(j,"CUSCATEEDITERR",(function(){return wa})),n.d(j,"CUSCATEDEL",(function(){return Ra})),n.d(j,"CUSCATEDELSUC",(function(){return Ia})),n.d(j,"CUSCATEDELERR",(function(){return La})),n.d(j,"CUSCATEADD",(function(){return Na})),n.d(j,"CUSCATEADDSUC",(function(){return Aa})),n.d(j,"CUSCATEADDERR",(function(){return Ma}));var f={};n.r(f),n.d(f,"types",(function(){return j})),n.d(f,"editCusCate",(function(){return Wa})),n.d(f,"addCusCate",(function(){return Pa})),n.d(f,"toggleCusCatePage",(function(){return qa})),n.d(f,"delCusCate",(function(){return Ba}));var O={};n.r(O),n.d(O,"GETCUSLISTERR",(function(){return Za})),n.d(O,"GETCUSLIST",(function(){return $a})),n.d(O,"GETCUSLISTSUC",(function(){return er})),n.d(O,"GETCUSCATESUC",(function(){return tr})),n.d(O,"CUSEDIT",(function(){return nr})),n.d(O,"CUSEDITSUC",(function(){return ar})),n.d(O,"CUSEDITERR",(function(){return rr})),n.d(O,"CUSDEL",(function(){return cr})),n.d(O,"CUSDELSUC",(function(){return sr})),n.d(O,"CUSDELERR",(function(){return ir})),n.d(O,"CUSADD",(function(){return or})),n.d(O,"CUSADDSUC",(function(){return lr})),n.d(O,"CUSADDERR",(function(){return ur}));var h={};n.r(h),n.d(h,"types",(function(){return O})),n.d(h,"editCus",(function(){return xr})),n.d(h,"addCus",(function(){return pr})),n.d(h,"toggleCusPage",(function(){return mr})),n.d(h,"delCus",(function(){return hr}));var p={};n.r(p),n.d(p,"GETORDERLISTERR",(function(){return Cr})),n.d(p,"GETORDERLIST",(function(){return Er})),n.d(p,"GETORDERLISTSUC",(function(){return Tr})),n.d(p,"ORDEREDIT",(function(){return kr})),n.d(p,"ORDEREDITSUC",(function(){return Dr})),n.d(p,"ORDEREDITERR",(function(){return wr})),n.d(p,"ORDERDEL",(function(){return Rr})),n.d(p,"ORDERDELSUC",(function(){return Ir})),n.d(p,"ORDERDELERR",(function(){return Lr})),n.d(p,"ORDERADD",(function(){return Nr})),n.d(p,"ORDERADDSUC",(function(){return Ar})),n.d(p,"ORDERADDERR",(function(){return Mr}));var m={};n.r(m),n.d(m,"types",(function(){return p})),n.d(m,"editOrder",(function(){return Hr})),n.d(m,"addOrder",(function(){return qr})),n.d(m,"toggleOrderPage",(function(){return Wr})),n.d(m,"delOrder",(function(){return Pr}));var x={};n.r(x),n.d(x,"GETHDISH",(function(){return mc})),n.d(x,"GETHDISHSUC",(function(){return xc})),n.d(x,"GETHDISHERR",(function(){return gc})),n.d(x,"GETHCATE",(function(){return vc})),n.d(x,"GETHCATESUC",(function(){return yc})),n.d(x,"GETHCATEERR",(function(){return Sc})),n.d(x,"ADD2CAR",(function(){return Cc})),n.d(x,"LESS2CAR",(function(){return Ec})),n.d(x,"RESETCAR",(function(){return Tc}));var g={};n.r(g),n.d(g,"types",(function(){return x})),n.d(g,"GetHomeDish",(function(){return Pc})),n.d(g,"addtocar",(function(){return qc})),n.d(g,"resetcar",(function(){return Wc})),n.d(g,"lesstocar",(function(){return Hc}));var v={};n.r(v),n.d(v,"SCUSORDERADD",(function(){return Zc})),n.d(v,"SORDERADDSUC",(function(){return $c})),n.d(v,"SORDERADDERR",(function(){return es})),n.d(v,"CUSOREDEREDIT",(function(){return ts})),n.d(v,"SORDEREDITSUC",(function(){return ns})),n.d(v,"SORDEREDITERR",(function(){return as})),n.d(v,"RESET",(function(){return rs}));var y={};n.r(y),n.d(y,"types",(function(){return v})),n.d(y,"addOrder",(function(){return ls})),n.d(y,"updateOrder",(function(){return us})),n.d(y,"retSetShopCarState",(function(){return ds}));var S={};n.r(S),n.d(S,"ISCUS",(function(){return Es})),n.d(S,"ISCUSSUC",(function(){return Ts})),n.d(S,"ISCUSERR",(function(){return ks}));var C={};n.r(C),n.d(C,"types",(function(){return S})),n.d(C,"isCus",(function(){return Ns}));var E={};n.r(E),n.d(E,"GETQRCODE",(function(){return As})),n.d(E,"GETQRCODESUC",(function(){return Ms})),n.d(E,"GETQRCODEERR",(function(){return Us})),n.d(E,"GETTABLE",(function(){return Gs})),n.d(E,"GETTABLESUC",(function(){return _s})),n.d(E,"GETTABLEERR",(function(){return Fs})),n.d(E,"GETTSTAFFSUC",(function(){return zs})),n.d(E,"ADDTABLE",(function(){return Bs})),n.d(E,"ADDTABLESUC",(function(){return Ps})),n.d(E,"ADDTABLEERR",(function(){return qs})),n.d(E,"EDITTABLE",(function(){return Ws})),n.d(E,"EDITTABLESUC",(function(){return Hs})),n.d(E,"EDITTABLEERR",(function(){return Vs})),n.d(E,"DELTABLE",(function(){return Js})),n.d(E,"DELTABLESUC",(function(){return Ys})),n.d(E,"DELTABLEERR",(function(){return Ks})),n.d(E,"GETARRAYQRCODESUC",(function(){return Qs}));var T={};n.r(T),n.d(T,"types",(function(){return E})),n.d(T,"getQR",(function(){return ai})),n.d(T,"getTable",(function(){return ri})),n.d(T,"addTable",(function(){return ci})),n.d(T,"editTable",(function(){return si})),n.d(T,"delTable",(function(){return ii}));var k={};n.r(k),n.d(k,"WGETORDERLISTERR",(function(){return xi})),n.d(k,"WGETORDERLIST",(function(){return gi})),n.d(k,"WGETORDERLISTSUC",(function(){return vi})),n.d(k,"WORDEREDIT",(function(){return yi})),n.d(k,"WORDEREDITSUC",(function(){return Si})),n.d(k,"WORDEREDITERR",(function(){return Ci})),n.d(k,"WORDERADD",(function(){return Ei})),n.d(k,"WORDERADDSUC",(function(){return Ti}));var D={};n.r(D),n.d(D,"CGETORDERLISTERR",(function(){return Gi})),n.d(D,"CGETORDERLIST",(function(){return _i})),n.d(D,"CGETORDERLISTSUC",(function(){return Fi})),n.d(D,"CORDEREDIT",(function(){return zi})),n.d(D,"CORDEREDITSUC",(function(){return Bi})),n.d(D,"CORDEREDITERR",(function(){return Pi}));var w={};n.r(w),n.d(w,"SEARCHDISH",(function(){return Yi})),n.d(w,"SEARCHDISHSUC",(function(){return Ki})),n.d(w,"SEARCHDISHERR",(function(){return Qi}));var R={};n.r(R),n.d(R,"WGETQRCODE",(function(){return no})),n.d(R,"WGETQRCODESUC",(function(){return ao})),n.d(R,"WGETQRCODEERR",(function(){return ro})),n.d(R,"WGETTABLE",(function(){return co})),n.d(R,"WGETTABLESUC",(function(){return so})),n.d(R,"WGETTABLEERR",(function(){return io})),n.d(R,"WGETTSTAFFSUC",(function(){return oo}));var I={};n.r(I),n.d(I,"WGETCUSCATELISTERR",(function(){return jo})),n.d(I,"WGETCUSCATELIST",(function(){return fo})),n.d(I,"WGETCUSCATELISTSUC",(function(){return Oo}));var L={};n.r(L),n.d(L,"types",(function(){return I})),n.d(L,"toggleCusCatePage",(function(){return mo}));var N={};n.r(N),n.d(N,"WGETCUSLISTERR",(function(){return yo})),n.d(N,"WGETCUSLIST",(function(){return So})),n.d(N,"WGETCUSLISTSUC",(function(){return Co})),n.d(N,"WGETCUSCATESUC",(function(){return Eo})),n.d(N,"WCUSADD",(function(){return To})),n.d(N,"WCUSADDSUC",(function(){return ko})),n.d(N,"WCUSADDERR",(function(){return Do}));var A={};n.r(A),n.d(A,"types",(function(){return N})),n.d(A,"toggleCusPage",(function(){return Lo})),n.d(A,"addCus",(function(){return No}));var M={};n.r(M),n.d(M,"EDITUSERINFO",(function(){return al})),n.d(M,"EDITUSERINFOSUC",(function(){return rl})),n.d(M,"EDITUSERINFOERR",(function(){return cl}));var U={};n.r(U),n.d(U,"types",(function(){return M})),n.d(U,"editInfo",(function(){return ml}));var G={};n.r(G),n.d(G,"types",(function(){return D})),n.d(G,"UpdateOrder",(function(){return Sl})),n.d(G,"GetOrder",(function(){return yl}));var _={};n.r(_),n.d(_,"types",(function(){return w})),n.d(_,"searchDish",(function(){return Tl}));var F={};n.r(F),n.d(F,"types",(function(){return k})),n.d(F,"updateOrder",(function(){return Ll})),n.d(F,"getOrderList",(function(){return Il})),n.d(F,"addDish",(function(){return Nl}));var z={};n.r(z),n.d(z,"types",(function(){return R})),n.d(z,"getQR",(function(){return Gl})),n.d(z,"getTable",(function(){return _l}));var B=n(4),P=n(11),q=n(0),W=n(65),H=n.n(W),V=(n(828),n(101),n(43)),J=n.n(V),Y=(n(180),n(33)),K=n.n(Y),Q=(n(146),n(57)),X=n.n(Q),Z=(n(147),n(42)),$=n.n(Z),ee=n(68),te=n(2956),ne=n(2957),ae=n(97),re=n(98),ce=n.p+"static/media/bg.7d2aa3b8.png";function se(){var e=Object(ae.a)(["\n  background: url(",") center center / cover;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  Form {\n    margin-right: 320px;\n    padding: 20px;\n    background: #fff;\n    width: 350px;\n    min-height: 380px;\n    border: 1px solid #fff;\n    box-shadow: 0 0 10px rgb(250 250 250 / 40%);\n\n    input {\n      height: 30px;\n      margin-left: 5px;\n    }\n\n    .logo {\n      width: 50%;\n      height: 50%;\n      margin-left: 50%;\n      margin-top: -30px;\n      margin-bottom: -16px;\n      transform: translateX(-50%);\n    }\n\n    .logo-left {\n      width: 200px;\n      position: absolute;\n      left: -20px;\n      top: -20px;\n    }\n\n    button {\n      width: 100%;\n      margin-top: 26px;\n      font-size: 14px\n    }\n\n    .login-form-title {\n      cursor: auto;\n      letter-spacing: -1px;\n      color: #2C81F2;\n      display: inline-block;\n      width: 100%;\n      text-align: center;\n      font-size: 14px;\n      margin-bottom: 10px;\n    }\n\n    .login-form-login {\n      margin: 10px 0 40px 0;\n      font-size: 12px;\n      width: 100%;\n      display: inline-block;\n      position: relative;\n\n      span {\n        position: absolute;\n        right: 0;\n        top: 16px;\n      }\n    }\n  }\n"]);return se=function(){return e},e}var ie=re.a.div(se(),ce),oe=n.p+"static/media/logo.70eb222f.png",le="TOLOGIN",ue="SUCCESSLOGIN",de="ERRORLOGIN",be="NETERROR",je="chefloginsuc",fe="waiterloginsuc",Oe="/admin/staff",he="/admin/dish",pe="/admin/category",me="/admin/category",xe="/admin/customer/cate",ge="/admin/customer",ve="/waiter/customer",ye="/admin/order",Se="/chef/order",Ce="/admin/table",Ee="https://trylive.top:8300",Te="ws://trylive.top:8300",ke=n(89),De=n.n(ke),we=function(e,t){e&&("string"!==typeof t&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t))},Re=function(e){if(e)return window.sessionStorage.getItem(e)},Ie=function(e){e&&window.sessionStorage.removeItem(e)},Le=n(106),Ne=Object(ee.b)((function(e){return{status:e.login.status}}),(function(e){return{toLogin:function(t){e({type:le,url:"/login",data:t})}}}))((function(e){var t=Object(Le.g)();return Object(q.useEffect)((function(){if(String(e.status)){var n=e.status;if(console.log(e),-1===n)$.a.warning("\u7f51\u7edc\u8fde\u63a5\u9519\u8bef\uff01");else if(n>100)$.a.error("\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u8bef\uff01");else if(null!==Re("userInfo")){var a=JSON.parse(Re("userInfo"));"admin"===a.role?t.push("/admin/dashboard"):"chef"===a.role?t.push("/chef/orders"):t.push("/waiter"),$.a.success("\u6b22\u8fce\u60a8\uff1a".concat(a.name))}}}),[e.status]),Object(B.jsx)(De.a,{title:"\u767b\u5f55",children:Object(B.jsx)(ie,{children:Object(B.jsxs)(K.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){var n=t.account,a=t.password;""===n.trim()||""===a.trim()?$.a.error("\u8bf7\u8f93\u5165\u5de5\u53f7\u6216\u5bc6\u7801\uff01"):e.toLogin(t)},children:[Object(B.jsx)("img",{className:"logo-left",src:oe,alt:"logo"}),Object(B.jsx)("img",{className:"logo",src:oe,alt:""}),Object(B.jsx)("span",{className:"login-form-title",children:"\u8d26\u53f7\u767b\u5f55"}),Object(B.jsx)(K.a.Item,{name:"account",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u53f7"}],children:Object(B.jsx)(X.a,{prefix:Object(B.jsx)(te.a,{className:"site-form-item-icon"}),placeholder:"\u5de5\u53f7"})}),Object(B.jsx)(K.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(B.jsx)(X.a.Password,{prefix:Object(B.jsx)(ne.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(B.jsxs)(K.a.Item,{children:[Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button",children:"\u7acb\u5373\u767b\u5f55"}),Object(B.jsx)("div",{className:"login-form-login",children:Object(B.jsxs)("span",{children:["\u8fd8\u6ca1\u6709\u8d26\u53f7\uff1f",Object(B.jsx)("a",{href:"???",children:"\u53bb\u6ce8\u518c..."})]})})]})]})})})})),Ae={status:0},Me=n(20),Ue=n.n(Me),Ge=n(16),_e=n(314),Fe=n.n(_e),ze=Fe.a.create({baseURL:"/"});ze.interceptors.request.use((function(e){return e.headers.Authorization=Re("token"),e}),(function(e){return Promise.reject(e)})),ze.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze({method:"get",url:e,params:t}).then((function(e){return e.data})).catch((function(e){return e.message}))},Pe=function(e){return ze({method:"delete",url:e}).then((function(e){return e.data})).catch((function(e){return e.message}))},qe=function(e,t){var n=e.url;return ze({method:"post",url:n,data:t}).then((function(e){return e.data})).catch((function(e){return e.message}))},We=function(e,t){var n=e.url;return ze({method:"put",url:n,data:t}).then((function(e){return e.data})).catch((function(e){return e.message}))},He=Ue.a.mark(Ve);function Ve(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u767b\u9646\u9875saga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=11;break}return n.next=9,Object(Ge.a)({type:ue,data:t});case 9:n.next=13;break;case 11:return n.next=13,Object(Ge.a)({type:de});case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,Object(Ge.a)({type:be});case 19:case"end":return n.stop()}}),He,null,[[0,15]])}var Je="getdashboard",Ye="getdashboardsuc",Ke={detail:{}},Qe=Ue.a.mark(Xe);function Xe(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u6570\u636e\u770b\u677f\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=12;break}return n.next=9,Object(Ge.a)({type:Ye,data:t});case 9:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=12;break;case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),Qe,null,[[0,14]])}n(181);var Ze=n(34),$e=n.n(Ze),et=(n(195),n(118)),tt=n.n(et),nt=(n(337),n(113)),at=n.n(nt),rt=(n(437),n(250)),ct=n.n(rt),st=(n(438),n(157)),it=n.n(st),ot=(n(150),n(77)),lt=n.n(ot),ut=(n(2506),n(138)),dt=n.n(ut),bt=(n(297),n(174)),jt=n.n(bt),ft=n(24),Ot=n(110);function ht(){var e=Object(ae.a)(["\n\n  .content, .contents {\n    border-bottom: 1px solid #eee;\n  }\n\n  .contents, .contentss {\n    /deep/ .ant-statistic-content {\n      position: absolute;\n    }\n  }\n\n  .contentss {\n\n  }\n\n  .money {\n    margin-bottom: 16px;\n    font-size: 30px;\n    color: rgba(0, 0, 0, .85)\n  }\n\n  .num {\n    margin: 0 0 0 0;\n    display: flex\n  }\n\n  .num /deep/ .ant-statistic-title {\n    color: rgba(0, 0, 0, .85);\n    margin-top: 10px;\n  }\n\n  .daymoney /deep/ .ant-statistic-title {\n    color: rgba(0, 0, 0, .85);\n  }\n\n  .rightdot {\n    position: absolute;\n    top: 8px;\n    right: 30px;\n    transform: translate(44%, 50%);\n    color: rgba(0, 0, 0, .45);\n  }\n\n  .card-bottom {\n    display: block;\n    margin-top: 10px;\n  }\n\n  /deep/ .a > .ant-statistic-content {\n    position: absolute;\n  }\n\n  .ant-table {\n    height: 407px !important;\n  }\n"]);return ht=function(){return e},e}var pt=re.a.div(ht()),mt=n(2958),xt=n(2959),gt=n(2960),vt=n(223),yt=function(e){var t,n=Object(q.useState)([{}]),a=Object(ft.a)(n,2),r=a[0],c=a[1];Object(q.useEffect)((function(){if(e.data){var t=e.data.map((function(e){return{_id:e._id,num:e.num,paid:e.paid}}));console.log(t),c(t)}}),[e.data]);var s={data:r,padding:"auto",width:80,height:70,xField:"_id",yField:"paid",meta:{_id:{alias:"\u65e5\u671f"},paid:{alias:"\u51c0\u6536\u5165"}}};return Object(q.useEffect)((function(){var e=0,n=!1,a=setInterval((function(){e<2?(n=!n,e+=1,t.update({smooth:n})):clearInterval(a)}),100)}),[]),Object(B.jsx)(vt.c,Object(P.a)(Object(P.a)({},s),{},{chartRef:function(e){return t=e}}))},St=function(e){var t=Object(q.useState)([{}]),n=Object(ft.a)(t,2),a=n[0],r=n[1];Object(q.useEffect)((function(){if(e.data){var t=e.data.map((function(e){return{_id:e._id.slice(5),num:e.num,paid:e.paid}}));r(t)}}),[e.data]);var c={data:a,xField:"_id",yField:"num",width:80,height:80,label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{_id:{alias:"\u65e5\u671f"},num:{alias:"\u8ba2\u5355\u91cf"}}};return Object(B.jsx)(vt.a,Object(P.a)({},c))},Ct=function(e){var t=Object(q.useState)(.1),n=Object(ft.a)(t,2),a=n[0],r=n[1],c={percent:a,width:252,height:116,statistic:{title:{formatter:function(){return"\u5468\u6d3b\u8dc3\u7387"},style:function(e){return{fill:e.percent>.65?"white":"rgba(44,53,66,0.85)"}}},content:{style:function(e){return{fontSize:16,lineHeight:1,fill:e.percent>.65?"white":"rgba(44,53,66,0.85)"}}}},liquidStyle:function(e){var t=e.percent;return{fill:t>.75?"#5B8FF9":"#FAAD14",stroke:t>.75?"#5B8FF9":"#FAAD14"}},color:function(){return"#5B8FF9"}};return Object(q.useEffect)((function(){var t=.1,n=setInterval((function(){var a=Math.min(.1*Math.random(),.1);(t+=a)<=e.rate?r(t):(t-a<e.rate&&r(e.rate),clearInterval(n))}),500)}),[e.rate]),Object(B.jsx)(vt.d,Object(P.a)(Object(P.a)({},c),{},{chartRef:function(e){return e}}))},Et=function(e){var t=Object(q.useState)([{}]),n=Object(ft.a)(t,2),a=n[0],r=n[1];Object(q.useEffect)((function(){if(e.data){var t=e.data.map((function(e){return{_id:e._id,num:e.num,paid:e.paid}}));r(t)}}),[e.data]);var c={data:[a,a],xField:"_id",yField:["paid","num"],meta:{paid:{alias:"\u9500\u552e\u989d"},num:{alias:"\u8ba2\u5355\u91cf"}},geometryOptions:[{geometry:"column"},{geometry:"line",lineStyle:{lineWidth:2}}]};return Object(B.jsx)(vt.b,Object(P.a)({},c))},Tt=Object(ee.b)((function(e){return{detail:e.dashboard.detail||{}}}),(function(e){return{getDetail:function(){e({type:Je,url:"/admin/dashboard"})}}}))((function(e){var t,n,a,r,c,s,i,o,l,u,d,b,j,f,O,h,p,m,x,g,v,y,S,C,E,T=Object(q.useState)({vip:{vipnum:0,dayVipActiveNum:0,weekVipActiveRate:0},allSold:{allMoney:0,weekRate:0,dayRate:0,dayMoney:0},allReceive:{allReMoney:0,reTodayMoney:0,thisWeekRe:[]},orderNum:{todayordernum:0,totalordernum:0},SoldModule:{soldModule:void 0,soldModuleDay:void 0},rank:{rankMonth:[],rankWeek:[],rankDay:[]}}),k=Object(ft.a)(T,2),D=k[0],w=k[1],R=Object(q.useState)({}),I=Object(ft.a)(R,2),L=I[0],N=I[1],A=Object(q.useState)({}),M=Object(ft.a)(A,2),U=M[0],G=M[1];return Object(q.useEffect)((function(){e.getDetail()}),[]),Object(q.useMemo)((function(){var t,n,a=e.detail;w(a),N(null===a||void 0===a||null===(t=a.SoldModule)||void 0===t?void 0:t.soldModuleDay),G(null===a||void 0===a||null===(n=a.rank)||void 0===n?void 0:n.rankDay)}),[e.detail]),Object(B.jsx)(De.a,{title:"\u7ecf\u8425\u72b6\u51b5",children:D&&Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(pt,{children:[Object(B.jsx)("div",{className:"site-card-wrapper",children:Object(B.jsxs)(ct.a,{gutter:16,children:[Object(B.jsx)(it.a,{span:6,children:Object(B.jsxs)(lt.a,{bordered:!1,bodyStyle:{paddingTop:20,paddingBottom:10},children:[Object(B.jsx)("div",{className:"rightdot",children:Object(B.jsx)(jt.a,{placement:"top",title:"\u6307\u6807\u8bf4\u660e",children:Object(B.jsx)(mt.a,{})})}),Object(B.jsxs)("div",{className:"contents",children:[Object(B.jsx)(dt.a,{title:"\u603b\u9500\u552e\u989d",valueStyle:{fontSize:30},value:null===D||void 0===D||null===(t=D.allSold)||void 0===t?void 0:t.allMoney,prefix:"\xa5"}),Object(B.jsxs)("div",{className:"num",style:{marginTop:16},children:[-9999!==(null===D||void 0===D||null===(n=D.allSold)||void 0===n?void 0:n.weekRate)&&-8888!==(null===D||void 0===D||null===(a=D.allSold)||void 0===a?void 0:a.weekRate)&&Object(B.jsx)(dt.a,{title:"\u5468\u73af\u6bd4",value:null===D||void 0===D||null===(r=D.allSold)||void 0===r?void 0:r.weekRate,precision:2,valueStyle:{color:(null===D||void 0===D||null===(c=D.allSold)||void 0===c?void 0:c.weekRate)<=0?"#cf1322":"#3f8600",fontSize:18},prefix:(null===D||void 0===D||null===(s=D.allSold)||void 0===s?void 0:s.weekRate)>0?Object(B.jsx)(xt.a,{}):Object(B.jsx)(gt.a,{}),suffix:"%"}),-9999===(null===D||void 0===D||null===(i=D.allSold)||void 0===i?void 0:i.weekRate)&&Object(B.jsx)(dt.a,{title:"\u5468\u73af\u6bd4",value:"\u6682\u65e0\u4e0a\u5468\u6570\u636e",precision:2,valueStyle:{color:"#a4b0be",fontSize:16}}),-8888===(null===D||void 0===D||null===(o=D.allSold)||void 0===o?void 0:o.weekRate)&&Object(B.jsx)(dt.a,{title:"\u5468\u73af\u6bd4",value:"\u6682\u65e0\u672c\u5468\u6570\u636e",precision:2,valueStyle:{color:"#a4b0be",fontSize:16}}),-9999!==(null===D||void 0===D||null===(l=D.allSold)||void 0===l?void 0:l.dayRate)&&-8888!==(null===D||void 0===D||null===(u=D.allSold)||void 0===u?void 0:u.dayRate)&&Object(B.jsx)(dt.a,{style:{marginLeft:30},title:"\u65e5\u73af\u6bd4",value:null===D||void 0===D||null===(d=D.allSold)||void 0===d?void 0:d.dayRate,precision:2,valueStyle:{color:(null===D||void 0===D||null===(b=D.allSold)||void 0===b?void 0:b.dayRate)<=0?"#cf1322":"#3f8600",fontSize:18},prefix:(null===D||void 0===D||null===(j=D.allSold)||void 0===j?void 0:j.dayRate)>0?Object(B.jsx)(xt.a,{}):Object(B.jsx)(gt.a,{}),suffix:"%"}),-9999===(null===D||void 0===D||null===(f=D.allSold)||void 0===f?void 0:f.dayRate)&&Object(B.jsx)(dt.a,{style:{marginLeft:30},title:"\u65e5\u73af\u6bd4",value:"\u6682\u65e0\u6628\u65e5\u6570\u636e",precision:2,valueStyle:{color:"#a4b0be",fontSize:16}}),-8888===(null===D||void 0===D||null===(O=D.allSold)||void 0===O?void 0:O.dayRate)&&Object(B.jsx)(dt.a,{style:{marginLeft:30},title:"\u65e5\u73af\u6bd4",value:"\u6682\u65e0\u4eca\u65e5\u6570\u636e",precision:2,valueStyle:{color:"#a4b0be",fontSize:16}})]})]}),Object(B.jsx)("div",{className:"daymoney",children:Object(B.jsx)(dt.a,{style:{display:"flex",marginTop:10},title:"\u65e5\u9500\u552e\u989d",value:null===D||void 0===D||null===(h=D.allSold)||void 0===h?void 0:h.dayMoney,precision:2,valueStyle:{color:"#000",fontSize:14,marginLeft:10},prefix:"\xa5"})})]})}),Object(B.jsx)(it.a,{span:6,children:Object(B.jsxs)(lt.a,{bordered:!1,bodyStyle:{paddingTop:20,paddingBottom:10},children:[Object(B.jsx)("div",{className:"rightdot",children:Object(B.jsx)(jt.a,{placement:"top",title:"\u6307\u6807\u8bf4\u660e",children:Object(B.jsx)(mt.a,{})})}),Object(B.jsxs)("div",{className:"contents",children:[Object(B.jsx)(dt.a,{title:"\u9500\u552e\u5b9e\u6536",valueStyle:{fontSize:30},value:null===D||void 0===D||null===(p=D.allReceive)||void 0===p?void 0:p.allReMoney,prefix:"\xa5"}),Object(B.jsx)(yt,{data:null===D||void 0===D||null===(m=D.allReceive)||void 0===m?void 0:m.thisWeekRe})]}),Object(B.jsx)("div",{className:"daymoney",children:Object(B.jsx)(dt.a,{style:{display:"flex",marginTop:10},title:"\u65e5\u6536\u5165\u989d",value:null===D||void 0===D||null===(x=D.allReceive)||void 0===x?void 0:x.reTodayMoney,precision:2,valueStyle:{color:"#000",fontSize:14,marginLeft:10},prefix:"\xa5"})})]})}),Object(B.jsx)(it.a,{span:6,children:Object(B.jsxs)(lt.a,{bordered:!1,bodyStyle:{paddingTop:20,paddingBottom:10},children:[Object(B.jsx)("div",{className:"rightdot",children:Object(B.jsx)(jt.a,{placement:"top",title:"\u6307\u6807\u8bf4\u660e",children:Object(B.jsx)(mt.a,{})})}),Object(B.jsxs)("div",{className:"contents",children:[Object(B.jsx)(dt.a,{suffix:"\u5355",title:"\u603b\u8ba2\u5355\u91cf",value:null===D||void 0===D||null===(g=D.orderNum)||void 0===g?void 0:g.totalordernum}),Object(B.jsx)(St,{data:null===D||void 0===D||null===(v=D.allReceive)||void 0===v?void 0:v.thisWeekRe})]}),Object(B.jsx)("div",{className:"daymoney",children:Object(B.jsx)(dt.a,{style:{display:"flex",marginTop:10},title:"\u65e5\u8ba2\u5355\u91cf",value:null===D||void 0===D||null===(y=D.orderNum)||void 0===y?void 0:y.todayordernum,suffix:"\u5355",valueStyle:{color:"#000",fontSize:14,marginLeft:10}})})]})}),Object(B.jsx)(it.a,{span:6,children:Object(B.jsxs)(lt.a,{bordered:!1,headStyle:{borderBottom:0,minHeight:0},bodyStyle:{paddingTop:20,paddingBottom:10},children:[Object(B.jsx)("div",{className:"rightdot",children:Object(B.jsx)(jt.a,{placement:"top",title:"\u6307\u6807\u8bf4\u660e",children:Object(B.jsx)(mt.a,{})})}),Object(B.jsxs)("div",{className:"contents",children:[Object(B.jsx)(dt.a,{title:"\u4f1a\u5458\u6570\u91cf",value:null===D||void 0===D||null===(S=D.vip)||void 0===S?void 0:S.vipnum,suffix:"\u4eba"}),Object(B.jsx)("div",{style:{marginLeft:"4%",marginTop:"-12%"},className:"num",children:Object(B.jsx)(Ct,{rate:null===D||void 0===D||null===(C=D.vip)||void 0===C?void 0:C.weekVipActiveRate})})]}),Object(B.jsx)("div",{className:"daymoney",children:Object(B.jsx)(dt.a,{style:{display:"flex",marginTop:10},title:"\u65e5\u6d3b\u8dc3\u91cf",suffix:"\u4eba",value:null===D||void 0===D||null===(E=D.vip)||void 0===E?void 0:E.dayVipActiveNum,valueStyle:{color:"#000",fontSize:14,marginLeft:10}})})]})})]})}),Object(B.jsx)("div",{className:"site-card-wrapper",style:{marginTop:"1%"},children:Object(B.jsxs)(ct.a,{gutter:16,children:[Object(B.jsx)(it.a,{span:18,children:Object(B.jsx)(lt.a,{title:"\u9500\u552e\u989d",extra:Object(B.jsxs)(at.a.Group,{onChange:function(t){var n,a=t.target.value,r=e.detail;N("year"===a?null===r||void 0===r?void 0:r.SoldModule.soldModule:null===r||void 0===r||null===(n=r.SoldModule)||void 0===n?void 0:n.soldModuleDay)},defaultValue:"month",children:[Object(B.jsx)(at.a.Button,{value:"month",children:"\u672c\u6708"}),Object(B.jsx)(at.a.Button,{value:"year",children:"\u4eca\u5e74"})]}),children:Object(B.jsx)(Et,{data:L})})}),Object(B.jsx)(it.a,{span:6,children:Object(B.jsx)(lt.a,{title:"\u9500\u91cf\u6392\u884c",extra:Object(B.jsxs)(at.a.Group,{size:"small",onChange:function(t){var n,a,r,c=t.target.value,s=e.detail;G("month"===c?null===s||void 0===s||null===(n=s.rank)||void 0===n?void 0:n.rankMonth:"week"===c?null===s||void 0===s||null===(a=s.rank)||void 0===a?void 0:a.rankWeek:null===s||void 0===s||null===(r=s.rank)||void 0===r?void 0:r.rankDay)},defaultValue:"day",children:[Object(B.jsx)(at.a.Button,{value:"day",children:"\u4eca\u65e5"}),Object(B.jsx)(at.a.Button,{value:"week",children:"\u672c\u5468"}),Object(B.jsx)(at.a.Button,{value:"month",children:"\u672c\u6708"})]}),children:Object(B.jsx)(tt.a,{pagination:!1,columns:[{title:"\u83dc\u54c1",dataIndex:"name",key:"name"},{title:"\u9500\u91cf",dataIndex:"num",key:"num",align:["center"]}],dataSource:U})})})]})})]})})})})),kt="getfailed",Dt="getlist",wt="getsuccess",Rt="addstaff",It="addsuccess",Lt="adderror",Nt="togglePage",At="toggled",Mt="delstaff",Ut="delsuccess",Gt="delerror",_t="editstaff",Ft="editsuccess",zt="editerror",Bt={list:[],addStatus:99999,errorMsg:"",delStatus:99999,editStatus:99999},Pt=Ue.a.mark(Vt),qt=Ue.a.mark(Jt),Wt=Ue.a.mark(Yt),Ht=Ue.a.mark(Kt);function Vt(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664\u5458\u5de5sa\xaega\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),!t.status){n.next=15;break}return console.log("\u53d1\u9001\u5220\u9664\u6210\u529fsaga"),n.next=10,Object(Ge.a)({type:Ut,data:t});case 10:return console.log("\u5220\u9664\u5458\u5de5\u6210\u529f"),n.next=13,Object(Ge.a)({type:Dt,url:Oe});case 13:n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:Gt,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),Pt,null,[[0,19]])}function Jt(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589e\u5458\u5de5saga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:It,data:t});case 9:return console.log("\u6dfb\u52a0\u5458\u5de5\u6210\u529f"),n.next=12,Object(Ge.a)({type:Dt,url:Oe});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:Lt,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),qt,null,[[0,20]])}function Yt(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5207\u6362\uff0c\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=10;break}return n.next=8,Object(Ge.a)({type:At,data:t});case 8:n.next=10;break;case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(0);case 14:case"end":return n.stop()}}),Wt,null,[[0,12]])}function Kt(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=12;break}return console.log("\u4fee\u6539\u5458\u5de5\u6210\u529f"),n.next=9,Object(Ge.a)({type:Ft,data:t});case 9:return n.next=11,Object(Ge.a)({type:Dt,url:Oe});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42");case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),Ht,null,[[0,14]])}n(198);var Qt=n(111),Xt=n.n(Qt),Zt=(n(199),n(109)),$t=n.n(Zt),en=(n(355),n(131)),tn=n.n(en),nn=n(108),an=n.n(nn),rn=n(2961),cn=(n(436),n(387)),sn=n.n(cn),on=function(e){return Object(B.jsx)(sn.a,{defaultCurrent:e.page,total:e.total,hideOnSinglePage:!0,style:{float:"right",marginTop:20},showTotal:function(e){return"\u5171 ".concat(e," \u6761")},onChange:e.fun})},ln=(n(469),n(287)),un=n.n(ln),dn=X.a.Search,bn=function(e){var t;return Object(B.jsxs)("div",{style:{marginBottom:10},children:[e.editBtn&&Object(B.jsx)(J.a,{style:{display:e.barVisible,marginRight:10},onClick:e.editBtn,disabled:null!==(t=e.editBtnState)&&void 0!==t&&t,children:"\u7f16\u8f91"}),Object(B.jsx)(un.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u5185\u5bb9\u5417",placement:"right",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:e.delSelected,children:Object(B.jsx)(J.a,{danger:!0,style:{display:e.barVisible},children:"\u5220\u9664"})}),Object(B.jsx)(dn,{placeholder:"\u8bf7\u8f93\u5165".concat(e.title),onSearch:e.Search,allowClear:!0,style:{width:200,display:""===e.barVisible?"none":""}})]})},jn=Object(ee.b)((function(e){return{list:e.staff.list||[],addStatus:e.staff.addStatus,delStatus:e.staff.delStatus,errorMsg:e.staff.errorMsg,editStatus:e.staff.editStatus}}),(function(e){return{delStaff:function(t){e({type:Mt,url:"/admin/staff",data:t})},addStaff:function(t){e({type:Rt,url:"/admin/staff/add",data:t})},togglePage:function(t){e({type:Nt,url:Oe,data:t})},editStaff:function(t){e({type:_t,url:"/admin/staff/edit",data:t})}}}))((function(e){var t=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u89d2\u8272",key:"role",dataIndex:"role",render:function(e){return Object(B.jsxs)(B.Fragment,{children:["admin"===e&&Object(B.jsx)(tn.a,{color:"#0083B0",children:"admin"===e?"\u7ba1\u7406\u5458":"\u5458\u5de5"},e),"waiter"===e&&Object(B.jsx)(tn.a,{color:"#2ed573",children:e="\u670d\u52a1\u5458"},e),"chef"===e&&Object(B.jsx)(tn.a,{color:"#a17fe0",children:e="\u53a8\u5e08"},e)]})}},{title:"\u5165\u804c\u65f6\u95f4",key:"joinTime",dataIndex:"joinTime",render:function(e){return Object(B.jsx)(B.Fragment,{children:an()(e).format("YYYY-MM-DD")})}},{title:"\u5728\u804c\u72b6\u6001",key:"status",dataIndex:"status",render:function(e){return Object(B.jsxs)(B.Fragment,{children:[1===e&&"\u5728\u804c",0===e&&"\u8bf7\u5047",-1===e&&"\u79bb\u804c"]})}}],n=Object(q.useState)({query:"",page:1,pagesize:10}),a=Object(ft.a)(n,2),r=a[0],c=a[1],s=Object(q.useState)([]),i=Object(ft.a)(s,2),o=i[0],l=i[1],u=Object(q.useState)(!1),d=Object(ft.a)(u,2),b=d[0],j=d[1],f=Object(q.useState)(["waiter"]),O=Object(ft.a)(f,2),h=O[0],p=O[1],m=Object(q.useState)(""),x=Object(ft.a)(m,2),g=x[0],v=x[1],y=Object(q.useState)({account:0,name:"",role:"",status:-9}),S=Object(ft.a)(y,2),C=S[0],E=S[1],T=Object(q.useRef)(null),k=function(){console.log("Clicked cancel button"),j(!1)};Object(q.useEffect)((function(){var e=C.role;p(["".concat(e)])}),[C]),Object(q.useEffect)((function(){e.togglePage(r);var t=e.list.records;l(t)}),[e.list.total,e.list.page,e.list.size]),Object(q.useMemo)((function(){var t=e.list.records;l(t)}),[e.list]),Object(q.useEffect)((function(){var t=e.errorMsg,n=e.addStatus,a=e.delStatus,r=e.editStatus,c=Re("addStatus"),s=Re("delStatus"),i=Re("editStatus");c==n||(we("addStatus",n),n<1?$.a.success("\u5458\u5de5\u6dfb\u52a0\u6210\u529f"):t&&t.includes("\u5bc6\u7801")?$.a.warning("\u8bf7\u8f93\u51653\u4f4d\u6570\u4ee5\u4e0a\u7684\u5bc6\u7801"):t&&t.includes("\u59d3\u540d")?$.a.warning("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u59d3\u540d\u683c\u5f0f"):t&&t.includes("\u6ce8\u518c")&&$.a.warn("\u6b64\u8d26\u53f7\u5df2\u88ab\u6ce8\u518c")),s==a||(we("delStatus",a),a<1&&$.a.success("\u5458\u5de5\u5220\u9664\u6210\u529f")),i==r||(we("editStatus",r),r<1&&$.a.success("\u8d44\u6599\u4fee\u6539\u6210\u529f"),M([]),z.current=[])}),[e.addStatus,e.delStatus,e.editStatus]);var D=Object(q.useState)(!1),w=Object(ft.a)(D,2),R=w[0],I=w[1],L=Object(q.useState)([]),N=Object(ft.a)(L,2),A=N[0],M=N[1],U=Object(q.useState)(""),G=Object(ft.a)(U,2),_=G[0],F=G[1],z=Object(q.useRef)(),W={onChange:function(e,t){M(t),z.current=e,t.length>1?I(!0):I(!1),console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},selectedRowKeys:z.current};return Object(q.useEffect)((function(){M(A),0===A.length?F("none"):F("")}),[A]),Object(q.useEffect)((function(){c(r),e.togglePage(r)}),[r]),Object(q.useEffect)((function(){var t=e.list.records;l(t)}),[e.list.records]),Object(B.jsx)(De.a,{title:"\u5458\u5de5\u7ba1\u7406",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(lt.a,{title:"\u5458\u5de5\u5217\u8868",extra:Object(B.jsx)(J.a,{type:"primary",onClick:function(){j(!0),v("\u65b0\u589e\u5458\u5de5")},style:{borderRadius:5},children:"\u65b0\u589e"}),headStyle:{},style:{width:"100%"},children:[Object(B.jsx)(bn,{delSelected:function(){var t=A.map((function(e){return e._id})).join("-");e.delStaff(t),F("none")},barVisible:_,editBtn:function(){var e;e=A[0],j(!0),v("\u7f16\u8f91\u5458\u5de5"),E({account:e.account,name:e.name,role:e.role,status:e.status})},editBtnState:R,Search:function(e){c({page:1,pagesize:10,query:e})},title:"\u5458\u5de5\u59d3\u540d"}),o&&Object(B.jsx)(tt.a,{rowKey:"_id",bordered:!0,columns:t,dataSource:o,pagination:!1,rowSelection:Object(P.a)({},W),scroll:{y:400}}),o&&Object(B.jsx)(on,{page:e.list.page,total:e.list.total,fun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e.togglePage(r),c({query:r.query,page:t,pagesize:n})}}),Object(B.jsx)(Xt.a,{title:g,visible:b,onCancel:k,destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{name:"normal_login",className:"login-form",onFinish:function(t){t.hasOwnProperty("password")?(t.account=e.list.records.reduce((function(e,t){return e>t.account?e:"".concat(t.account+1)}),0),t.joinTime=(new Date).getTime(),e.addStaff(t),j(!1)):(t.name=T.current.state.value,t.account=C.account,e.editStaff(t),j(!1))},children:[Object(B.jsxs)(K.a.Item,{name:"account",children:["\u65b0\u589e\u5458\u5de5"===g&&Object(B.jsx)(K.a.Item,{name:"account",style:{margin:0},initialValue:e.list.records.reduce((function(e,t){return e>t.account?"".concat(e):"".concat(t.account+1)}),0),children:Object(B.jsx)(X.a,{disabled:!0,prefix:Object(B.jsx)(rn.a,{className:"site-form-item-icon"}),placeholder:"\u5de5\u53f7"})}),"\u7f16\u8f91\u5458\u5de5"===g&&Object(B.jsx)(K.a.Item,{name:"account",style:{margin:0},children:Object(B.jsx)(X.a,{defaultValue:C.account,disabled:!0,prefix:Object(B.jsx)(rn.a,{className:"site-form-item-icon"}),placeholder:"\u5de5\u53f7"})})]}),"\u65b0\u589e\u5458\u5de5"===g&&Object(B.jsx)(K.a.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:Object(B.jsx)(X.a,{autoFocus:!0,prefix:Object(B.jsx)(te.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u51652\u4f4d\u53ca\u4ee5\u4e0a\u7684\u59d3\u540d"})}),"\u7f16\u8f91\u5458\u5de5"===g&&Object(B.jsx)(K.a.Item,{name:"name",initialValue:C.name,children:Object(B.jsx)(X.a,{autoFocus:!0,defaultValue:C.name,ref:T,prefix:Object(B.jsx)(te.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u51652\u4f4d\u53ca\u4ee5\u4e0a\u7684\u59d3\u540d"})}),"\u65b0\u589e\u5458\u5de5"===g&&Object(B.jsx)(K.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(B.jsx)(X.a.Password,{prefix:Object(B.jsx)(ne.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u8bf7\u8f93\u51653\u4f4d\u53ca\u4ee5\u4e0a\u7684\u5bc6\u7801"})}),Object(B.jsx)(K.a.Item,{name:"role",initialValue:"\u7f16\u8f91\u5458\u5de5"===g?h[0]:"waiter",children:Object(B.jsx)(at.a.Group,{options:[{label:"\u670d\u52a1\u5458",value:"waiter",style:{marginRight:10}},{label:"\u53a8\u5e08",value:"chef",style:{marginRight:10}},{label:"\u7ba1\u7406\u5458",value:"admin"}],onChange:function(e){var t=e.target.value;p(t)},value:h[0],optionType:"button"})}),Object(B.jsx)(K.a.Item,{name:"status",initialValue:"\u7f16\u8f91\u5458\u5de5"===g?C.status:1,style:{marginTop:-10},children:Object(B.jsxs)(at.a.Group,{children:[Object(B.jsx)(at.a,{value:1,children:"\u5728\u804c"}),Object(B.jsx)(at.a,{value:0,children:"\u8bf7\u5047"}),Object(B.jsx)(at.a,{value:-1,children:"\u79bb\u804c"})]})}),Object(B.jsx)(K.a.Item,{style:{marginBottom:-6},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:k,children:"\u53d6\u6d88"}),"\u65b0\u589e\u5458\u5de5"===g&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u5458\u5de5"===g&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u63d0\u4ea4"})]})})]})})]})})})})),fn="getfailed",On="getlist",hn="getcatelist",pn="getcatelistsuccess",mn="getsuccess",xn="adddish",gn="adddishsuc",vn="adddisherr",yn="editdishdishsuc",Sn="editdisherr",Cn="editdish",En="deldish",Tn="deldishsuc",kn="deldisherr",Dn="addsuccess",wn="adderror",Rn="togglePage",In="toggled",Ln="delsuccess",Nn="delerror",An="editsuccess",Mn="editerror",Un={list:[],cateList:[],addDishStatus:99999,errorMsgDish:"",delDishStatus:99999,editDishStatus:99999},Gn=Ue.a.mark(Bn),_n=Ue.a.mark(Pn),Fn=Ue.a.mark(qn),zn=Ue.a.mark(Wn);function Bn(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664\u83dc\u54c1saga\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(200!==(t=n.sent).status){n.next=15;break}return console.log("\u53d1\u9001\u83dc\u54c1\u5220\u9664\u6210\u529fsaga"),n.next=9,Object(Ge.a)({type:Tn,data:t});case 9:return console.log("\u5220\u9664\u83dc\u54c1\u6210\u529f"),n.next=12,Object(Ge.a)({type:On,url:he});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:kn,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),Gn,null,[[0,19]])}function Pn(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589e\u83dc\u54c1saga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:gn,data:t});case 9:return console.log("\u6dfb\u52a0\u83dc\u54c1\u6210\u529f"),n.next=12,Object(Ge.a)({type:On,url:he});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:vn,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),_n,null,[[0,20]])}function qn(e){var t,n;return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("\u83dc\u54c1\u5217\u8868\u9875\u9762saga\u6267\u884c"),a.next=4,Be(e.url,e.data);case 4:return t=a.sent,a.next=7,Be(pe);case 7:if(n=a.sent,200!==t.meta.status){a.next=15;break}return console.log("\u83dc\u54c1\u5217\u8868\u83b7\u53d6\u6210\u529f"),a.next=12,Object(Ge.a)({type:mn,data:t});case 12:console.log("\u53d1\u9001\u83b7\u53d6\u6210\u529f"),a.next=15;break;case 15:if(200!==n.meta.status){a.next=21;break}return console.log("\u5206\u7c7b\u83b7\u53d6\u6210\u529f"),a.next=19,Object(Ge.a)({type:pn,data:n});case 19:a.next=21;break;case 21:a.next=25;break;case 23:a.prev=23,a.t0=a.catch(0);case 25:case"end":return a.stop()}}),Fn,null,[[0,23]])}function Wn(e){var t,n;return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("\u4fee\u6539\u83dc\u54c1\u4fe1\u606fsaga\u6267\u884c"),a.next=4,We({url:e.url},e.data);case 4:if(200!==(null===(n=a.sent)||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.status)){a.next=14;break}return console.log("\u4fee\u6539\u83dc\u54c1\u6210\u529f"),a.next=9,Object(Ge.a)({type:yn,data:n});case 9:return a.next=11,Object(Ge.a)({type:On,url:he});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),a.next=16;break;case 14:return a.next=16,Object(Ge.a)({type:Sn,data:n});case 16:a.next=20;break;case 18:a.prev=18,a.t0=a.catch(0);case 20:case"end":return a.stop()}}),zn,null,[[0,18]])}n(356);var Hn=n(221),Vn=n.n(Hn),Jn=(n(2802),n(798)),Yn=n.n(Jn),Kn=n(413),Qn=(n(263),n(91)),Xn=n.n(Qn),Zn=n(2962),$n=(n(2806),Xn.a.Option),ea=Object(ee.b)((function(e){return{list:e.dish.list||[],cateList:e.dish.cateList,addDishStatus:e.dish.addDishStatus,delDishStatus:e.dish.delDishStatus,errorMsgDish:e.dish.errorMsgDish,editDishStatus:e.dish.editDishStatus}}),(function(e){return{delDish:function(t){e({type:En,url:"/admin/dish/del",data:t})},addDish:function(t){e({type:xn,url:"/admin/dish/add",data:t})},toggleDishPage:function(t){e({type:On,url:he,data:t})},editDish:function(t){e({type:Cn,url:"/admin/dish/edit",data:t})}}}))((function(e){var t=[{title:"\u83dc\u54c1",dataIndex:"name",key:"name",render:function(e,t,a){return Object(B.jsx)("a",{onClick:function(){n(t)},children:e})}},{title:"\u5206\u7c7b",key:"category",dataIndex:"category",render:function(e,t,n){var a;return Object(B.jsx)(B.Fragment,{children:null===t||void 0===t||null===(a=t.category)||void 0===a?void 0:a.foodTypeName})}},{title:"\u552e\u4ef7(\u5143)",dataIndex:"price",key:"price"},{title:"\u5e93\u5b58",key:"number",dataIndex:"number",render:function(e){return Object(B.jsx)(B.Fragment,{children:e})}}],n=function(e){var t,n;console.log(e),m(!0),F("\u7f16\u8f91\u83dc\u54c1"),s({_id:e._id,name:e.name,picture:e.picture,number:e.number,price:e.price,categoryId:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t._id,foodTypeName:null===e||void 0===e||null===(n=e.category)||void 0===n?void 0:n.foodTypeName})},a=Object(q.useState)({_id:"",name:"",picture:"",number:888,price:0,categoryId:"",foodTypeName:""}),r=Object(ft.a)(a,2),c=r[0],s=r[1],i=Object(q.useState)([]),o=Object(ft.a)(i,2),l=o[0],u=o[1],d=Object(q.useState)({query:"",page:1,pagesize:10}),b=Object(ft.a)(d,2),j=b[0],f=b[1],O=Object(q.useState)(!1),h=Object(ft.a)(O,2),p=h[0],m=h[1],x=function(){M([]),m(!1)};Object(q.useEffect)((function(){e.toggleDishPage(j);var t=e.list.records;u(t)}),[e.list.total,e.list.page,e.list.size]),Object(q.useMemo)((function(){var t=e.list.records;u(t)}),[e.list]),Object(q.useEffect)((function(){var e=c.picture||"";if(""!==e){console.log(111111);var t=[{uid:123,status:"done",type:"image/png",url:"".concat(Ee).concat(e)}];M(t)}}),[c]);var g=Object(q.useState)(!1),v=Object(ft.a)(g,2),y=v[0],S=v[1],C=Object(q.useState)(""),E=Object(ft.a)(C,2),T=E[0],k=E[1],D=Object(q.useState)(""),w=Object(ft.a)(D,2),R=w[0],I=w[1],L=Object(q.useState)([]),N=Object(ft.a)(L,2),A=N[0],M=N[1],U=Object(q.useState)(""),G=Object(ft.a)(U,2),_=G[0],F=G[1];function z(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var P=function(){var e=Object(Kn.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,z(t.originFileObj);case 3:t.preview=e.sent;case 4:k(t.url||t.preview),S(!0),I(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=Object(q.useState)(""),H=Object(ft.a)(W,2),V=H[0],Y=H[1],Q=Object(B.jsxs)("div",{children:[Object(B.jsx)(Zn.a,{}),Object(B.jsx)("div",{style:{marginTop:8},children:"\u70b9\u51fb\u4e0a\u4f20"})]});Object(q.useEffect)((function(){console.log(e);var t=e.errorMsgDish,n=e.addDishStatus,a=e.delDishStatus,r=e.editDishStatus,c=Re("addDishStatus"),s=Re("delDishStatus"),i=Re("editDishStatus");console.log(e),console.log(t),c==n||(we("addDishStatus",n),n<1?$.a.success("\u83dc\u54c1\u6dfb\u52a0\u6210\u529f"):t&&t.includes("\u5b58\u5728")&&$.a.warn("\u6b64\u83dc\u54c1\u5df2\u5b58\u5728")),s==a||(we("delDishStatus",a),a<1&&$.a.success("\u83dc\u54c1\u5220\u9664\u6210\u529f")),i==r||(we("editDishStatus",r),r<1?($.a.success("\u83dc\u54c1\u4fee\u6539\u6210\u529f"),se([]),de.current=[]):t&&t.includes("\u5b58\u5728")&&$.a.warn("\u6b64\u83dc\u54c1\u5df2\u5b58\u5728"))}),[e]);var Z=Object(q.useState)(!1),ee=Object(ft.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(q.useState)([]),re=Object(ft.a)(ae,2),ce=re[0],se=re[1],ie=Object(q.useState)(""),oe=Object(ft.a)(ie,2),le=oe[0],ue=oe[1],de=Object(q.useRef)(),be={onChange:function(e,t){se(t),de.current=e,t.length>1?ne(!0):ne(!1),console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},selectedRowKeys:de.current};return Object(q.useEffect)((function(){se(ce),0===ce.length?ue("none"):ue("")}),[ce]),Object(q.useEffect)((function(){f(j),e.toggleDishPage(j)}),[j]),Object(q.useEffect)((function(){var t=e.list.records;u(t)}),[e.list.records]),Object(B.jsx)(De.a,{title:"\u83dc\u54c1 > \u5217\u8868",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(lt.a,{title:"\u83dc\u54c1\u5217\u8868",extra:Object(B.jsx)(J.a,{onClick:function(){m(!0),F("\u65b0\u589e\u83dc\u54c1")},type:"primary",shape:"circle",icon:Object(B.jsx)(Zn.a,{}),size:"large"}),style:{width:"100%"},children:[Object(B.jsx)(bn,{delSelected:function(){var t=ce.map((function(e){return e._id})).join("-");e.delDish(t),ue("none")},barVisible:le,editBtn:function(){n(ce[0])},editBtnState:te,Search:function(e){f({page:1,pagesize:10,query:e})},title:"\u83dc\u54c1\u540d"}),l&&Object(B.jsx)(tt.a,{rowKey:"_id",bordered:!0,columns:t,dataSource:l,pagination:!1,rowSelection:be,scroll:{y:400}}),l&&Object(B.jsx)(on,{page:e.list.page,total:e.list.total,fun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e.toggleDishPage(j),f({query:j.query,page:t,pagesize:n})}}),Object(B.jsxs)(Vn.a,{title:_,width:330,onClose:x,visible:p,footer:null,destroyOnClose:!0,children:[Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Yn.a,{action:"https://trylive.top:8300/upload",listType:"picture-card",fileList:A,onPreview:P,onChange:function(e){var t=e.fileList;M(t),t.length>0&&"done"===t[0].status&&Y(t[0].response[0].file)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||$.a.error("\u53ea\u80fd\u4e0a\u4f20JPG\u6216\u8005PNG\u56fe\u7247!");var n=e.size/1024/1024<2;return n||$.a.error("\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72M!"),t&&n},children:A.length>=1?null:Q}),Object(B.jsx)(Xt.a,{visible:y,title:R,footer:null,onCancel:function(){return x()},children:Object(B.jsx)("img",{alt:"example",style:{width:"100%"},src:T})})]}),Object(B.jsxs)(K.a,{layout:"vertical",requiredMark:!0,style:{marginTop:30},onFinish:function(t){"\u65b0\u589e\u83dc\u54c1"===_?(t.picture=V,e.addDish(t)):(t._id=c._id,t.picture=V,console.log(t),e.editDish(t)),x()},children:[Object(B.jsxs)(ct.a,{gutter:16,children:[Object(B.jsxs)(it.a,{span:23,children:["\u65b0\u589e\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{name:"name",label:"\u83dc\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}],children:Object(B.jsx)(X.a,{autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"})}),"\u7f16\u8f91\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{name:"name",label:"\u83dc\u540d",initialValue:c.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}],children:Object(B.jsx)(X.a,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",autoFocus:!0})})]}),Object(B.jsxs)(it.a,{span:23,children:["\u65b0\u589e\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{name:"price",label:"\u5355\u4ef7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5355\u4ef7"}],children:Object(B.jsx)(X.a,{type:"number",style:{width:"100%"},addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u5355\u4ef7"})}),"\u7f16\u8f91\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{initialValue:c.price,name:"price",label:"\u5355\u4ef7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5355\u4ef7"}],children:Object(B.jsx)(X.a,{type:"number",style:{width:"100%"},addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u5355\u4ef7"})})]})]}),Object(B.jsxs)(ct.a,{gutter:16,children:[Object(B.jsxs)(it.a,{span:23,children:["\u65b0\u589e\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{name:"category",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(B.jsx)(Xn.a,{placeholder:"\u8bf7\u9009\u62e9\u5206\u7c7b",children:e.cateList&&e.cateList.map((function(e){return Object(B.jsx)($n,{value:e._id,children:e.foodTypeName},e._id)}))})}),"\u7f16\u8f91\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{initialValue:c.categoryId,name:"category",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(B.jsx)(Xn.a,{placeholder:"\u8bf7\u9009\u62e9\u5206\u7c7b",defaultValue:c.foodTypeName,children:e.cateList&&e.cateList.map((function(e){return Object(B.jsx)($n,{value:e._id,children:e.foodTypeName},e._id)}))})})]}),Object(B.jsxs)(it.a,{span:23,children:["\u65b0\u589e\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{initialValue:888,name:"number",label:"\u5e93\u5b58",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e93\u5b58"}],children:Object(B.jsx)(X.a,{type:"number",style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58",defaultValue:888})}),"\u7f16\u8f91\u83dc\u54c1"===_&&Object(B.jsx)(K.a.Item,{initialValue:c.number,name:"number",label:"\u5e93\u5b58",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e93\u5b58"}],children:Object(B.jsx)(X.a,{type:"number",style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58"})})]})]}),Object(B.jsx)(K.a.Item,{style:{marginTop:66,marginRight:14},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:x,children:"\u53d6\u6d88"}),"\u65b0\u589e\u83dc\u54c1"===_&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u83dc\u54c1"===_&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u63d0\u4ea4"})]})})]})]})]})})})})),ta=n(2963),na="getcatelists",aa="getcatelistsuc",ra="getcatelisterr",ca="cateadd",sa="cateaddsuc",ia="cateadderr",oa="cateedit",la="cateeditsuc",ua="cateediterr",da="catedel",ba="catedelsuc",ja="catedelerr",fa=Object(ee.b)((function(e){return{list:e.cate.categoryList||[],addCateStatus:e.cate.addCateStatus,delCateStatus:e.cate.delCateStatus,errorMsgCate:e.cate.errorMsgCate,editCateStatus:e.cate.editCateStatus}}),(function(e){return{delCate:function(t){e({type:da,url:"/admin/category/del",data:t})},addCate:function(t){e({type:ca,url:"/admin/category/add",data:t})},toggleCatePage:function(t){e({type:na,url:me,data:t})},editCate:function(t){e({type:oa,url:"/admin/category/edit",data:t})}}}))((function(e){var t=[{title:"\u5206\u7c7b",dataIndex:"foodTypeName",key:"foodTypeName"},{title:"\u5173\u8054\u83dc\u54c1\u6570\u91cf",key:"contactnum",dataIndex:"contactnum"},{title:"\u521b\u5efa\u65f6\u95f4",key:"createAt",dataIndex:"createAt",render:function(e){return Object(B.jsx)(B.Fragment,{children:an()(e).format("YYYY-MM-DD")})}}],n=Object(q.useState)([]),a=Object(ft.a)(n,2),r=a[0],c=a[1],s=Object(q.useState)(!1),i=Object(ft.a)(s,2),o=i[0],l=i[1],u=Object(q.useState)(""),d=Object(ft.a)(u,2),b=d[0],j=d[1],f=JSON.parse(Re("userInfo")),O=Object(q.useState)({_id:"",whoAdd:"",foodTypeName:""}),h=Object(ft.a)(O,2),p=h[0],m=h[1],x=Object(q.useState)({query:"",page:1,pagesize:10}),g=Object(ft.a)(x,2),v=g[0],y=g[1],S=function(){console.log("Clicked cancel button"),l(!1)};Object(q.useEffect)((function(){e.toggleCatePage(v);var t=e.list.records;c(t)}),[e.list.total,e.list.page,e.list.size]),Object(q.useMemo)((function(){var t=e.list.records;c(t)}),[e.list]),Object(q.useEffect)((function(){var t=e.errorMsgCate,n=e.addCateStatus,a=e.delCateStatus,r=e.editCateStatus,c=Re("addCateStatus"),s=Re("delCateStatus"),i=Re("editCateStatus");console.log(i),c==n||(console.log(e),console.log(t),we("addCateStatus",n),n<1?$.a.success("\u5206\u7c7b\u6dfb\u52a0\u6210\u529f"):t&&t.includes("\u5b58\u5728")&&$.a.warn("\u6b64\u5206\u7c7b\u5df2\u5b58\u5728")),s==a||(we("delCateStatus",a),a<1&&$.a.success("\u5206\u7c7b\u5220\u9664\u6210\u529f")),i==r||(we("editCateStatus",r),console.log(e),r<1?($.a.success("\u5206\u7c7b\u4fee\u6539\u6210\u529f"),k([]),U.current=[]):t&&t.includes("\u5b58\u5728")&&$.a.warn("\u6b64\u5206\u7c7b\u5df2\u5b58\u5728"))}),[e]);var C=Object(q.useState)([]),E=Object(ft.a)(C,2),T=E[0],k=E[1],D=Object(q.useState)(!1),w=Object(ft.a)(D,2),R=w[0],I=w[1],L=Object(q.useState)(""),N=Object(ft.a)(L,2),A=N[0],M=N[1],U=Object(q.useRef)(),G={onChange:function(e,t){k(t),U.current=e,t.length>1?I(!0):I(!1),console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},selectedRowKeys:U.current};return Object(q.useEffect)((function(){k(T),0===T.length?M("none"):M("")}),[T]),Object(q.useEffect)((function(){y(v),e.toggleCatePage(v)}),[v]),Object(q.useEffect)((function(){var t=e.list.records;c(t)}),[e.list.records]),Object(B.jsx)(De.a,{title:"\u83dc\u54c1 > \u5206\u7c7b",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(lt.a,{title:"\u83dc\u54c1\u5206\u7c7b",extra:Object(B.jsx)(J.a,{onClick:function(){l(!0),j("\u65b0\u589e\u5206\u7c7b")},style:{borderRadius:5},type:"primary",children:"\u65b0\u589e"}),style:{width:"100%"},children:[Object(B.jsx)(bn,{delSelected:function(){var t=T.map((function(e){return e._id})).join("-");e.delCate(t),M("none")},barVisible:A,editBtn:function(){var e;e=T[0],l(!0),j("\u7f16\u8f91\u5206\u7c7b"),m({_id:null===e||void 0===e?void 0:e._id,foodTypeName:null===e||void 0===e?void 0:e.foodTypeName,whoAdd:null===e||void 0===e?void 0:e.whoAdd})},editBtnState:R,Search:function(e){y({page:1,pagesize:10,query:e})},title:"\u5206\u7c7b\u540d"}),r&&Object(B.jsx)(tt.a,{rowKey:"_id",bordered:!0,columns:t,dataSource:r,pagination:!1,rowSelection:G}),r&&Object(B.jsx)(on,{page:e.list.page,total:e.list.total,fun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e.toggleCatePage(v),y({query:v.query,page:t,pagesize:n})}}),Object(B.jsx)(Xt.a,{title:b,visible:o,onCancel:S,destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{className:"login-form",onFinish:function(t){"\u65b0\u589e\u5206\u7c7b"===b?(console.log(t),e.addCate(t)):(t._id=p._id,e.editCate(t)),l(!1)},children:["\u65b0\u589e\u5206\u7c7b"===b&&Object(B.jsx)(K.a.Item,{name:"foodTypeName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}],children:Object(B.jsx)(X.a,{autoFocus:!0,prefix:Object(B.jsx)(ta.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})}),"\u7f16\u8f91\u5206\u7c7b"===b&&Object(B.jsx)(K.a.Item,{name:"foodTypeName",initialValue:p.foodTypeName,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}],children:Object(B.jsx)(X.a,{autoFocus:!0,prefix:Object(B.jsx)(ta.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})}),"\u65b0\u589e\u5206\u7c7b"===b&&Object(B.jsx)(K.a.Item,{name:"whoAdd",initialValue:f.name,children:Object(B.jsx)(X.a,{disabled:!0,prefix:Object(B.jsx)(te.a,{className:"site-form-item-icon"})})}),"\u7f16\u8f91\u5206\u7c7b"===b&&Object(B.jsx)(K.a.Item,{name:"whoAdd",initialValue:f.name,children:Object(B.jsx)(X.a,{disabled:!0,prefix:Object(B.jsx)(te.a,{className:"site-form-item-icon"})})}),Object(B.jsx)(K.a.Item,{style:{marginBottom:0},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:S,children:"\u53d6\u6d88"}),"\u65b0\u589e\u5206\u7c7b"===b&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u5206\u7c7b"===b&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u63d0\u4ea4"})]})})]})})]})})})})),Oa=Ue.a.mark(xa),ha=Ue.a.mark(ga),pa=Ue.a.mark(va),ma=Ue.a.mark(ya);function xa(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664\u83dc\u54c1saga\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(200!==(t=n.sent).status){n.next=15;break}return console.log("\u53d1\u9001\u83dc\u54c1\u5220\u9664\u6210\u529fsaga"),n.next=9,Object(Ge.a)({type:ba,data:t});case 9:return console.log("\u5220\u9664\u83dc\u54c1\u6210\u529f"),n.next=12,Object(Ge.a)({type:na,url:pe});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:ja,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),Oa,null,[[0,19]])}function ga(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589e\u5206\u7c7bsaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:sa,data:t});case 9:return console.log("\u6dfb\u52a0\u83dc\u54c1\u6210\u529f"),n.next=12,Object(Ge.a)({type:na,url:me});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:ia,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),ha,null,[[0,20]])}function va(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5206\u7c7b\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=13;break}return console.log("\u5206\u7c7b\u5217\u8868\u83b7\u53d6\u6210\u529f"),n.next=10,Object(Ge.a)({type:aa,data:t});case 10:console.log("\u53d1\u9001\u4e86\u5206\u7c7b\u5217\u8868\u83b7\u53d6\u6210\u529f"),n.next=13;break;case 13:n.next=17;break;case 15:n.prev=15,n.t0=n.catch(0);case 17:case"end":return n.stop()}}),pa,null,[[0,15]])}function ya(e){var t,n;return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("\u4fee\u6539\u83dc\u54c1\u4fe1\u606fsaga\u6267\u884c"),a.next=4,We({url:e.url},e.data);case 4:if(200!==(null===(n=a.sent)||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.status)){a.next=14;break}return console.log("\u4fee\u6539\u83dc\u54c1\u6210\u529f"),a.next=9,Object(Ge.a)({type:la,data:n});case 9:return a.next=11,Object(Ge.a)({type:na,url:pe});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),a.next=16;break;case 14:return a.next=16,Object(Ge.a)({type:ua,data:n});case 16:a.next=20;break;case 18:a.prev=18,a.t0=a.catch(0);case 20:case"end":return a.stop()}}),ma,null,[[0,18]])}var Sa={categoryList:[],addCateStatus:99999,errorMsgCate:"",delCateStatus:99999,editCateStatus:99999},Ca="getcuscatelist",Ea="getcuscatelist",Ta="getcuscatelistsuc",ka="cuscateedit",Da="cuscateeditsuc",wa="cuscateediterr",Ra="cuscatedel",Ia="cuscatedelsuc",La="cuscatedelerr",Na="cuscateadd",Aa="cuscateaddsuc",Ma="cuscateadderr",Ua={list:[],CcateList:[],addCcateStatus:99999,errorMsgCcate:"",delCcateStatus:99999,editCcateStatus:99999},Ga=Ue.a.mark(Ba),_a=Ue.a.mark(Pa),Fa=Ue.a.mark(qa),za=Ue.a.mark(Wa);function Ba(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664saga\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),200!==t.status){n.next=15;break}return console.log("\u53d1\u9001\u5220\u9664\u6210\u529fsaga"),n.next=10,Object(Ge.a)({type:Ia,data:t});case 10:return console.log("\u5220\u9664\u6210\u529f"),n.next=13,Object(Ge.a)({type:Ea,url:xe});case 13:n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:La,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),Ga,null,[[0,19]])}function Pa(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589esaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:Aa,data:t});case 9:return console.log("\u6dfb\u52a0\u6210\u529f"),n.next=12,Object(Ge.a)({type:Ea,url:xe});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:Ma,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),_a,null,[[0,20]])}function qa(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5207\u6362\uff0c\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=10;break}return n.next=8,Object(Ge.a)({type:Ta,data:t});case 8:n.next=10;break;case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(0);case 14:case"end":return n.stop()}}),Fa,null,[[0,12]])}function Wa(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=12;break}return console.log("\u4fee\u6539\u6210\u529f"),n.next=9,Object(Ge.a)({type:Da,data:t});case 9:return n.next=11,Object(Ge.a)({type:Ea,url:xe});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42");case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),za,null,[[0,14]])}n(266);var Ha=n(120),Va=n.n(Ha),Ja=n(2964),Ya=n(2965);function Ka(){var e=Object(ae.a)(["\n  /deep/ .ant-card-body {\n    height: 100%;\n  };\n  \n  cursor: pointer;\n\n  .plus {\n    font-size: 25px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .card {\n    width: 100%;\n    height: 120px;\n  }\n"]);return Ka=function(){return e},e}var Qa=re.a.div(Ka()),Xa=Object(ee.b)((function(e){return{list:e.cuscate.list||[],addCcateStatus:e.cuscate.addCcateStatus,delCcateStatus:e.cuscate.delCcateStatus,errorMsgCcate:e.cuscate.errorMsgCcate,editCcateStatus:e.cuscate.editCcateStatus}}),(function(e){return{delCusCate:function(t){e({type:Ra,url:"/admin/customer/cate/del",data:t})},addCusCate:function(t){e({type:Na,url:"/admin/customer/cate/add",data:t})},toggleCusCatePage:function(t){e({type:Ea,url:xe,data:t})},editCusCate:function(t){e({type:ka,url:"/admin/customer/cate/edit",data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)(!1),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(q.useState)(""),u=Object(ft.a)(l,2),d=u[0],b=u[1],j=Object(q.useState)({_id:"",name:"",discount:0}),f=Object(ft.a)(j,2),O=f[0],h=f[1],p=Object(q.useState)({query:"",page:1,pagesize:10}),m=Object(ft.a)(p,2),x=m[0];m[1];Object(q.useEffect)((function(){e.toggleCusCatePage(x),console.log(e);var t=e.list.records;r(t)}),[e.list.total,e.list.page,e.list.size]);var g=function(){console.log("Clicked cancel button"),o(!1)};return Object(q.useMemo)((function(){var t=e.list.records;r(t)}),[e.list]),Object(q.useEffect)((function(){var t=e.errorMsgCcate,n=e.addCcateStatus,a=e.delCcateStatus,r=e.editCcateStatus,c=Re("addCcateStatus"),s=Re("delCcateStatus"),i=Re("editCcateStatus");c==n||(we("addCcateStatus",n),n<1?$.a.success("\u6dfb\u52a0\u5206\u7c7b\u6210\u529f\uff01"):t&&t.includes("\u5b58\u5728")&&$.a.warning("\u6b64\u5206\u7c7b\u5df2\u5b58\u5728")),s==a||(we("delCcateStatus",a),a<1&&$.a.success("\u5220\u9664\u5206\u7c7b\u6210\u529f\uff01")),i==r||(we("editCcateStatus",r),r<1&&$.a.success("\u5206\u7c7b\u4fee\u6539\u6210\u529f\uff01"))}),[e.addCcateStatus,e.delCcateStatus,e.editCcateStatus]),Object(B.jsx)(De.a,{title:"\u4f1a\u5458 > \u7c7b\u522b",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(lt.a,{title:"\u4f1a\u5458\u7c7b\u522b",children:[Object(B.jsx)(Va.a,{grid:{gutter:16,column:4},dataSource:a,renderItem:function(t){return Object(B.jsx)(Va.a.Item,{children:Object(B.jsx)(Qa,{children:Object(B.jsxs)(lt.a,{className:"card",style:{position:"relative"},children:[Object(B.jsxs)("div",{style:{position:"absolute",right:8,top:8},children:[Object(B.jsx)(ta.a,{style:{paddingRight:4},onClick:function(){var e;e=t,o(!0),b("\u7f16\u8f91\u4f1a\u5458\u7c7b\u522b"),h({name:e.name,discount:e.discount,_id:e._id})}},"edit"),Object(B.jsx)(un.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u4f1a\u5458\u5206\u7c7b\u5417\uff1f",placement:"right",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:function(){!function(t){var n=t._id;e.delCusCate(n)}(t)},children:Object(B.jsx)(Ja.a,{},"del")})]}),Object(B.jsx)("div",{style:{marginTop:-14,fontWeight:600},children:null===t||void 0===t?void 0:t.name}),Object(B.jsx)("div",{style:{textAlign:"center",paddingTop:"8%"},children:Object(B.jsxs)("div",{style:{color:"red"},children:[null===t||void 0===t?void 0:t.discount,"\u6298"]})})]},t.name)})})}}),Object(B.jsx)(Qa,{children:Object(B.jsx)(lt.a,{onClick:function(){o(!0),b("\u65b0\u589e\u4f1a\u5458\u7c7b\u522b")},style:{width:"24%",height:120,display:"inline-block"},children:Object(B.jsx)("div",{className:"plus",children:Object(B.jsx)(Zn.a,{})})})}),Object(B.jsx)(Xt.a,{title:d,visible:i,onCancel:g,destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{onFinish:function(t){"\u65b0\u589e\u4f1a\u5458\u7c7b\u522b"===d?(console.log(t),e.addCusCate(t)):(console.log(t),t._id=O._id,e.editCusCate(t)),o(!1)},children:["\u65b0\u589e\u4f1a\u5458\u7c7b\u522b"===d&&Object(B.jsx)(K.a.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}],children:Object(B.jsx)(X.a,{autoFocus:!0,prefix:Object(B.jsx)(ta.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u5165\u7c7b\u522b\u540d\u79f0"})}),"\u7f16\u8f91\u4f1a\u5458\u7c7b\u522b"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.name,name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}],children:Object(B.jsx)(X.a,{autoFocus:!0,prefix:Object(B.jsx)(ta.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u5165\u7c7b\u522b\u540d\u79f0"})}),"\u65b0\u589e\u4f1a\u5458\u7c7b\u522b"===d&&Object(B.jsx)(K.a.Item,{name:"discount",children:Object(B.jsx)(X.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u6298\u6263",type:"number",min:1,max:100,prefix:Object(B.jsx)(Ya.a,{className:"site-form-item-icon"})})}),"\u7f16\u8f91\u4f1a\u5458\u7c7b\u522b"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.discount,name:"discount",children:Object(B.jsx)(X.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u6298\u6263",type:"number",min:1,max:100,prefix:Object(B.jsx)(Ya.a,{className:"site-form-item-icon"})})}),Object(B.jsx)("span",{children:"\u8bf4\u660e\uff1a8.5\u6298\uff0c\u8bf7\u8f93\u516585"}),Object(B.jsx)(K.a.Item,{children:Object(B.jsxs)($t.a,{style:{float:"right",margin:"20px 0 -20px 0"},children:[Object(B.jsx)(J.a,{type:"default",onClick:g,children:"\u53d6\u6d88"}),"\u65b0\u589e\u4f1a\u5458\u7c7b\u522b"===d&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u4f1a\u5458\u7c7b\u522b"===d&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u63d0\u4ea4"})]})})]})})]})})})})),Za="getcuslist",$a="getcuslist",er="getcuslistsuc",tr="getcuscatesuc",nr="cusedit",ar="cuseditsuc",rr="cusediterr",cr="cusdel",sr="cusdelsuc",ir="cusdelerr",or="cusadd",lr="cusaddsuc",ur="cusadderr",dr={list:[],cateList:[],addCStatus:99999,errorMsgC:"",delCStatus:99999,editCStatus:99999},br=Ue.a.mark(hr),jr=Ue.a.mark(pr),fr=Ue.a.mark(mr),Or=Ue.a.mark(xr);function hr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664saga\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),200!==t.status){n.next=15;break}return console.log("\u53d1\u9001\u5220\u9664\u6210\u529fsaga"),n.next=10,Object(Ge.a)({type:sr,data:t});case 10:return console.log("\u5220\u9664\u6210\u529f"),n.next=13,Object(Ge.a)({type:$a,url:ge});case 13:n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:ir,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),br,null,[[0,19]])}function pr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589esaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:lr,data:t});case 9:return console.log("\u6dfb\u52a0\u6210\u529f"),n.next=12,Object(Ge.a)({type:$a,url:ge});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:ur,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),jr,null,[[0,20]])}function mr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5207\u6362\uff0c\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=11;break}return n.next=9,Object(Ge.a)({type:er,data:t});case 9:n.next=11;break;case 11:n.next=15;break;case 13:n.prev=13,n.t0=n.catch(0);case 15:case"end":return n.stop()}}),fr,null,[[0,13]])}function xr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=12;break}return console.log("\u4fee\u6539\u6210\u529f"),n.next=9,Object(Ge.a)({type:ar,data:t});case 9:return n.next=11,Object(Ge.a)({type:$a,url:ge});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42");case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),Or,null,[[0,14]])}var gr=Xn.a.Option,vr=Object(ee.b)((function(e){return{list:e.cus.list||[],cateList:e.cus.cateList,addCStatus:e.cus.addCStatus,delCStatus:e.cus.delCStatus,errorMsgC:e.cus.errorMsgC,editCStatus:e.cus.editCStatus}}),(function(e){return{delCus:function(t){e({type:cr,url:"/admin/customer/del",data:t})},addCus:function(t){e({type:or,url:"/admin/customer/add",data:t})},toggleCusPage:function(t){e({type:$a,url:ge,data:t})},editCus:function(t){e({type:nr,url:"/admin/customer/edit",data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)(!1),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(q.useState)(""),u=Object(ft.a)(l,2),d=u[0],b=u[1],j=Object(q.useState)({_id:"",name:"",level:"",status:0,telephone:0}),f=Object(ft.a)(j,2),O=f[0],h=f[1],p=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u4f1a\u5458\u7c7b\u522b",key:"level",dataIndex:"level",render:function(e){return Object(B.jsx)(B.Fragment,{children:null===e||void 0===e?void 0:e.name})}},{title:"\u6298\u6263",key:"level",dataIndex:"level",render:function(e){return Object(B.jsx)(B.Fragment,{children:null===e||void 0===e?void 0:e.discount})}},{title:"\u6d88\u8d39\u6b21\u6570",key:"xftimes",dataIndex:"xftimes"},{title:"\u6d88\u8d39\u91d1\u989d",key:"xftotal",dataIndex:"xftotal"},{title:"\u624b\u673a\u53f7\u7801",key:"telephone",dataIndex:"telephone"},{title:"\u72b6\u6001",key:"status",dataIndex:"status",render:function(e){return Object(B.jsxs)(B.Fragment,{children:[1===e&&"\u6b63\u5e38",0===e&&"\u6302\u5931",-1===e&&"\u505c\u7528"]})}}],m=function(){console.log("Clicked cancel button"),o(!1)},x=Object(q.useState)({query:"",page:1,pagesize:10}),g=Object(ft.a)(x,2),v=g[0],y=g[1];Object(q.useEffect)((function(){e.toggleCusPage(v);var t=e.list.records;r(t)}),[e.list.total,e.list.page,e.list.size]),Object(q.useMemo)((function(){var t=e.list.records;r(t)}),[e.list]),Object(q.useEffect)((function(){var t=e.errorMsgC,n=e.addCStatus,a=e.delCStatus,r=e.editCStatus,c=Re("addCStatus"),s=Re("delCStatus"),i=Re("editCStatus");c==n||(we("addCStatus",n),n<1?$.a.success("\u4f1a\u5458\u6dfb\u52a0\u6210\u529f\uff01"):t&&t.includes("\u5b58\u5728")&&$.a.warning("\u6b64\u4f1a\u5458\u8d26\u53f7\u5df2\u5b58\u5728")),s==a||(we("delCStatus",a),a<1&&$.a.success("\u4f1a\u5458\u5220\u9664\u6210\u529f\uff01")),i==r||(we("editCStatus",r),r<1&&$.a.success("\u8d44\u6599\u4fee\u6539\u6210\u529f\uff01"))}),[e.addCStatus,e.delCStatus,e.editCStatus]);var S=Object(q.useState)([]),C=Object(ft.a)(S,2),E=C[0],T=C[1],k=Object(q.useState)(""),D=Object(ft.a)(k,2),w=D[0],R=D[1],I={onChange:function(e,t){T(t),console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},onSelectAll:function(e,t,n){console.log(e,t,n)}};return Object(q.useEffect)((function(){T(E),0===E.length?R("none"):R("")}),[E]),Object(q.useEffect)((function(){y(v),e.toggleCusPage(v)}),[v]),Object(q.useEffect)((function(){var t=e.list.records;r(t)}),[e.list.records]),Object(B.jsx)(De.a,{title:"\u4f1a\u5458 > \u8d44\u6599",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(lt.a,{title:"\u4f1a\u5458\u6863\u6848",extra:Object(B.jsx)(J.a,{type:"primary",onClick:function(){o(!0),b("\u65b0\u589e\u4f1a\u5458")},style:{borderRadius:5},children:"\u65b0\u589e"}),style:{width:"100%"},children:[Object(B.jsx)(bn,{delSelected:function(){var t=E.map((function(e){return e._id})).join("-");e.delCus(t),R("none")},barVisible:w,editBtn:function(){var e;e=E[0],console.log(e),o(!0),b("\u7f16\u8f91\u4f1a\u5458"),h({_id:e._id,name:e.name,level:e.level._id,telephone:e.telephone,status:e.status})},Search:function(e){y({page:1,pagesize:10,query:e})},title:"\u624b\u673a\u53f7\u7801"}),a&&Object(B.jsx)(tt.a,{rowKey:"_id",bordered:!0,columns:p,dataSource:a,pagination:!1,rowSelection:I}),a&&Object(B.jsx)(on,{page:e.list.page,total:e.list.total,fun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e.toggleCusPage(v),y({query:v.query,page:t,pagesize:n})}}),Object(B.jsx)(Xt.a,{title:d,visible:i,onCancel:m,destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{onFinish:function(t){"\u65b0\u589e\u4f1a\u5458"===d?(e.addCus(t),o(!1)):(t._id=O._id,console.log(t),e.editCus(t),o(!1))},children:["\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{label:"\u59d3\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:Object(B.jsx)(X.a,{autoFocus:!0,placeholder:"\u59d3\u540d"})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.name,label:"\u59d3\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:Object(B.jsx)(X.a,{autoFocus:!0,placeholder:"\u59d3\u540d"})}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{label:"\u624b\u673a",name:"telephone",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}],children:Object(B.jsx)(X.a,{type:"number",placeholder:"\u624b\u673a\u53f7\u7801"})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.telephone,label:"\u624b\u673a",name:"telephone",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}],children:Object(B.jsx)(X.a,{type:"number",placeholder:"\u624b\u673a\u53f7\u7801"})}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{name:"level",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(B.jsx)(Xn.a,{placeholder:"\u4f1a\u5458\u7c7b\u522b",children:e.cateList&&e.cateList.map((function(e){return Object(B.jsx)(gr,{value:e._id,children:e.name},e._id)}))})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.level,name:"level",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(B.jsx)(Xn.a,{placeholder:"\u4f1a\u5458\u7c7b\u522b",children:e.cateList&&e.cateList.map((function(e){return Object(B.jsx)(gr,{value:e._id,children:e.name},e._id)}))})}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:1,label:"\u72b6\u6001",style:{marginLeft:10},name:"status",children:Object(B.jsxs)(Xn.a,{placeholder:"\u72b6\u6001",children:[Object(B.jsx)(gr,{value:1,children:"\u6b63\u5e38"}),Object(B.jsx)(gr,{value:0,children:"\u6302\u5931"}),Object(B.jsx)(gr,{value:-1,children:"\u505c\u7528"})]})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.status,label:"\u72b6\u6001",style:{marginLeft:10},name:"status",children:Object(B.jsxs)(Xn.a,{placeholder:"\u72b6\u6001",children:[Object(B.jsx)(gr,{value:1,children:"\u6b63\u5e38"}),Object(B.jsx)(gr,{value:0,children:"\u6302\u5931"}),Object(B.jsx)(gr,{value:-1,children:"\u505c\u7528"})]})}),Object(B.jsx)(K.a.Item,{style:{marginBottom:4},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:m,children:"\u53d6\u6d88"}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})]})})]})})]})})})})),yr=(n(357),n(93)),Sr=n.n(yr),Cr="getORDERlist",Er="getORDERlist",Tr="getORDERlistsuc",kr="ORDERedit",Dr="ORDEReditsuc",wr="ORDERediterr",Rr="ORDERdel",Ir="ORDERdelsuc",Lr="ORDERdelerr",Nr="ORDERadd",Ar="ORDERaddsuc",Mr="ORDERadderr",Ur=Object(ee.b)((function(e){return{list:e.orders.list||[],addOStatus:e.orders.addOStatus,delOStatus:e.orders.delOStatus,errorMsgO:e.orders.errorMsgO,editOStatus:e.orders.editOStatus}}),(function(e){return{delOrder:function(t){e({type:Rr,url:"/admin/order/del",data:t})},toggleOrderPage:function(t){e({type:Er,url:ye,data:t})},editOrder:function(t){e({type:kr,url:"/admin/order/edit",data:t})}}}))((function(e){var t,n,a=Object(q.useState)(""),r=Object(ft.a)(a,2),c=r[0],s=r[1],i=Object(q.useState)([]),o=Object(ft.a)(i,2),l=o[0],u=o[1],d=Object(q.useState)([]),b=Object(ft.a)(d,2),j=b[0],f=b[1],O=Object(q.useState)(!1),h=Object(ft.a)(O,2),p=h[0],m=h[1],x=Object(q.useState)({_id:void 0,orderid:void 0,paid:void 0,cus:{name:void 0},begintime:void 0,finishtime:void 0,orderdetail:[{name:void 0,num:void 0}],tableid:void 0}),g=Object(ft.a)(x,2),v=g[0],y=g[1],S=[{title:"\u8ba2\u5355\u53f7",key:"orderid",render:function(e){return Object(B.jsx)("a",{onClick:function(){w(e)},children:e.orderid})}},{title:"\u4f1a\u5458\u7b49\u7ea7",key:"level",render:function(e,t,n){var a;return Object(B.jsx)(B.Fragment,{children:void 0===(null===t||void 0===t||null===(a=t.level)||void 0===a?void 0:a.name)?"\u65e0\u4f1a\u5458":t.level.name})}},{title:"\u5e94\u6536(\u5143)",key:"orderdetail",render:function(e,t,n){return Object(B.jsx)(B.Fragment,{children:null===t||void 0===t?void 0:t.receivable})}},{title:"\u5b9e\u6536(\u5143)",key:"orderdetail",render:function(e,t,n){return Object(B.jsx)(B.Fragment,{children:null===t||void 0===t?void 0:t.paid})}},{title:"\u7ed3\u8d26\u65f6\u95f4",dataIndex:"finishtime",key:"finishtime",render:function(e,t,n){return Object(B.jsx)(B.Fragment,{children:an()(e).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u670d\u52a1\u5458",key:"waiter",render:function(e,t,n){var a;return Object(B.jsx)(B.Fragment,{children:null===t||void 0===t||null===(a=t.waiter)||void 0===a?void 0:a.name})}}],C=Object(q.useState)({query:"",page:1,pagesize:10}),E=Object(ft.a)(C,2),T=E[0],k=E[1];Object(q.useEffect)((function(){e.toggleOrderPage(T);var t=e.list.records;u(t)}),[e.list.total,e.list.page,e.list.size]),Object(q.useEffect)((function(){k(T),e.toggleOrderPage(T)}),[T]),Object(q.useEffect)((function(){var t=e.list.records;u(t)}),[e.list.records]);var D={onChange:function(e,t){f(t),console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},onSelectAll:function(e,t,n){console.log(e,t,n)}};Object(q.useEffect)((function(){f(j),0===j.length?s("none"):s("")}),[j]);var w=function(e){y(e),m(!0)};Object(q.useMemo)((function(){console.log(v)}),[v]),Object(q.useEffect)((function(){var t=e.errorMsgO,n=e.addOStatus,a=e.delOStatus,r=e.editOStatus,c=Re("addOStatus"),s=Re("delOStatus"),i=Re("editOStatus");c==n||(console.log(e),console.log(t),we("addOStatus",n),n<1?$.a.success("\u8ba2\u5355\u6dfb\u52a0\u6210\u529f"):t&&t.includes("\u5b58\u5728")&&$.a.error("\u6b64\u8ba2\u5355\u5df2\u5b58\u5728\uff01")),s==a||(we("delOStatus",a),a<1&&$.a.success("\u8ba2\u5355\u5220\u9664\u6210\u529f")),i==r||(we("editOStatus",r),r<1&&$.a.success("\u8ba2\u5355\u4fee\u6539\u6210\u529f"))}),[e]);var R={onChange:function(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)}};return Object(B.jsx)(De.a,{title:"\u8ba2\u5355\u7ba1\u7406",children:Object(B.jsxs)($e.a,{locale:Ot.a,children:[Object(B.jsxs)(lt.a,{title:"\u8ba2\u5355\u5217\u8868",style:{position:"relative",width:"100%"},children:[Object(B.jsx)(bn,{delSelected:function(){var t=j.map((function(e){return e._id})).join("-");e.delOrder(t),s("none")},barVisible:c,Search:function(e){k({page:1,pagesize:10,query:e})},title:"\u8ba2\u5355\u53f7"}),l&&Object(B.jsx)(tt.a,{rowKey:"_id",bordered:!0,columns:S,dataSource:l,pagination:!1,rowSelection:D}),l&&Object(B.jsx)(on,{page:e.list.page,total:e.list.total,fun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e.toggleOrderPage(T),k({query:T.query,page:t,pagesize:n})}})]}),Object(B.jsxs)(Vn.a,{title:"\u8ba2\u5355\u8be6\u60c5",width:777,placement:"right",closable:!1,onClose:function(){m(!1)},visible:p,children:[Object(B.jsxs)(Sr.a,{title:"\u8ba2\u5355\u53f7\uff1a".concat(v.orderid),children:[Object(B.jsxs)(Sr.a.Item,{label:"\u684c\u4f4d\u53f7",children:[v.tableid," \u53f7"]}),(null===v||void 0===v||null===(t=v.cus)||void 0===t?void 0:t.name)&&Object(B.jsx)(Sr.a.Item,{label:"\u4f1a\u5458\u59d3\u540d",children:null===v||void 0===v||null===(n=v.cus)||void 0===n?void 0:n.name}),Object(B.jsxs)(Sr.a.Item,{label:"\u6d88\u8d39\u91d1\u989d",children:[v.paid," \u5143"]}),Object(B.jsxs)(Sr.a.Item,{label:"\u6d88\u8d39\u65f6\u957f",children:[an()("".concat(v.finishtime)).diff(an()("".concat(v.begintime)),"hours"),"\u65f6",an()("".concat(v.finishtime)).diff(an()("".concat(v.begintime)),"minutes"),"\u5206"]}),Object(B.jsx)(Sr.a.Item,{label:"\u7ed3\u8d26\u65f6\u95f4",children:an()(v.finishtime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(B.jsx)("h4",{style:{marginTop:20},children:"\u83dc\u5355\u8be6\u60c5\uff1a"}),Object(B.jsx)(tt.a,{columns:[{title:"\u83dc\u540d",key:"name",dataIndex:"name"},{title:"\u5355\u4ef7(\u5143)",key:"perprice",dataIndex:"perprice"},{title:"\u6570\u91cf",key:"num",dataIndex:"num"}],rowKey:"_id",bordered:!0,rowSelection:R,dataSource:v.orderdetail,pagination:{hideOnSinglePage:!0}})]})]})})})),Gr={list:[],addOStatus:99999,errorMsgO:"",delOStatus:99999,editOStatus:99999},_r=Ue.a.mark(Pr),Fr=Ue.a.mark(qr),zr=Ue.a.mark(Wr),Br=Ue.a.mark(Hr);function Pr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664saga\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),200!==t.status){n.next=15;break}return console.log("\u53d1\u9001\u5220\u9664\u6210\u529fsaga"),n.next=10,Object(Ge.a)({type:Ir,data:t});case 10:return console.log("\u5220\u9664\u6210\u529f"),n.next=13,Object(Ge.a)({type:Er,url:ye});case 13:n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:Lr,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),_r,null,[[0,19]])}function qr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589esaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:Ar,data:t});case 9:return console.log("\u6dfb\u52a0\u6210\u529f"),n.next=12,Object(Ge.a)({type:Er,url:ye});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:Mr,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),Fr,null,[[0,20]])}function Wr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5207\u6362\uff0c\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=11;break}return n.next=8,Object(Ge.a)({type:Tr,data:t});case 8:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=11;break;case 11:n.next=15;break;case 13:n.prev=13,n.t0=n.catch(0);case 15:case"end":return n.stop()}}),zr,null,[[0,13]])}function Hr(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=12;break}return console.log("\u4fee\u6539\u6210\u529f"),n.next=9,Object(Ge.a)({type:Dr,data:t});case 9:return n.next=11,Object(Ge.a)({type:Er,url:ye});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42");case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),Br,null,[[0,14]])}n(713);var Vr=n(414),Jr=n.n(Vr),Yr=(n(473),n(288)),Kr=n.n(Yr),Qr=(n(2828),n(799)),Xr=n.n(Qr),Zr=(n(2876),n(801)),$r=n.n(Zr),ec=(n(727),n(492)),tc=n.n(ec),nc=(n(726),n(292)),ac=n.n(nc),rc=(n(271),n(163)),cc=n.n(rc),sc=(n(308),n(136)),ic=n.n(sc),oc=(n(213),n(119)),lc=n.n(oc),uc=(n(729),n(293)),dc=n.n(uc);function bc(){var e=Object(ae.a)(["\n  .flex-container {\n    position: relative;\n\n    .inline {\n      width: 80px !important;\n      margin: 9px 9px 9px 0;\n    }\n\n    .small {\n      height: 20px !important;\n      line-height: 20px !important;\n    }\n\n    .sub-title {\n      color: #888;\n      font-size: 14px;\n      padding: 30px 0 18px 0;\n    }\n\n    .placeholder {\n      background-color: #ebebef;\n      color: #bbb;\n      text-align: center;\n      height: 30px;\n      line-height: 30px;\n      width: 100%;\n    }\n  }\n\n  .top {\n    .top-title {\n      font-size: 1rem;\n      font-weight: 600;\n    }\n  }\n\n  .top-block {\n    height: 10vh;\n    padding: .5rem 1.2rem;\n    background-color: #fff;\n    border-bottom-right-radius: .7rem;\n    border-bottom-left-radius: .7em;\n\n    span {\n      display: block;\n\n      &:first-child {\n        color: #aaa;\n      }\n\n      &:nth-child(2) {\n        font-weight: 600;\n        font-size: 1.1rem;\n      }\n    }\n  }\n\n  .search-item {\n    position: absolute;\n    right: 1rem;\n    top: 50%;\n    width: 8rem;\n    transform: translateY(-50%);\n\n    .search-input {\n      border-radius: 1rem;\n    }\n  }\n\n\n  .hot-dish {\n    // height: 53vh; \n\n    height: 62vh;\n\n    img {\n      height: 70%;\n      width: 80%;\n      position: relative;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n\n    .dish-title {\n      display: block;\n      margin-top: -6vh;\n      text-align: center\n    }\n\n    .price-plus {\n      position: relative;\n\n      .price {\n        background-color: #DCB184;\n        color: #fff;\n        display: block;\n        width: 9rem;\n        margin: -1rem auto;\n        height: 2.5rem;\n        border-radius: 3rem;\n        font-size: 1rem;\n        text-align: center;\n        line-height: 2.5rem;\n        position: relative;\n\n        .pricedetail {\n          position: absolute;\n          top: 0;\n          left: 27%;\n        }\n      }\n\n      .plus {\n        position: absolute;\n        font-size: 1.1rem;\n        right: 35%;\n        color: #fff;\n        top: 48%;\n        transform: translate(-30%, -50%);\n      }\n    }\n\n    //background-color: pink;\n  }\n\n  .more {\n    margin-top: 7vh;\n    height: 66vh;\n    width: 100%;\n    text-align: center;\n    background-color: #fff;\n    border-top-right-radius: .7rem;\n    border-top-left-radius: .7em;\n\n    span {\n      display: block;\n    }\n  }\n\n  .shop-car {\n    position: fixed;\n    right: 1.4rem;\n    bottom: 7rem;\n    z-index: 99999;\n  }\n\n\n  .my-list {\n    width: 5rem;\n    height: 100vh;\n    background-color: #fff;\n    left: 0;\n    text-align: center;\n  }\n\n  .am-search-cancel, .am-search-cancel-show, .am-search-cancel-anim {\n    display: none;\n  }\n\n  .am-tabs-default-bar, .am-tabs-default-bar-animated, .am-tabs-default-bar-top {\n    background-color: #F5F5F9 !important;\n  }\n\n  .ant-avatar, .ant-avatar-icon {\n    font-size: 1.5rem;\n    background: #fff !important;\n    color: #212121;\n  }\n\n  .am-list-body::before {\n    background-color: #f5f5f9 !important;\n  }\n\n  .am-list-body::after {\n    background-color: #fff !important;\n  }\n\n  .am-tabs-default-bar-tab::after {\n    background-color: #f5f5f9 !important;\n  }\n\n  .am-tabs-default-bar-tab::before {\n    background-color: #f5f5f9 !important;\n  }\n\n  .am-list-line::after {\n    background-color: #fff !important;\n  }\n\n  .am-list-line::before {\n    background-color: #fff !important;\n  }\n\n  .ant-tabs > .ant-tabs-nav, .ant-tabs > div > .ant-tabs-nav {\n    background-color: #fff;\n    height: 100vh;\n  }\n\n  .ant-tabs-tab-active {\n    background-color: #f3f4f3;\n    color: #212121;\n  }\n"]);return bc=function(){return e},e}var jc=re.a.div(bc()),fc=n(2967),Oc=n(2968),hc=(n(588),n(412)),pc=n.n(hc),mc="gethdish",xc="gethdishsuc",gc="gethdisherr",vc="gethcate",yc="gethcatesuc",Sc="gethcateerr",Cc="add2car",Ec="less2car",Tc="resetcar",kc=(n(730),n(294)),Dc=n.n(kc),wc=n.p+"static/media/dish1.8a58d9be.jpeg",Rc=(n(731),n(2966)),Ic=Object(ee.b)((function(e){return{shopcar:e.home.shopcar||[]}}),(function(e){return{add2car:function(t){e({type:Cc,data:t})},less2car:function(t){e({type:Ec,data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)([]),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(q.useState)([0]),u=Object(ft.a)(l,2),d=u[0],b=u[1];Object(q.useEffect)((function(){e.dish&&o(JSON.parse(JSON.stringify(e.dish))),r(JSON.parse(JSON.stringify(e.shopcar)))}),[e]);Object(q.useEffect)((function(){console.log("dishes",i),console.log(a);var e=i.map((function(e,t){var n,r;return e.num=null!==(n=null===(r=a.filter((function(t){return t._id===e._id}))[0])||void 0===r?void 0:r.num)&&void 0!==n?n:0}));b(e)}),[i]);return Object(B.jsx)("div",{style:{width:"66vw",marginTop:".7rem"},children:i&&i.map((function(t,n){return Object(B.jsx)("div",{children:a&&Object(B.jsx)(Dc.a,{style:{marginBottom:10},children:Object(B.jsxs)(Dc.a.Body,{children:[""===t.picture?Object(B.jsx)("img",{src:wc,alt:"",className:"img",style:{objectFit:"cover",top:0,left:0}}):Object(B.jsx)("img",{src:"".concat(Ee).concat(t.picture),className:"img",style:{objectFit:"cover",top:0,left:0},alt:""}),Object(B.jsx)("div",{style:{display:"flex",position:"relative"},children:Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(B.jsx)("span",{className:"dish-titles",children:t.name}),Object(B.jsxs)("span",{className:"dish-prices",children:["\xa5 ",t.price]})]})}),Object(B.jsxs)("div",{className:"numutil",children:[Object(B.jsx)(J.a,{shape:"circle",size:"small",onClick:function(){!function(t){e.less2car(t)}(t)},icon:Object(B.jsx)(Rc.a,{})}),Object(B.jsx)("span",{style:{margin:"0 .5rem"},children:d[n]}),Object(B.jsx)(J.a,{shape:"circle",size:"small",onClick:function(){!function(t){t.url=t.picture,e.add2car(t)}(t)},style:{backgroundColor:"rgb(35, 45, 57)",color:"white"},icon:Object(B.jsx)(Zn.a,{})})]})]})},n)},n)}))})})),Lc=pc.a.TabPane,Nc=Object(ee.b)((function(e){return{cate:e.home.cate||[],catedish:e.home.catedish||[]}}),(function(e){return{add2car:function(t){e({type:Cc,data:t})},less2car:function(t){e({type:Ec,data:t})}}}))((function(e){var t=e.cate,n=e.catedish;return Object(B.jsx)("div",{children:Object(B.jsx)(pc.a,{tabPosition:"left",onTabClick:function(e){console.log(e)},children:t&&t.map((function(e,t){return Object(B.jsx)(Lc,{tab:e.foodTypeName,children:Object(B.jsx)(Ic,{dish:n[t]})},e._id)}))})})})),Ac=dc.a.Item,Mc=Object(ee.b)((function(e){return{hotlist:e.home.hotlist||[],homeDishState:e.home.homeDishState,randomlist:e.home.randomlist||[],shopcar:e.home.shopcar||[]}}),(function(e){return{GetHomeDish:function(t){e({type:mc,url:"/home",data:t})},add2car:function(t){e({type:Cc,data:t})},resetcar:function(t){e({type:Tc,data:t})}}}))((function(e){var t=Object(q.useState)(0),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(Le.g)(),s=Object(q.useState)(0),i=Object(ft.a)(s,2),o=i[0],l=i[1];e.shopcar;Object(q.useEffect)((function(){e.GetHomeDish();var t=JSON.parse(Re("shopcar"));if(t){var n=t.reduce((function(e,t){return e+t.num}),0);l(n),e.resetcar(t)}else l(0)}),[]),Object(q.useEffect)((function(){var e=JSON.parse(Re("shopcar"));if(e){var t=e.reduce((function(e,t){return e+t.num}),0);l(t)}else l(0)}),[e.shopcar]);var u=e.hotlist,d=e.randomlist;return Object(B.jsxs)(jc,{children:[Object(B.jsx)("div",{className:"top",children:Object(B.jsx)(cc.a,{mode:"light",icon:Object(B.jsx)(lc.a,{type:"left"}),onLeftClick:function(){return c.goBack()},rightContent:[Object(B.jsx)(dc.a,{mask:!0,visible:!1,overlay:[Object(B.jsx)(Ac,{style:{marginRight:5},"data-seed":"logId",children:"\u8d2d\u7269\u8f66"},"0"),Object(B.jsx)(Ac,{style:{whiteSpace:"nowrap"},children:"\u6211\u7684\u8ba2\u5355"},"1"),Object(B.jsx)(Ac,{children:Object(B.jsx)("span",{style:{marginRight:5},children:"\u66f4\u591a"})},"2")],onSelect:function(e,t){0===t?0===o?ic.a.info("\u8d2d\u7269\u8f66\u7a7a\u7a7a\u5982\u4e5f...",1):c.push("/home/shopcar"):1===t&&(Re("orderid")?c.push("/home/orderdetail/home"):ic.a.info("\u60a8\u8fd8\u6ca1\u6709\u8ba2\u5355\u5462...",1))},children:Object(B.jsx)("div",{style:{height:"100%",padding:"0 15px",marginRight:"-7px",display:"flex",alignItems:"center"},children:Object(B.jsx)(lc.a,{type:"ellipsis"})})})],children:Object(B.jsx)("span",{className:"top-title",children:"\u8fd9\u662f\u4e00\u4e2a\u540d\u5b57"})})}),Object(B.jsx)(ac.a,{children:Object(B.jsxs)(ac.a.Item,{style:{position:"relative"},children:[Object(B.jsxs)("div",{className:"top-block",children:[Object(B.jsx)("span",{children:"\u6b22\u8fce\u6765\u5230"}),Object(B.jsx)("span",{children:"\u8fd9\u662f\u4e00\u4e2a\u540d\u5b57"})]}),Object(B.jsx)("div",{className:"search-item",onClick:function(){c.push("/home/search")},children:Object(B.jsx)(X.a,{className:"search-input",prefix:Object(B.jsx)(lc.a,{type:"search",size:"xxs"}),placeholder:"\u641c\u7d22"})})]})}),Object(B.jsx)("div",{className:"flex-container",children:Object(B.jsx)(ac.a,{children:Object(B.jsx)(ac.a.Item,{style:{paddingTop:".3rem"},children:Object(B.jsxs)(Xr.a,{tabs:[{title:"\u70ed\u95e8\u83dc"},{title:"\u83dc\u5355"}],swipeable:!1,initialPage:a,tabBarUnderlineStyle:{width:"1rem",marginLeft:"5.4rem",background:"#000000"},onChange:function(e,t){console.log("onChange",t,e),r(t)},children:[Object(B.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[u&&Object(B.jsx)(tc.a,{autoplay:!0,infinite:!0,children:u.map((function(t,n){return Object(B.jsxs)("div",{className:"hot-dish",children:[""===t.url?Object(B.jsx)("img",{src:oe,alt:"",style:{objectFit:"contain"}}):Object(B.jsx)("img",{src:"".concat(Ee).concat(t.url),style:{objectFit:"contain"},alt:""}),Object(B.jsx)("span",{className:"dish-title",children:t.name}),Object(B.jsxs)("div",{className:"price-plus",onClick:function(){!function(t){e.add2car(t)}(t)},style:{marginTop:"2rem"},children:[Object(B.jsx)("span",{className:"price",children:Object(B.jsxs)("span",{className:"pricedetail",children:["\xa5 ",t.price]})}),Object(B.jsx)("div",{className:"plus",onClick:function(){l(o+1)},children:Object(B.jsx)(Zn.a,{})})]})]},t)}))}),u&&Object(B.jsxs)("div",{className:"more",children:[Object(B.jsx)("span",{style:{marginBottom:".3rem",paddingTop:".5rem"},children:Object(B.jsx)(fc.a,{})}),Object(B.jsx)("span",{style:{paddingBottom:".4rem"},onClick:function(){window.scrollTo({top:1e3,behavior:"smooth"})},children:"\u66f4\u591a\u63a8\u8350"}),Object(B.jsx)($r.a,{data:d,columnNum:2,hasLine:!1,renderItem:function(e){return Object(B.jsxs)("div",{style:{padding:"12.5px"},children:[""===e.picture?Object(B.jsx)("img",{src:oe,style:{width:"8rem",height:"8rem",objectFit:"cover"},alt:"\u56fe\u7247\u8d70\u4e22\u4e86"}):Object(B.jsx)("img",{src:"".concat(Ee).concat(e.picture),style:{width:"8rem",height:"8rem",objectFit:"cover"},alt:""}),Object(B.jsx)("div",{style:{color:"#888",fontSize:"14px",marginTop:"12px"},children:Object(B.jsx)("span",{children:e.name})})]})}})]})]}),Object(B.jsx)("div",{style:{display:"flex"},children:Object(B.jsx)(Nc,{})})]})})})}),Object(B.jsx)(Jr.a,{className:"shop-car",style:{textAlign:"center"},count:o,children:Object(B.jsx)("div",{onClick:function(){if(0===e.shopcar.length)return ic.a.info("\u8d2d\u7269\u8f66\u7a7a\u7a7a\u5982\u4e5f...",1);c.push("/home/shopcar")},children:Object(B.jsx)(Kr.a,{style:{backgroundColor:"#fff",color:"#000"},size:"large",icon:Object(B.jsx)(Oc.a,{})})})})]})})),Uc=n(164),Gc={hotlist:[],shopcar:[],randomlist:[],homeDishState:1,cate:[],catedish:[]},_c=Ue.a.mark(Pc),Fc=Ue.a.mark(qc),zc=Ue.a.mark(Wc),Bc=Ue.a.mark(Hc);function Pc(e){var t,n;return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("\u83dc\u54c1\u5217\u8868\u9875\u9762saga\u6267\u884c"),a.next=4,Be(e.url,e.data);case 4:return t=a.sent,a.next=7,Be("/home/cate");case 7:if(n=a.sent,200!==t.meta.status){a.next=15;break}return console.log("\u83dc\u54c1\u5217\u8868\u83b7\u53d6\u6210\u529f"),a.next=12,Object(Ge.a)({type:xc,data:t});case 12:console.log("\u53d1\u9001\u83b7\u53d6\u6210\u529f"),a.next=15;break;case 15:if(200!==n.meta.status){a.next=21;break}return console.log("\u5206\u7c7b\u83b7\u53d6\u6210\u529f"),a.next=19,Object(Ge.a)({type:yc,data:n});case 19:a.next=21;break;case 21:a.next=25;break;case 23:a.prev=23,a.t0=a.catch(0);case 25:case"end":return a.stop()}}),_c,null,[[0,23]])}function qc(e){return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ge.a)({type:Cc,data:e});case 2:case"end":return t.stop()}}),Fc)}function Wc(e){return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ge.a)({type:Tc,data:e});case 2:case"end":return t.stop()}}),zc)}function Hc(e){return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("saga",e),t.next=3,Object(Ge.a)({type:Ec,data:e});case 3:case"end":return t.stop()}}),Bc)}n(364);var Vc=n(222),Jc=n.n(Vc),Yc=Object(ee.b)((function(e){return{shopcar:e.home.shopcar||[]}}),(function(e){return{add2car:function(t){e({type:Cc,data:t})},less2car:function(t){e({type:Ec,data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1];Object(q.useEffect)((function(){r(JSON.parse(JSON.stringify(e.shopcar)))}),[e]);Object(q.useEffect)((function(){console.log(e.shopcar)}));return Object(B.jsx)("div",{style:{width:"66vw",marginTop:".7rem"},children:a&&a.map((function(t,n){return Object(B.jsx)("div",{children:a&&Object(B.jsx)(Dc.a,{style:{marginBottom:10},children:Object(B.jsxs)(Dc.a.Body,{children:[""===t.url?Object(B.jsx)("img",{src:oe,alt:"",className:"img",style:{objectFit:"cover",top:0,left:0}}):Object(B.jsx)("img",{src:"".concat(Ee).concat(t.url),className:"img",style:{objectFit:"cover",top:0,left:0},alt:""}),Object(B.jsx)("div",{style:{display:"flex",position:"relative"},children:Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(B.jsx)("span",{className:"dish-titles",children:t.name}),Object(B.jsxs)("span",{className:"dish-prices",children:["\xa5 ",t.price*t.num]}),Object(B.jsxs)("span",{className:"dish-titles num",style:{left:"14.5rem"},children:["x ",t.num]})]})}),Object(B.jsxs)("div",{className:"numutil",children:[Object(B.jsx)(J.a,{shape:"circle",size:"small",onClick:function(){!function(t){e.less2car(t)}(t)},icon:Object(B.jsx)(Rc.a,{})}),Object(B.jsx)("span",{style:{margin:"0 .5rem"},children:t.num}),Object(B.jsx)(J.a,{shape:"circle",size:"small",onClick:function(){!function(t){e.add2car(t)}(t)},style:{backgroundColor:"rgb(35, 45, 57)",color:"white"},icon:Object(B.jsx)(Zn.a,{})})]})]})},n)},n)}))})}));function Kc(){var e=Object(ae.a)(["\n  .am-card {\n    width: 92vw;\n  }\n\n  .dish-titles {\n    font-size: 1.1rem;\n  }\n\n  .dish-prices {\n    top: 2rem;\n    font-size: 1rem;\n  }\n\n  .am-stepper-input {\n    display: none;\n  }\n\n  .am-stepper-handler-wrap {\n    position: absolute;\n    width: 77%;\n    bottom: .2rem;\n  }\n\n  .content {\n    padding: 1rem;\n    margin-top: -0.7rem;\n    width: 100vw\n  }\n\n  .bottom {\n    position: fixed;\n    bottom: 0;\n    width: 100vw;\n    height: 9rem;\n    background-color: #fff;\n    border-top-left-radius: .7rem;\n    border-top-right-radius: .7rem;\n\n\n    div:first-child {\n      text-align: center;\n      padding: .7rem 0;\n\n      span {\n        font-size: 1.5rem;\n        color: #dabb91;\n      }\n    }\n\n    .btn {\n      margin: 0 1rem 0 1rem;\n      background-color: #dabb91;\n      color: white;\n      border-radius: 3rem;\n    }\n  }\n"]);return Kc=function(){return e},e}var Qc=re.a.div(Kc()),Xc=Object(ee.b)((function(e){return{shopcar:e.home.shopcar||[],handle:e.shopCar.handle,notEnough:e.shopCar.notEnough,handleEdit:e.shopCar.handleEdit,notE:e.shopCar.notE}}),(function(e){return{add2car:function(t){e({type:Cc,data:t})},resetcar:function(t){e({type:Tc,data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1];function c(){return(c=Object(Kn.a)(Ue.a.mark((function t(){var n,a,r,c,i,o,l,u,d;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=JSON.parse(Re("shopcar")),a=JSON.parse(Re("more")),!Re("more")){t.next=14;break}return ic.a.loading("\u8ba2\u5355\u66f4\u65b0\u4e2d\xb7\xb7\xb7",1),a.forEach((function(e,t){n.forEach((function(n,r){e._id===n._id&&(n.num+=e.num,a.splice(t,1))}))})),r={orderid:Re("orderid"),orderdetail:[].concat(Object(Uc.a)(a),Object(Uc.a)(n)),addOrder:Object(Uc.a)(n),tableID:Number(Re("tableID"))},t.next=9,Fe.a.put("".concat(Ee,"/cus/order/edit"),Object(P.a)({},r));case 9:c=t.sent,i=c.data.notE,400===c.data.status?i.map((function(e){$.a.info("".concat(e,"\u5e93\u5b58\u4e0d\u8db3\uff0c\u8bf7\u91cd\u65b0\u70b9\u9910"))})):s.push("/home/orderdetail/edit"),t.next=22;break;case 14:return ic.a.loading("\u8ba2\u5355\u63d0\u4ea4\u4e2d\xb7\xb7\xb7",1),o=e.shopcar,l={tableID:Number(Re("tableID")),orderdetail:o.flat(),person:Number(Re("peoplenum"))},t.next=19,Fe.a.post("".concat(Ee,"/cus/order/add"),Object(P.a)({},l));case 19:u=t.sent,d=u.data.notEnough,400===u.data.status?d.map((function(e){$.a.info("".concat(e,"\u5e93\u5b58\u4e0d\u8db3\uff0c\u8bf7\u91cd\u65b0\u70b9\u9910"))})):(console.log(u.data.order._id),we("orderid",u.data.order._id),s.push("/home/orderdetail/add"));case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(q.useEffect)((function(){var t=JSON.parse(Re("shopcar"));if(""!==t&&0===Object.keys(t).length)return s.replace("/home");e.resetcar(t),r(t)}),[e.shopcar.length]);var s=Object(Le.g)(),i=a.reduce((function(e,t){return e+t.price*t.num}),0);return Object(B.jsxs)(Qc,{children:[Object(B.jsx)(cc.a,{mode:"light",icon:Object(B.jsx)(lc.a,{type:"left"}),onLeftClick:function(){return s.goBack()},rightContent:[Object(B.jsx)(lc.a,{type:"ellipsis"},"1")],children:"\u8d2d\u7269\u8f66"}),Object(B.jsx)("div",{className:"content",children:Object(B.jsx)(Yc,{add22car:e})}),Object(B.jsxs)("div",{className:"bottom",children:[Object(B.jsxs)("div",{children:["\u5408\u8ba1\uff1a",Object(B.jsxs)("span",{className:"price",children:["\xa5 ",i]})]}),Object(B.jsx)("div",{children:Object(B.jsx)(Jc.a,{className:"btn",onClick:function(){return function(){return c.apply(this,arguments)}()},children:"\u9009\u597d\u4e86"})})]})]})})),Zc="SCUSORDERADD",$c="SORDERADDSUC",es="SORDERADDERR",ts="CUSOREDEREDIT",ns="SORDEREDITSUC",as="SORDEREDITERR",rs="RESET",cs={handle:-1,notEnough:[],handleEdit:-1,notE:[]},ss=Ue.a.mark(ls),is=Ue.a.mark(us),os=Ue.a.mark(ds);function ls(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589esaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),200!==t.status){n.next=13;break}return n.next=9,Object(Ge.a)({type:$c,data:t});case 9:we("orderid",t.order._id),console.log("\u6dfb\u52a0\u6210\u529f"),n.next=16;break;case 13:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=16,Object(Ge.a)({type:es,data:t});case 16:n.next=20;break;case 18:n.prev=18,n.t0=n.catch(0);case 20:case"end":return n.stop()}}),ss,null,[[0,18]])}function us(e){var t,n;return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(999999),a.prev=1,console.log("\u4fee\u6539saga\u6267\u884c"),a.next=5,We({url:e.url},e.data);case 5:if(200!==(null===(n=a.sent)||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.status)){a.next=12;break}return console.log("\u4fee\u6539\u6210\u529f"),a.next=10,Object(Ge.a)({type:ns,data:n});case 10:a.next=14;break;case 12:return a.next=14,Object(Ge.a)({type:as,data:n});case 14:a.next=18;break;case 16:a.prev=16,a.t0=a.catch(1);case 18:case"end":return a.stop()}}),is,null,[[1,16]])}function ds(e){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ge.a)({type:rs});case 2:case"end":return e.stop()}}),os)}n(365);var bs=n(253),js=n.n(bs),fs=(n(2901),n(805)),Os=n.n(fs),hs=(n(2903),n(806)),ps=n.n(hs);function ms(){var e=Object(ae.a)(["\n  height: 100vh;\n  width: 100vw;\n  background: #fff;\n\n  .title {\n    font-size: 1rem;\n    margin-top: -2rem;\n    font-weight: 600;\n  }\n\n  .num {\n    margin-top: 2rem;\n    margin-left: 1.7rem;\n  }\n\n  .am-list-header {\n    color: black;\n    font-size: 1.1rem;\n    margin-left: 1.7rem;\n  }\n\n  .am-list-body {\n    border-bottom: none;\n    padding: 0 2.8rem;\n    background-color: #fff;\n  }\n\n  .am-list-item.am-textarea-item {\n    border-bottom: none;\n    padding: 0 1rem;\n    margin: .6rem 0 1rem 0;\n    background-color: #f9fafc;\n  }\n\n  .am-list-body::before {\n    display: none !important;\n  }\n\n  .am-list-body::after {\n    display: none !important;\n  }\n\n\n  .btn {\n    margin: 3rem 3rem 0 3rem;\n    background-color: #dabb91;\n    color: white;\n    border-radius: 3rem;\n  }\n\n  .aa {\n    font-size: 1.1rem;\n    margin-left: 2.7rem;\n  }\n"]);return ms=function(){return e},e}var xs=re.a.div(ms()),gs=function(e){var t=Object(Le.g)(),n=Number(t.location.pathname.slice(-1)),a=Object(q.useState)(""),r=Object(ft.a)(a,2),c=r[0],s=r[1];return Object(q.useEffect)((function(){Re("more")&&Ie("more"),Re("shopcar")&&Ie("shopcar")}),[]),Object(B.jsxs)(xs,{children:[Object(B.jsx)(cc.a,{style:{fontWeight:600},mode:"light",icon:Object(B.jsx)(lc.a,{type:"cross"}),onLeftClick:function(){},rightContent:[Object(B.jsx)(lc.a,{type:"ellipsis"},"1")],children:"\u8fd9\u662f\u4e2a\u540d\u5b57"}),Object(B.jsxs)("div",{className:"content",children:[Object(B.jsxs)("div",{style:{textAlign:"center"},children:[Object(B.jsx)("img",{src:oe,alt:""}),Object(B.jsx)("div",{className:"title",children:"\u6b22\u8fce\u6765\u5230\u8fd9\u662f\u4e2a\u540d\u5b57"})]}),Object(B.jsx)("div",{className:"num",children:Object(B.jsx)(ps.a,{type:"number",defaultValue:String(c),onBlur:function(e){s("".concat(e))},placeholder:"\u8bf7\u8f93\u5165\u7528\u9910\u4eba\u6570",disabledKeys:["."],children:"\u5c31\u9910\u4eba\u6570"})}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"aa",children:"\u5907\u6ce8"}),Object(B.jsx)(js.a,{children:Object(B.jsx)(Os.a,{style:{fontSize:".7rem"},rows:5,placeholder:"\u53e3\u5473\u8981\u6c42\uff0c\u5fcc\u53e3\u7b49\uff08\u53ef\u4e0d\u586b\uff09",count:100})})]}),Object(B.jsx)("div",{children:Object(B.jsx)(Jc.a,{className:"btn",onClick:function(){Number(c)>0?(t.push("/home"),we("peoplenum",c),we("tableID",n)):ic.a.info("\u8bf7\u8f93\u5165\u5c31\u9910\u4eba\u6570",1)},children:"\u5f00\u59cb\u70b9\u9910"})})]})]})},vs=(n(736),n(415)),ys=n.n(vs);function Ss(){var e=Object(ae.a)(["\n\n  .content {\n    padding: 0 1rem;\n    border-radius: 300px;\n  }\n\n  .title {\n    text-align: center;\n    margin-top: .3rem;\n    color: #aaa;\n  }\n\n  .detail {\n    margin-top: .7rem;\n  }\n\n  .am-list-extra {\n    color: #212121 !important;\n  }\n\n  .ccc {\n    font-size: .9rem;\n    color: #888\n  }\n\n  .btn {\n    margin: 0 1rem 0 1rem;\n    background-color: #dabb91;\n    color: white;\n    border-radius: 3rem;\n  }\n\n  .morebtn {\n    border-radius: 3rem;\n    width: 6rem;\n    background-color: #202831;\n    float: right;\n    color: #eee\n  }\n\n  .bottom {\n    margin-top: .8rem;\n    width: 100vw;\n    height: 9rem;\n    background-color: #fff;\n    border-top-left-radius: .7rem;\n    border-top-right-radius: .7rem;\n\n\n    div:first-child {\n      text-align: center;\n      padding: .7rem 0;\n\n      span {\n        font-size: 1.5rem;\n        color: #dabb91;\n      }\n    }\n\n    .btn {\n      margin: 0 1rem 0 1rem;\n      background-color: #dabb91;\n      color: white;\n      border-radius: 3rem;\n    }\n  }\n\n  .phonenum {\n    width: 40vw;\n    border: none;\n    margin-left: 1rem;\n    outline: none;\n  }\n\n  .custitle {\n    font-size: .9rem;\n    color: #dabb91\n  }\n"]);return Ss=function(){return e},e}var Cs=re.a.div(Ss()),Es="iscus",Ts="iscussuc",ks="iscuserr",Ds=js.a.Item,ws=Ds.Brief,Rs=Object(ee.b)((function(e){return{shopcar:e.home.shopcar||[],iscus:e.orderDetail.iscus,cusInfo:e.orderDetail.cusInfo}}),(function(e){return{isCus:function(t){e({type:Es,url:"/home/iscus",data:t})},updateOrder:function(t,n,a){var r,c,s,i,o,l=t;console.log("cusINfo",l);var u={status:1,orderid:Re("orderid"),level:null!==(r=null===l||void 0===l||null===(c=l.cus)||void 0===c||null===(s=c.level)||void 0===s?void 0:s._id)&&void 0!==r?r:"",cus:null!==(i=null===l||void 0===l||null===(o=l.cus)||void 0===o?void 0:o._id)&&void 0!==i?i:"",receivable:n,paid:a};e({type:ts,data:u,url:"/cus/order/edit"})}}}))((function(e){var t,n,a,r=Object(Le.g)(),c=Re("peoplenum"),s=Re("tableID"),i=Object(q.useState)("none"),o=Object(ft.a)(i,2),l=o[0],u=o[1],d=Object(q.useState)(!1),b=Object(ft.a)(d,2),j=(b[0],b[1]),f=Object(q.useState)(!1),O=Object(ft.a)(f,2),h=O[0],p=O[1];Object(q.useEffect)((function(){r.location.pathname.includes("readonly")?p(!0):p(!1);var e=new WebSocket("".concat(Te,"/cus/order"));e.addEventListener("open",(function(t){console.log("socket is open");var n=Re("orderid");n?e.send(n):e.send("\u8fde\u63a5\u6210\u529f")})),e.addEventListener("message",(function(e){-1!==e.data&&"websocket connected"!==e.data?A(JSON.parse(e.data).orderdetail):-1===e.data&&($.a.warn("\u6682\u65e0\u5e93\u5b58"),r.goBack())}))}),[]);var m=Object(q.useRef)(null),x=Object(q.useState)(0),g=Object(ft.a)(x,2),v=g[0],y=g[1],S=Object(q.useState)(0),C=Object(ft.a)(S,2),E=C[0],T=C[1],k=Object(q.useState)(0),D=Object(ft.a)(k,2),w=D[0],R=D[1],I=Object(q.useState)([]),L=Object(ft.a)(I,2),N=L[0],A=L[1],M=JSON.parse(Re("shopcar")),U=null!==(t=JSON.parse(Re("more")))&&void 0!==t?t:[];U.forEach((function(e,t){M.forEach((function(n,a){e._id===n._id&&(n.num+=e.num,U.splice(t,1))}))}));var G=[].concat(Object(Uc.a)(M),Object(Uc.a)(U));N.length>0&&we("shopcar",G=N);var _=e.iscus,F=e.cusInfo.cus;function z(e){we("more",G),we("shopcar",[]),e.push("/home")}return Object(q.useEffect)((function(){var e=Re("iscus");_>10?(e!=_&&ic.a.fail("\u6682\u65f6\u6ca1\u6709\u67e5\u8be2\u5f53\u524d\u4f1a\u5458\u8d26\u53f7",2),j(!1)):-1!==_&&(e!=_&&ic.a.success("\u4f1a\u5458\u6298\u6263\u5f55\u5165\u6210\u529f",2),j(!0),m.current.state.value=null===F||void 0===F?void 0:F.telephone),we("iscus",_)}),[_]),Object(q.useEffect)((function(){if(_<=10&&-1!==_&&"block"===l){var e;console.log("\u4f1a\u5458"),y(G.reduce((function(e,t){return e+t.num*t.price}),0));var t=Number((v*(null===F||void 0===F||null===(e=F.level)||void 0===e?void 0:e.discount)*.1).toFixed(2))||0;T(t),R(v-t)}else-1===_?(y(G.reduce((function(e,t){return e+t.num*t.price}),0)),T(0),R(G.reduce((function(e,t){return e+t.num*t.price}),0))):(console.log("\u975e\u4f1a\u5458"),y(G.reduce((function(e,t){return e+t.num*t.price}),0)),T(0),R(G.reduce((function(e,t){return e+t.num*t.price}),0)))}),[_,l,[]]),Object(B.jsxs)(Cs,{children:[Object(B.jsx)(cc.a,{mode:"light",icon:Object(B.jsx)(lc.a,{type:"left"}),onLeftClick:function(){return z(r)},rightContent:[Object(B.jsx)(lc.a,{type:"ellipsis"},"1")],children:"\u8ba2\u5355\u8be6\u60c5"}),Object(B.jsxs)("div",{className:"content",children:[Object(B.jsxs)("div",{className:"title",children:[Object(B.jsx)("div",{children:"\u60a8\u7684\u8ba2\u5355\u5df2\u63d0\u4ea4"}),Object(B.jsx)("div",{children:"\u53a8\u623f\u5df2\u7ecf\u5728\u5236\u4f5c\u5566"})]}),Object(B.jsx)("div",{className:"detail",children:Object(B.jsxs)(js.a,{className:"my-list",children:[!h&&Object(B.jsxs)(Ds,{extra:Object(B.jsx)(Jc.a,{size:"small",onClick:function(){return z(r)},className:"morebtn",children:"\u7ee7\u7eed\u70b9\u9910"}),children:["\u684c\u53f0\u53f7\uff1a",s]}),h&&Object(B.jsxs)(Ds,{children:["\u684c\u53f0\u53f7\uff1a",s]}),G&&G.map((function(e,t){return Object(B.jsxs)(Ds,{multipleLine:!0,extra:Object(B.jsxs)("span",{children:["\xa5 ",e.num*e.price]}),children:[Object(B.jsx)("span",{style:{fontSize:".9rem",color:"#888"},children:e.name}),Object(B.jsxs)(ws,{children:["x ",e.num]})]},t)}))]})}),Object(B.jsx)("div",{style:{marginTop:".3rem"},children:Object(B.jsxs)(js.a,{className:"my-list",children:[Object(B.jsxs)(Ds,{multipleLine:!0,children:[Object(B.jsxs)("span",{style:{float:"right",color:"#888"},children:["\xa5 ",v]}),Object(B.jsx)("span",{className:"ccc",children:"\u539f\u91d1\u989d"})]}),!h&&Object(B.jsxs)(Ds,{multipleLine:!0,extra:Object(B.jsx)(ys.a,{onClick:function(e){u(e?"block":"none")}}),children:[Object(B.jsx)("span",{className:"ccc",children:"\u4f1a\u5458\u4f18\u60e0"}),Object(B.jsxs)("div",{style:{display:l},children:[Object(B.jsx)("span",{style:{fontSize:".9rem",color:"#888"},children:"\u624b\u673a\u53f7\u7801"}),Object(B.jsx)(X.a,{onChange:function(t){var n=t.target.value;11===n.length&&e.isCus(n)},type:"number",ref:m,bordered:!1,className:"phonenum",placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u624b\u673a\u53f7"})]})]}),!h&&Object(B.jsxs)(Ds,{multipleLine:!0,extra:E,children:[Object(B.jsx)("span",{className:"ccc",children:"\u4f18\u60e0\u91d1\u989d"}),_<=10&&-1!==_&&"block"===l&&Object(B.jsxs)("div",{className:"custitle",children:[null===F||void 0===F||null===(n=F.level)||void 0===n?void 0:n.name,": ",Object(B.jsxs)("span",{children:[null===F||void 0===F||null===(a=F.level)||void 0===a?void 0:a.discount,"\u6298"]})]})]}),h&&Object(B.jsx)(Ds,{multipleLine:!0,extra:Number(Re("youhuiPrice")),children:Object(B.jsx)("span",{className:"ccc",children:"\u4f18\u60e0\u91d1\u989d"})}),!h&&Object(B.jsxs)(Ds,{multipleLine:!0,children:[Object(B.jsxs)("span",{style:{float:"right",color:"#D5BC96",fontSize:"1.3rem"},children:["\xa5 ",w]}),"\u5408\u8ba1"]}),h&&Object(B.jsxs)(Ds,{multipleLine:!0,children:[Object(B.jsxs)("span",{style:{float:"right",color:"#D5BC96",fontSize:"1.3rem"},children:["\xa5 ",Re("pre")-Re("youhuiPrice")]}),"\u5408\u8ba1"]})]})}),Object(B.jsx)("div",{children:Object(B.jsxs)(js.a,{className:"my-list",children:[Object(B.jsx)(Ds,{style:{marginTop:".3rem"},children:"\u7528\u9910\u4fe1\u606f"}),Object(B.jsxs)(Ds,{multipleLine:!0,children:[Object(B.jsx)("span",{className:"ccc",children:"\u7528\u9910\u4eba\u6570"}),Object(B.jsxs)("span",{className:"ccc",style:{float:"right"},children:[c,"\u4eba"]})]}),Object(B.jsxs)(Ds,{multipleLine:!0,children:[Object(B.jsx)("span",{className:"ccc",children:"\u684c\u53f0\u53f7"}),Object(B.jsx)("span",{className:"ccc",style:{float:"right"},children:s})]})]})})]}),!h&&Object(B.jsxs)("div",{className:"bottom",children:[Object(B.jsxs)("div",{style:{color:"#888"},children:["\u5408\u8ba1\uff1a",Object(B.jsxs)("span",{className:"price",children:["\xa5 ",w]}),Object(B.jsxs)("div",{style:{display:"inline-block",marginLeft:".5rem",color:"#888"},children:[" (\u5df2\u4f18\u60e0\xa5",E,")"]})]}),Object(B.jsx)("div",{children:Object(B.jsx)(Jc.a,{className:"btn",onClick:function(){we("total",w),we("youhuiPrice",E),we("pre",v),e.updateOrder(e.cusInfo,w,w-E),ic.a.loading("\u4ed8\u6b3e\u4e2d\xb7\xb7\xb7",1,(function(){r.push("/pay")}))},children:"\u53bb\u4ed8\u6b3e"})})]})]})})),Is={iscus:-1,cusInfo:{}},Ls=Ue.a.mark(Ns);function Ns(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,qe({url:e.url},{telephone:e.data});case 3:if(t=n.sent,console.log("result",t),200!==t.meta.status){n.next=8;break}return n.next=8,Object(Ge.a)({type:Ts,data:t});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(Ge.a)({type:ks});case 14:case"end":return n.stop()}}),Ls,null,[[0,10]])}var As="getqrcode",Ms="getqrcodesuc",Us="getqrcodeerr",Gs="gettable",_s="gettablesuc",Fs="gettableerr",zs="gettstaffsuc",Bs="addtable",Ps="addtablesuc",qs="addtableerr",Ws="edittable",Hs="edittablesuc",Vs="edittableerr",Js="deltable",Ys="deltablesuc",Ks="deltableerr",Qs="getarrayqrcodesuc",Xs={url:"",tableList:[],staffList:[],addTStatus:99999,errorMsgT:"",delTStatus:99999,editTStatus:99999,urlArray:[]},Zs=Ue.a.mark(ai),$s=Ue.a.mark(ri),ei=Ue.a.mark(ci),ti=Ue.a.mark(si),ni=Ue.a.mark(ii);function ai(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u83b7\u53d6QR saga\u6267\u884c"),n.next=4,Be("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=11;break}return n.next=9,Object(Ge.a)({type:Ms,data:t});case 9:n.next=18;break;case 11:if(201!==t.meta.status){n.next=16;break}return n.next=14,Object(Ge.a)({type:Qs,data:t});case 14:n.next=18;break;case 16:return n.next=18,Object(Ge.a)({type:Us,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),Zs,null,[[0,20]])}function ri(e){var t,n,a;return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("\u83b7\u53d6table saga\u6267\u884c"),r.next=4,Be(e.url);case 4:return t=r.sent,console.log(t),r.next=8,Be(Oe);case 8:return n=r.sent,a=n.user.records.map((function(e){return{name:e.name,_id:e._id}})),r.next=12,Object(Ge.a)({type:zs,data:a});case 12:if(200!==t.meta.status){r.next=17;break}return r.next=15,Object(Ge.a)({type:_s,data:t});case 15:r.next=19;break;case 17:return r.next=19,Object(Ge.a)({type:Fs,data:t});case 19:r.next=23;break;case 21:r.prev=21,r.t0=r.catch(0);case 23:case"end":return r.stop()}}),$s,null,[[0,21]])}function ci(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589e\u9910\u684csaga\u6267\u884c"),console.log(e),n.next=5,qe({url:e.url},e.data);case 5:if(t=n.sent,console.log(t),!t.status||-1===t.status){n.next=14;break}return n.next=10,Object(Ge.a)({type:Ps,data:t});case 10:return n.next=12,Object(Ge.a)({type:Gs,url:Ce});case 12:n.next=16;break;case 14:return n.next=16,Object(Ge.a)({type:qs,data:t});case 16:n.next=20;break;case 18:n.prev=18,n.t0=n.catch(0);case 20:case"end":return n.stop()}}),ei,null,[[0,18]])}function si(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=13;break}return n.next=8,Object(Ge.a)({type:Hs,data:t});case 8:return n.next=10,Object(Ge.a)({type:Gs,url:Ce});case 10:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=15;break;case 13:return n.next=15,Object(Ge.a)({type:Vs,data:t});case 15:n.next=19;break;case 17:n.prev=17,n.t0=n.catch(0);case 19:case"end":return n.stop()}}),ti,null,[[0,17]])}function ii(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5220\u9664saga\u6267\u884c"),n.next=4,Pe("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),200!==t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:Ys,data:t});case 9:return console.log("\u5220\u9664\u6210\u529f"),n.next=12,Object(Ge.a)({type:Gs,url:Ce});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=17;break;case 15:return n.next=17,Object(Ge.a)({type:Ks,data:t});case 17:n.next=21;break;case 19:n.prev=19,n.t0=n.catch(0);case 21:case"end":return n.stop()}}),ni,null,[[0,19]])}function oi(){var e=Object(ae.a)(["\n\n  .card {\n    height: 14vh;\n    cursor: pointer;\n    text-align: center;\n  }\n\n  /deep/ .ant-btn {\n    border-radius: 6px;\n  }\n"]);return oi=function(){return e},e}var li=re.a.div(oi()),ui=n(2969),di=n(2970),bi=Xn.a.Option,ji=Xt.a.confirm,fi=Object(ee.b)((function(e){return{url:e.table.url,urlArray:e.table.urlArray,tableList:e.table.tableList,staffList:e.table.staffList,addTStatus:e.table.addTStatus,delTStatus:e.table.delTStatus,errorMsgT:e.table.errorMsgT,editTStatus:e.table.editTStatus}}),(function(e){return{getQR:function(t){e({type:As,url:"/admin/qrcode",data:t})},getTable:function(){e({type:Gs,url:Ce})},addTable:function(t){e({type:Bs,url:"/admin/table/add",data:t})},editTable:function(t){e({type:Ws,url:"/admin/table/edit",data:t})},delTable:function(t){e({type:Js,url:"/admin/table/del",data:t})}}}))((function(e){var t=Object(q.useState)(!1),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)(""),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(q.useState)({tableID:0,staff:"",role:"",status:-9}),u=Object(ft.a)(l,2),d=(u[0],u[1],Object(q.useState)(!1)),b=Object(ft.a)(d,2),j=b[0],f=b[1],O=Object(q.useState)({_id:"",status:void 0,tableID:void 0,staff:"",staffId:"",canSeat:void 0}),h=Object(ft.a)(O,2),p=h[0],m=h[1];function x(t){var n=t.tableID;e.getQR(n);var a=JSON.parse(JSON.stringify(t));a.staffId=a.staff,a.staff=S.find((function(e){return e._id===a.staff})).name,console.log(a),m(a),f(!0)}Object(q.useEffect)((function(){var t=e.errorMsgT,n=e.addTStatus,a=e.delTStatus,c=e.editTStatus,s=Re("addTStatus"),i=Re("delTStatus"),o=Re("editTStatus");s==n||(console.log(e),console.log(t),we("addTStatus",n),n<1?$.a.success("\u9910\u684c\u6dfb\u52a0\u6210\u529f"):t&&t.includes("\u5b58\u5728")&&$.a.info("\u6b64\u9910\u684c\u5df2\u5b58\u5728\uff01")),i==a||(we("delTStatus",a),a<1&&$.a.success("\u9910\u684c\u5220\u9664\u6210\u529f"),r(!1),f(!1)),o==c||(we("editTStatus",c),c<1&&$.a.success("\u9910\u684c\u4fe1\u606f\u4fee\u6539\u6210\u529f"),r(!1),f(!1))}),[e]),Object(q.useEffect)((function(){e.getTable()}),[]);var g=function(){console.log("Clicked cancel button"),r(!1),o("")};var v=e.url,y=e.tableList,S=e.staffList;return Object(B.jsx)(De.a,{title:"\u9910\u684c\u7ba1\u7406",children:Object(B.jsxs)(li,{children:[Object(B.jsxs)(lt.a,{title:"\u9910\u684c\u7ba1\u7406",extra:Object(B.jsx)("div",{children:Object(B.jsx)(J.a,{type:"primary",style:{borderRadius:6},onClick:function(){r(!0),o("\u65b0\u589e\u9910\u684c")},children:"\u65b0\u589e"})}),children:[Object(B.jsx)(J.a,{style:{marginBottom:10},onClick:function(){var t;e.getQR("all"),t=e.urlArray,console.log(t),t.forEach((function(e,t){setTimeout((function(){var t=document.createElement("a");t.href="data:image/png;base64,".concat(e.url),t.download="".concat(e.id,"\u53f7\u9910\u684c\u4e8c\u7ef4\u7801"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}),500*t)}))},icon:Object(B.jsx)(ui.a,{}),children:"\u6279\u91cf\u4e0b\u8f7d\u4e8c\u7ef4\u7801"}),Object(B.jsx)(Va.a,{grid:{gutter:16,column:8},dataSource:y,renderItem:function(e){return Object(B.jsxs)(Va.a.Item,{children:[0===e.status&&Object(B.jsxs)(lt.a,{hoverable:!0,style:{backgroundColor:"#f1f2f6"},className:"card",onClick:function(){return x(e)},children:[Object(B.jsx)("h2",{children:e.tableID}),Object(B.jsxs)("span",{children:["\u7a7a\u4f4d ",e.canSeat,"\u4eba"]})]}),1===e.status&&Object(B.jsxs)(lt.a,{onClick:function(){return x(e)},hoverable:!0,style:{backgroundColor:"#F9F5E9"},className:"card",children:[Object(B.jsx)("h2",{children:e.tableID}),Object(B.jsxs)("span",{children:["\u5360\u7528 ",e.canSeat,"\u4eba"]})]})]})}})]}),Object(B.jsx)(Xt.a,{title:i,visible:a,onCancel:g,destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{name:"normal_login",className:"login-form",onFinish:function(t){if("\u65b0\u589e\u9910\u684c"===i)return console.log(t),e.addTable(t),void r(!1);console.log(t),t._id=p._id,t.staff===p.staff&&(t.staff=p.staffId),e.editTable(t),r(!1)},children:[Object(B.jsxs)(K.a.Item,{children:["\u65b0\u589e\u9910\u684c"===i&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(K.a.Item,{name:"tableID",style:{margin:0},children:Object(B.jsx)(X.a,{autoFocus:!0,type:"number",prefix:Object(B.jsx)(rn.a,{className:"site-form-item-icon"}),placeholder:"\u9910\u684c\u53f7"})}),Object(B.jsx)(K.a.Item,{name:"canSeat",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53ef\u5bb9\u7eb3\u4eba\u6570"}],style:{marginTop:20},children:Object(B.jsx)(X.a,{type:"number",placeholder:"\u53ef\u5bb9\u7eb3\u4eba\u6570"})}),Object(B.jsx)(K.a.Item,{name:"staff",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9910\u684c\u8d1f\u8d23\u4eba"}],children:Object(B.jsx)(Xn.a,{showSearch:!0,style:{width:"100%",marginTop:-10},placeholder:"\u8d23\u4efb\u5458\u5de5",optionFilterProp:"children",children:S&&S.map((function(e){return Object(B.jsx)(bi,{value:e._id,children:e.name},e._id)}))})})]}),"\u7f16\u8f91\u9910\u684c"===i&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(K.a.Item,{name:"tableID",initialValue:p.tableID,children:Object(B.jsx)(X.a,{type:"number",prefix:Object(B.jsx)(rn.a,{className:"site-form-item-icon"}),placeholder:"\u9910\u684c\u53f7"})}),Object(B.jsx)(K.a.Item,{initialValue:p.canSeat,name:"canSeat",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53ef\u5bb9\u7eb3\u4eba\u6570"}],style:{marginTop:20},children:Object(B.jsx)(X.a,{type:"number",autoFocus:!0,placeholder:"\u53ef\u5bb9\u7eb3\u4eba\u6570"})}),Object(B.jsx)(K.a.Item,{name:"staff",initialValue:p.staff,children:Object(B.jsx)(Xn.a,{showSearch:!0,style:{width:"100%",marginTop:-10},placeholder:"\u8d23\u4efb\u5458\u5de5",optionFilterProp:"children",children:S&&S.map((function(e){return Object(B.jsx)(bi,{value:e._id,children:e.name},e._id)}))})})]})]}),Object(B.jsx)(K.a.Item,{name:"status",initialValue:"\u7f16\u8f91\u9910\u684c"===i?p.status:1,style:{marginTop:-30},children:Object(B.jsxs)(at.a.Group,{children:[Object(B.jsx)(at.a,{value:0,children:"\u7a7a\u95f2"}),Object(B.jsx)(at.a,{value:1,children:"\u5360\u7528"})]})}),Object(B.jsx)(K.a.Item,{style:{marginBottom:-6},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:g,children:"\u53d6\u6d88"}),"\u65b0\u589e\u9910\u684c"===i&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u9910\u684c"===i&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u63d0\u4ea4"})]})})]})}),Object(B.jsxs)(Vn.a,{title:"\u9910\u684c\u8be6\u60c5",placement:"right",closable:!1,width:700,onClose:function(){f(!1),m({_id:"",status:void 0,tableID:void 0,staff:"",staffId:"",canSeat:void 0})},visible:j,children:[Object(B.jsxs)("div",{style:{position:"absolute",top:14,right:24},children:[Object(B.jsx)(J.a,{style:{borderRadius:6,marginRight:10},type:"primary",onClick:function(){return e=p,r(!0),o("\u7f16\u8f91\u9910\u684c"),void console.log(e);var e},children:Object(B.jsx)(ta.a,{})}),Object(B.jsx)(J.a,{style:{borderRadius:6},onClick:function(){ji({type:"error",title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u5f20\u9910\u684c\u5417?",icon:Object(B.jsx)(mt.a,{}),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){e.delTable(p._id),console.log("OK")},onCancel:function(){console.log("Cancel")}})},danger:!0,type:"primary",children:Object(B.jsx)(di.a,{})})]}),Object(B.jsxs)(Sr.a,{children:[Object(B.jsx)(Sr.a.Item,{label:"\u9910\u684c\u53f7",children:p.tableID}),Object(B.jsxs)(Sr.a.Item,{label:"\u4f7f\u7528\u72b6\u6001",children:[0===p.status&&"\u4f7f\u7528\u4e2d",1===p.status&&"\u7a7a\u95f2\u4e2d"]}),Object(B.jsx)(Sr.a.Item,{label:"\u8d1f\u8d23\u4eba",children:p.staff})]}),Object(B.jsxs)("div",{style:{position:"relative"},children:[Object(B.jsx)("div",{children:"\u9910\u684c\u4e8c\u7ef4\u7801:"}),Object(B.jsx)("img",{width:200,height:200,style:{marginLeft:220},src:"data:image/png;base64,".concat(v),alt:"\u56fe\u7247\u8d70\u4e22\u4e86..."}),Object(B.jsx)("div",{children:Object(B.jsx)("a",{href:"data:image/png;base64,".concat(v),download:"".concat(p.tableID,"\u53f7\u9910\u684c\u4e8c\u7ef4\u7801"),children:Object(B.jsx)(J.a,{style:{borderRadius:6,position:"absolute",left:280,bottom:-50},icon:Object(B.jsx)(ui.a,{}),children:"\u4e0b\u8f7d"})})})]})]})]})})})),Oi=(n(737),n(416)),hi=n.n(Oi),pi=function(e){var t=Object(Le.g)();return Object(B.jsx)(hi.a,{status:"404",title:"404",subTitle:"\u6b64\u9875\u9762\u8d70\u4e22\u4e86\uff5e\uff5e",extra:Object(B.jsx)(J.a,{style:{borderRadius:20},type:"primary",onClick:function(){return t.goBack()},children:"\u56de\u4e0a\u4e00\u9875"})})},mi=function(e){var t=Object(Le.g)();return Object(B.jsx)(hi.a,{status:"403",title:"403",subTitle:"\u4f60\u6ca1\u6709\u8bbf\u95ee\u6743\u9650",extra:Object(B.jsx)(J.a,{style:{borderRadius:20},type:"primary",onClick:function(){return t.replace("/")},children:"\u56de\u5230\u9996\u9875"})})},xi="WGETORDERLISTERR",gi="WGETORDERLIST",vi="WGETORDERLISTSUC",yi="WORDEREDIT",Si="WORDEREDITSUC",Ci="WORDEREDITERR",Ei="WORDERADD",Ti="WORDERADDSUC",ki=n(2971);function Di(){var e=Object(ae.a)(["\n  .div {\n    position: relative;\n  }\n\n  .input {\n    width: 6.5em;\n    color: black;\n    font-size: inherit;\n    font-family: inherit;\n    background-color: transparent;\n    border: 1px solid transparent;\n  }\n\n  .input:focus {\n    outline: none;\n  }\n\n  .input::placeholder {\n    color: hsla(0, 0%, 100%, 0.6);\n  }\n\n  .span {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background-color: #3742fa;\n    transform-origin: bottom right;\n    transform: scaleX(0);\n    transition: transform 0.5s ease;\n  }\n\n  .input:focus ~ span {\n    transform-origin: bottom left;\n    transform: scaleX(1);\n  }\n"]);return Di=function(){return e},e}var wi=re.a.div(Di()),Ri=Xn.a.Option,Ii=Object(ee.b)((function(e){return{orderlist:e.waiterOrder.orderlist,dishlist:e.waiterOrder.dishlist}}),(function(e){return{getOrderList:function(){e({type:gi,url:"/waiter/order"})},updateOrder:function(t){e({type:yi,url:"/waiter/order/edit",data:t})},addDish:function(t){e({type:Ei,url:"/waiter/order/add",data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)([]),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(q.useState)(0),u=Object(ft.a)(l,2),d=u[0],b=u[1],j=[{title:"\u83dc\u540d",dataIndex:"name",key:"name",width:400,render:function(e,t){return Object(B.jsx)(Xn.a,{showSearch:!0,bordered:!1,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u83dc\u54c1",optionFilterProp:"children",onClick:function(){!function(e){console.log("val",e);var t=i.filter((function(t){return t._id!==e._id}));o(t);var n=a.find((function(t){return t.orderid===e.orderid}));v(n.orderid),p(e)}(t)},onBlur:z,onChange:F,defaultValue:e,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:i&&i.map((function(e){return Object(B.jsx)(Ri,{value:e._id,children:e.name},e._id)}))})}},{title:"\u6570\u91cf",dataIndex:"num",key:"num",render:function(e,t){return Object(B.jsxs)("div",{className:"div",children:[Object(B.jsx)("input",{onChange:function(e){!function(e,t){var n=a.find((function(t){return t.orderid===e.orderid})),c=a.findIndex((function(t){return t.orderid===e.orderid}));n.order.forEach((function(n){n._id===e._id&&(n.num=+t,E(n._id),w(n.num))})),p(n),v(n.orderid),a.splice(c,1,n);var s=JSON.parse(JSON.stringify(a));r(s)}(t,e.target.value)},onBlur:_,value:e||"",className:"input",type:"number",placeholder:"\u83dc\u54c1\u6570\u91cf"}),Object(B.jsx)("span",{className:"span"})]})}},{title:"\u51fa\u9910\u72b6\u6001",dataIndex:"status",key:"status",render:function(e,t){return 1===e?Object(B.jsx)(ki.a,{style:{color:"green"}}):Object(B.jsx)(Rc.a,{style:{color:"red"}})}},{title:"\u64cd\u4f5c",key:"action",dataIndex:"tableID",render:function(t,n){return Object(B.jsx)($t.a,{children:Object(B.jsx)(un.a,{placement:"top",title:"\u786e\u5b9a\u8981\u5220\u9664\u5f53\u524d\u83dc\u54c1\u5417",onConfirm:function(){var t;t=n,console.log(t),e.updateOrder({order:t,status:0})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(B.jsx)(J.a,{shape:"circle",size:"small",type:"primary",danger:!0,icon:Object(B.jsx)(di.a,{})})})})}}];Object(q.useEffect)((function(){var t=new WebSocket("".concat(Te,"/waiter/order"));t.addEventListener("open",(function(e){console.log("socket is open"),t.send("\u8fde\u63a5\u6210\u529f")})),t.addEventListener("message",(function(e){console.log("Message from server",e.data),"websocket connected"!==e.data&&r(JSON.parse(e.data))})),e.getOrderList(),console.log(e)}),[]),Object(q.useMemo)((function(){r(e.orderlist),o(e.dishlist)}),[e.orderlist,e.dishlist]);var f=Object(q.useState)({order:void 0,num:void 0,_id:void 0,orderid:void 0}),O=Object(ft.a)(f,2),h=O[0],p=O[1],m=Object(q.useState)(""),x=Object(ft.a)(m,2),g=x[0],v=x[1],y=Object(q.useState)(""),S=Object(ft.a)(y,2),C=S[0],E=S[1],T=Object(q.useState)(0),k=Object(ft.a)(T,2),D=k[0],w=k[1],R=Object(q.useState)(""),I=Object(ft.a)(R,2),L=I[0],N=I[1],A=Object(q.useState)(!1),M=Object(ft.a)(A,2),U=M[0],G=M[1];function _(){i.map((function(t){t._id===C&&(console.log(C),(t.number-=D)<0?(t.number+=D,alert("\u83dc\u54c1".concat(t.name," \u53ef\u7528\u5e93\u5b58\u4e3a ").concat(t.number))):e.updateOrder({orderid:g,orderdetail:h.order,editDishID:C,editNum:D}))}))}function F(e){console.log("\u66f4\u6539\u540e\u7684\u83dc\u54c1id",e),N(e)}function z(){e.updateOrder({status:1,orderid:g,updateDishId:L,preDishDetail:h})}return Object(B.jsx)(De.a,{title:"\u8ba2\u5355\u5217\u8868",children:Object(B.jsxs)(wi,{children:[Object(B.jsx)(Va.a,{grid:{column:1},dataSource:a,renderItem:function(e){return Object(B.jsx)(Va.a.Item,{children:Object(B.jsx)(lt.a,{style:{overflow:"scroll"},title:Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(tn.a,{color:"#2db7f5",children:[e.tableID," \u53f7\u684c"]}),Object(B.jsx)(tn.a,{color:"lime-inverse",children:an()(e.fromNow).fromNow()}),e.isPaid?Object(B.jsx)(tn.a,{color:"#87d068",children:"\u5df2\u4ed8\u6b3e"}):Object(B.jsx)(tn.a,{color:"#f50",children:"\u672a\u4ed8\u6b3e"})]}),extra:e.isPaid?"":Object(B.jsx)(J.a,{type:"primary",style:{borderRadius:5},onClick:function(){var t;t=e,G(!0),b(t.tableID),p(t)},children:"\u52a0\u83dc"}),children:Object(B.jsx)(tt.a,{rowKey:e.tableID,pagination:!1,columns:j,dataSource:e.order})})})}}),Object(B.jsx)(Xt.a,{title:"\u65b0\u589e\u70b9\u83dc",visible:U,onCancel:function(){G(!1)},destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{onFinish:function(t){console.log(t),i.map((function(n){n._id===t.id&&(console.log(t),(n.number-=+t.num)<0?(n.number+=+t.num,alert("\u83dc\u54c1".concat(n.name," \u53ef\u7528\u5e93\u5b58\u4e3a ").concat(n.number))):(e.addDish({orderid:h.orderid,dish:t}),G(!1)))}))},children:[Object(B.jsxs)(K.a.Item,{children:[Object(B.jsx)(K.a.Item,{name:"tableID",style:{margin:0},initialValue:d,children:Object(B.jsx)(X.a,{placeholder:"\u9910\u684c\u53f7",disabled:!0})}),Object(B.jsx)(K.a.Item,{name:"id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u83dc\u54c1"}],children:Object(B.jsx)(Xn.a,{autoFocus:!0,showSearch:!0,style:{width:"100%",marginTop:20},placeholder:"\u83dc\u54c1",optionFilterProp:"children",children:i&&i.map((function(e){return Object(B.jsx)(Ri,{value:e._id,children:e.name},e._id)}))})}),Object(B.jsx)(K.a.Item,{name:"num",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6570\u91cf"}],style:{marginTop:0},children:Object(B.jsx)(X.a,{type:"number",placeholder:"\u6570\u91cf"})})]}),Object(B.jsx)(K.a.Item,{style:{marginBottom:-6},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:function(){G(!1)},children:"\u53d6\u6d88"}),Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u6dfb\u52a0"})]})})]})})]})})})),Li=(n(2918),n(807)),Ni=n.n(Li),Ai=dc.a.Item,Mi={color:"#888",fontSize:14,padding:"30px 0 18px 0",marginLeft:15},Ui=function(e){var t=Object(q.useState)(0),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)(0),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(Le.g)();return Object(q.useEffect)((function(){r(Re("total")),o(Re("pre"))}),[]),Object(B.jsxs)("div",{children:[Object(B.jsx)(cc.a,{mode:"light",rightContent:[Object(B.jsx)(dc.a,{mask:!0,visible:!1,overlay:[Object(B.jsx)(Ai,{style:{marginRight:0},"data-seed":"logId",children:"\u8ba2\u5355\u8be6\u60c5"},"0")],onSelect:function(e,t){0===t&&l.push("/home/orderdetail/readonly")},children:Object(B.jsx)("div",{style:{height:"100%",padding:"0 15px",marginRight:"-7px",display:"flex",alignItems:"center"},children:Object(B.jsx)(lc.a,{type:"ellipsis"})})})],children:"\u652f\u4ed8\u8be6\u60c5"}),Object(B.jsx)("div",{className:"sub-title",style:Mi,children:"\u652f\u4ed8\u7ed3\u679c"}),Object(B.jsx)(Ni.a,{img:Object(B.jsx)("img",{style:{width:60,height:80},src:"https://gw.alipayobjects.com/zos/rmsportal/pdFARIqkrKEGVVEwotFe.svg",className:"spe am-icon am-icon-md",alt:""}),title:"\u652f\u4ed8\u6210\u529f",message:a===i?Object(B.jsxs)("div",{children:[a,"\u5143"]}):Object(B.jsxs)("div",{children:[a,"\u5143 ",Object(B.jsxs)("del",{children:[i,"\u5143"]})]})})]})},Gi="cgetorderlisterr",_i="CgetORDERlist",Fi="CgetORDERlistsuc",zi="CORDERedit",Bi="CORDEREDITSUC",Pi="CORDEREDITERR",qi=(n(2920),Object(ee.b)((function(e){return{orderlist:e.chef.orderlist}}),(function(e){return{GetOrder:function(t){e({type:_i,url:Se,data:t})},UpdateOrder:function(t){e({type:zi,url:"/chef/order/edit",data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=[{title:"\u83dc\u540d",dataIndex:"name",key:"name"},{title:"\u6570\u91cf",dataIndex:"num",key:"num"},{title:"\u64cd\u4f5c",key:"action",dataIndex:"tableID",render:function(t,n){return Object(B.jsx)("a",{onClick:function(){!function(t,n){e.UpdateOrder(t)}(n)},children:Object(B.jsx)(ys.a,{checkedChildren:"\u5b8c\u6210",checked:1===n.status,unCheckedChildren:"\u5f85\u505a"})})}}];return Object(q.useEffect)((function(){var t=new WebSocket("".concat(Te,"/chef/order"));t.addEventListener("open",(function(e){console.log("socket is open"),t.send("\u8fde\u63a5\u6210\u529f")})),t.addEventListener("message",(function(e){console.log("Message from server",e.data),"websocket connected"!==e.data&&r(JSON.parse(e.data))})),e.GetOrder()}),[]),Object(q.useMemo)((function(){r(e.orderlist)}),[e.orderlist]),Object(B.jsx)("div",{children:Object(B.jsx)(Va.a,{grid:{column:1},dataSource:a,renderItem:function(e){return Object(B.jsx)(Va.a.Item,{children:Object(B.jsx)(lt.a,{style:{overflow:"scroll"},title:Object(B.jsxs)(tn.a,{color:"#2db7f5",children:[e.tableID," \u53f7\u684c"]}),extra:Object(B.jsx)(tn.a,{color:"orange-inverse",children:an()(e.fromNow).fromNow()}),children:Object(B.jsx)(tt.a,{rowKey:e.tableID,pagination:!1,columns:c,dataSource:e.order})})})}})})}))),Wi=(n(2921),n(808)),Hi=n.n(Wi),Vi=(n(2923),n(809)),Ji=n.n(Vi),Yi="SEARCHDISH",Ki="SEARCHDISHSUC",Qi="SEARCHDISHERR",Xi=n(810),Zi=n.n(Xi);function $i(){var e=Object(ae.a)(["\n  .am-card {\n    width: 92vw;\n  }\n\n  .dish-titles {\n    font-size: 1.1rem;\n  }\n\n  .dish-prices {\n    top: 2rem;\n    font-size: 1rem;\n  }\n\n  .am-stepper-input {\n    display: none;\n  }\n\n  .am-stepper-handler-wrap {\n    position: absolute;\n    width: 77%;\n    bottom: .2rem;\n  }\n\n  .content {\n    padding: 1rem;\n    margin-top: -0.7rem;\n    width: 100vw\n  }\n\n  .bottom {\n    position: fixed;\n    bottom: 0;\n    width: 100vw;\n    height: 9rem;\n    background-color: #fff;\n    border-top-left-radius: .7rem;\n    border-top-right-radius: .7rem;\n\n\n    div:first-child {\n      text-align: center;\n      padding: .7rem 0;\n\n      span {\n        font-size: 1.5rem;\n        color: #dabb91;\n      }\n    }\n\n    .btn {\n      margin: 0 1rem 0 1rem;\n      background-color: #dabb91;\n      color: white;\n      border-radius: 3rem;\n    }\n  }\n\n  .shop-car {\n    position: fixed;\n    right: 1.4rem;\n    bottom: 7rem;\n    z-index: 99999;\n  }\n"]);return $i=function(){return e},e}var eo=re.a.div($i()),to=Object(ee.b)((function(e){return{searchlist:e.search.searchlist||[],shopcar:e.home.shopcar||[]}}),(function(e){return{searchDish:function(t){e({type:Yi,data:t,url:"/home/dish/search"})}}}))((function(e){var t=Object(Le.g)(),n=Object(q.useRef)("input"),a=Object(q.useState)([]),r=Object(ft.a)(a,2),c=r[0],s=r[1],i=Object(q.useState)(0),o=Object(ft.a)(i,2),l=o[0],u=o[1];Object(q.useEffect)((function(){var e=JSON.parse(Re("shopcar"));if(e){var t=e.reduce((function(e,t){return e+t.num}),0);u(t)}else u(0)}),[e.shopcar]),Object(q.useEffect)((function(){n.current.focus()}),[]),Object(q.useMemo)((function(){s(e.searchlist)}),[e]);var d=Zi()((function(t){if(0!==t.trim().length)return e.searchDish(t);s([])}),200);return Object(B.jsxs)(eo,{children:[Object(B.jsx)(cc.a,{mode:"light",icon:Object(B.jsx)(lc.a,{type:"left"}),onLeftClick:function(){return t.goBack()},children:"\u83dc\u54c1\u641c\u7d22"}),Object(B.jsx)(Ji.a,{onChange:d,placeholder:"\u6309\u83dc\u54c1\u540d\u641c\u7d22",ref:n}),Object(B.jsx)(Hi.a,{size:"lg",children:Object(B.jsx)(Ic,{dish:c})}),Object(B.jsx)(Jr.a,{className:"shop-car",style:{textAlign:"center"},count:l,children:Object(B.jsx)("div",{onClick:function(){if(0===l)return ic.a.info("\u8d2d\u7269\u8f66\u7a7a\u7a7a\u5982\u4e5f...",1);t.push("/home/shopcar")},children:Object(B.jsx)(Kr.a,{style:{backgroundColor:"#fff",color:"#000"},size:"large",icon:Object(B.jsx)(Oc.a,{})})})})]})})),no="Wgetqrcode",ao="Wgetqrcodesuc",ro="Wgetqrcodeerr",co="Wgettable",so="Wgettablesuc",io="Wgettableerr",oo="Wgettstaffsuc";function lo(){var e=Object(ae.a)(["\n\n  .card {\n    height: 14vh;\n    cursor: pointer;\n    text-align: center;\n  }\n\n  /deep/ .ant-btn {\n    border-radius: 6px;\n  }\n"]);return lo=function(){return e},e}var uo=re.a.div(lo()),bo=Object(ee.b)((function(e){return{url:e.waiterTable.url,urlArray:e.waiterTable.urlArray,tableList:e.waiterTable.tableList,staffList:e.waiterTable.staffList,addTStatus:e.waiterTable.addTStatus,delTStatus:e.waiterTable.delTStatus,errorMsgT:e.waiterTable.errorMsgT,editTStatus:e.waiterTable.editTStatus}}),(function(e){return{getQR:function(t){e({type:no,url:"/waiter/qrcode",data:t})},getTable:function(){e({type:co,url:"/waiter/table"})}}}))((function(e){var t=Object(q.useState)(!1),n=Object(ft.a)(t,2),a=(n[0],n[1]),r=Object(q.useState)(""),c=Object(ft.a)(r,2),s=(c[0],c[1],Object(q.useState)(!1)),i=Object(ft.a)(s,2),o=i[0],l=i[1],u=Object(q.useState)({_id:"",status:void 0,tableID:void 0,staff:"",staffId:"",canSeat:void 0}),d=Object(ft.a)(u,2),b=d[0],j=d[1];function f(t){var n=t.tableID;e.getQR(n);var a=JSON.parse(JSON.stringify(t));a.staffId=a.staff,a.staff=p.find((function(e){return e._id===a.staff})).name,console.log(a),j(a),l(!0)}Object(q.useEffect)((function(){var t=e.errorMsgT,n=e.addTStatus,r=e.delTStatus,c=e.editTStatus,s=Re("addTStatus"),i=Re("delTStatus"),o=Re("editTStatus");s==n||(console.log(e),console.log(t),we("addTStatus",n),n<1?$.a.success("\u9910\u684c\u6dfb\u52a0\u6210\u529f"):t&&t.includes("\u5b58\u5728")&&$.a.info("\u6b64\u9910\u684c\u5df2\u5b58\u5728\uff01")),i==r||(we("delTStatus",r),r<1&&$.a.success("\u9910\u684c\u5220\u9664\u6210\u529f"),a(!1),l(!1)),o==c||(we("editTStatus",c),c<1&&$.a.success("\u9910\u684c\u4fe1\u606f\u4fee\u6539\u6210\u529f"),a(!1),l(!1))}),[e]),Object(q.useEffect)((function(){e.getTable(),console.log(e)}),[]);var O=e.url,h=e.tableList,p=e.staffList;return console.log(e),Object(B.jsx)(De.a,{title:"\u9910\u684c\u5217\u8868",children:Object(B.jsxs)(uo,{children:[Object(B.jsx)(lt.a,{title:"\u9910\u684c\u7ba1\u7406",children:Object(B.jsx)(Va.a,{grid:{gutter:16,column:8},dataSource:h,renderItem:function(e){return Object(B.jsxs)(Va.a.Item,{children:[0===e.status&&Object(B.jsxs)(lt.a,{hoverable:!0,style:{backgroundColor:"#f1f2f6"},className:"card",onClick:function(){return f(e)},children:[Object(B.jsx)("h2",{children:e.tableID}),Object(B.jsxs)("span",{children:["\u7a7a\u4f4d ",e.canSeat,"\u4eba"]})]}),1===e.status&&Object(B.jsxs)(lt.a,{onClick:function(){return f(e)},hoverable:!0,style:{backgroundColor:"#F9F5E9"},className:"card",children:[Object(B.jsx)("h2",{children:e.tableID}),Object(B.jsxs)("span",{children:["\u5360\u7528 ",e.canSeat,"\u4eba"]})]})]})}})}),Object(B.jsxs)(Vn.a,{title:"\u9910\u684c\u8be6\u60c5",placement:"right",closable:!1,width:700,onClose:function(){l(!1),j({_id:"",status:void 0,tableID:void 0,staff:"",staffId:"",canSeat:void 0})},visible:o,children:[Object(B.jsxs)(Sr.a,{children:[Object(B.jsx)(Sr.a.Item,{label:"\u9910\u684c\u53f7",children:b.tableID}),Object(B.jsxs)(Sr.a.Item,{label:"\u4f7f\u7528\u72b6\u6001",children:[0===b.status&&"\u4f7f\u7528\u4e2d",1===b.status&&"\u7a7a\u95f2\u4e2d"]}),Object(B.jsx)(Sr.a.Item,{label:"\u8d1f\u8d23\u4eba",children:b.staff})]}),Object(B.jsxs)("div",{style:{position:"relative"},children:[Object(B.jsx)("div",{children:"\u9910\u684c\u4e8c\u7ef4\u7801:"}),Object(B.jsx)("img",{width:200,height:200,style:{marginLeft:220},src:"data:image/png;base64,".concat(O),alt:"\u56fe\u7247\u8d70\u4e22\u4e86..."}),Object(B.jsx)("div",{children:Object(B.jsx)("a",{href:"data:image/png;base64,".concat(O),download:"".concat(b.tableID,"\u53f7\u9910\u684c\u4e8c\u7ef4\u7801"),children:Object(B.jsx)(J.a,{style:{borderRadius:6,position:"absolute",left:280,bottom:-50},icon:Object(B.jsx)(ui.a,{}),children:"\u4e0b\u8f7d"})})})]})]})]})})})),jo="WGETCUSCATELISTERR",fo="WGETCUSCATELIST",Oo="WGETCUSCATELISTSUC",ho={list:[],CcateList:[],addCcateStatus:99999,errorMsgCcate:"",delCcateStatus:99999,editCcateStatus:99999},po=Ue.a.mark(mo);function mo(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5207\u6362\uff0c\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=10;break}return n.next=8,Object(Ge.a)({type:Oo,data:t});case 8:n.next=10;break;case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(0);case 14:case"end":return n.stop()}}),po,null,[[0,12]])}function xo(){var e=Object(ae.a)(["\n  /deep/ .ant-card-body {\n    height: 100%;\n  }\n;\n\n  cursor: pointer;\n\n  .plus {\n    font-size: 25px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .card {\n    width: 100%;\n    height: 120px;\n  }\n"]);return xo=function(){return e},e}var go=re.a.div(xo()),vo=Object(ee.b)((function(e){return{list:e.wcuscate.list||[]}}),(function(e){return{toggleCusCatePage:function(t){e({type:fo,url:"/waiter/customer/cate",data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)({query:"",page:1,pagesize:10}),s=Object(ft.a)(c,2),i=s[0];s[1];return Object(q.useEffect)((function(){e.toggleCusCatePage(i),console.log(e);var t=e.list.records;r(t)}),[e.list.total,e.list.page,e.list.size]),Object(B.jsx)(De.a,{title:"\u4f1a\u5458\u7c7b\u522b",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsx)(lt.a,{title:"\u4f1a\u5458\u7c7b\u522b",children:Object(B.jsx)(Va.a,{grid:{gutter:16,column:4},dataSource:a,renderItem:function(e){return Object(B.jsx)(Va.a.Item,{children:Object(B.jsx)(go,{children:Object(B.jsxs)(lt.a,{className:"card",style:{position:"relative"},children:[Object(B.jsx)("div",{style:{marginTop:-14,fontWeight:600},children:null===e||void 0===e?void 0:e.name}),Object(B.jsx)("div",{style:{textAlign:"center",paddingTop:"8%"},children:Object(B.jsxs)("div",{style:{color:"red"},children:[null===e||void 0===e?void 0:e.discount,"\u6298"]})})]},e.name)})})}})})})})})),yo="WGETCUSLISTERR",So="WGETCUSLIST",Co="WGETCUSLISTSUC",Eo="WGETCUSCATESUC",To="WCUSADD",ko="WCUSADDSUC",Do="WCUSADDERR",wo={list:[],cateList:[],addCStatus:99999,errorMsgC:"",delCStatus:99999,editCStatus:99999},Ro=Ue.a.mark(Lo),Io=Ue.a.mark(No);function Lo(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u5207\u6362\uff0c\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=4,Be(e.url,e.data);case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=11;break}return n.next=9,Object(Ge.a)({type:Co,data:t});case 9:n.next=11;break;case 11:n.next=15;break;case 13:n.prev=13,n.t0=n.catch(0);case 15:case"end":return n.stop()}}),Ro,null,[[0,13]])}function No(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589esaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),!t.status||-7===t.status){n.next=15;break}return n.next=9,Object(Ge.a)({type:ko,data:t});case 9:return console.log("\u6dfb\u52a0\u6210\u529f"),n.next=12,Object(Ge.a)({type:So,url:ve});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=18;break;case 15:return console.log("\u53d1\u9001\u4e86\u6dfb\u52a0\u9519\u8bef\u7684action"),n.next=18,Object(Ge.a)({type:Do,data:t});case 18:n.next=22;break;case 20:n.prev=20,n.t0=n.catch(0);case 22:case"end":return n.stop()}}),Io,null,[[0,20]])}var Ao=Xn.a.Option,Mo=Object(ee.b)((function(e){return{list:e.wcuslist.list||[],cateList:e.wcuslist.cateList,addCStatus:e.wcuslist.addCStatus,delCStatus:e.wcuslist.delCStatus,errorMsgC:e.wcuslist.errorMsgC,editCStatus:e.wcuslist.editCStatus}}),(function(e){return{toggleCusPage:function(t){e({type:So,url:ve,data:t})},addCus:function(t){e({type:To,url:"/waiter/customer/add",data:t})}}}))((function(e){var t=Object(q.useState)([]),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(q.useState)(!1),s=Object(ft.a)(c,2),i=s[0],o=s[1],l=Object(q.useState)(""),u=Object(ft.a)(l,2),d=u[0],b=u[1],j=Object(q.useState)({_id:"",name:"",level:"",status:0,telephone:0}),f=Object(ft.a)(j,2),O=f[0],h=f[1],p=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u4f1a\u5458\u7c7b\u522b",key:"level",dataIndex:"level",render:function(e){return Object(B.jsx)(B.Fragment,{children:null===e||void 0===e?void 0:e.name})}},{title:"\u6298\u6263",key:"level",dataIndex:"level",render:function(e){return Object(B.jsx)(B.Fragment,{children:null===e||void 0===e?void 0:e.discount})}},{title:"\u6d88\u8d39\u6b21\u6570",key:"xftimes",dataIndex:"xftimes"},{title:"\u624b\u673a\u53f7\u7801",key:"telephone",dataIndex:"telephone"},{title:"\u72b6\u6001",key:"status",dataIndex:"status",render:function(e){return Object(B.jsxs)(B.Fragment,{children:[1===e&&"\u6b63\u5e38",0===e&&"\u6302\u5931",-1===e&&"\u505c\u7528"]})}}],m=function(){console.log("Clicked cancel button"),o(!1)},x=Object(q.useState)({query:"",page:1,pagesize:10}),g=Object(ft.a)(x,2),v=g[0],y=g[1];Object(q.useEffect)((function(){e.toggleCusPage(v);var t=e.list.records;r(t)}),[e.list.total,e.list.page,e.list.size]),Object(q.useMemo)((function(){var t=e.list.records;r(t)}),[e.list]),Object(q.useEffect)((function(){var t=e.errorMsgC,n=e.addCStatus,a=e.delCStatus,r=e.editCStatus,c=Re("addCStatus"),s=Re("delCStatus"),i=Re("editCStatus");c==n||(we("addCStatus",n),n<1?$.a.success("\u4f1a\u5458\u6dfb\u52a0\u6210\u529f\uff01"):t&&t.includes("\u5b58\u5728")&&$.a.warning("\u6b64\u4f1a\u5458\u8d26\u53f7\u5df2\u5b58\u5728")),s==a||(we("delCStatus",a),a<1&&$.a.success("\u4f1a\u5458\u5220\u9664\u6210\u529f\uff01")),i==r||(we("editCStatus",r),r<1&&$.a.success("\u8d44\u6599\u4fee\u6539\u6210\u529f\uff01"))}),[e.addCStatus,e.delCStatus,e.editCStatus]);var S=Object(q.useState)([]),C=Object(ft.a)(S,2),E=C[0],T=C[1],k=Object(q.useState)(""),D=Object(ft.a)(k,2),w=D[0],R=D[1];return Object(q.useEffect)((function(){T(E),0===E.length?R("none"):R("")}),[E]),Object(q.useEffect)((function(){y(v),e.toggleCusPage(v)}),[v]),Object(q.useEffect)((function(){var t=e.list.records;r(t)}),[e.list.records]),Object(q.useEffect)((function(){var t=e.errorMsgC,n=e.addCStatus;Re("addCStatus")==n||(we("addCStatus",n),n<1?$.a.success("\u4f1a\u5458\u6dfb\u52a0\u6210\u529f\uff01"):t&&t.includes("\u5b58\u5728")&&$.a.warning("\u6b64\u4f1a\u5458\u8d26\u53f7\u5df2\u5b58\u5728"))}),[e.addCStatus]),Object(B.jsx)(De.a,{title:"\u4f1a\u5458 > \u8d44\u6599",children:Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(lt.a,{title:"\u4f1a\u5458\u6863\u6848",extra:Object(B.jsx)(J.a,{type:"primary",onClick:function(){o(!0),b("\u65b0\u589e\u4f1a\u5458")},style:{borderRadius:5},children:"\u65b0\u589e"}),style:{width:"100%"},children:[Object(B.jsx)(bn,{delSelected:function(){var t=E.map((function(e){return e._id})).join("-");e.delCus(t),R("none")},barVisible:w,editBtn:function(){var e;e=E[0],console.log(e),o(!0),b("\u7f16\u8f91\u4f1a\u5458"),h({_id:e._id,name:e.name,level:e.level._id,telephone:e.telephone,status:e.status})},Search:function(e){y({page:1,pagesize:10,query:e})},title:"\u624b\u673a\u53f7\u7801"}),a&&Object(B.jsx)(tt.a,{rowKey:"_id",bordered:!0,columns:p,dataSource:a,pagination:!1}),a&&Object(B.jsx)(on,{page:e.list.page,total:e.list.total,fun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e.toggleCusPage(v),y({query:v.query,page:t,pagesize:n})}}),Object(B.jsx)(Xt.a,{title:d,visible:i,onCancel:m,destroyOnClose:!0,footer:null,children:Object(B.jsxs)(K.a,{onFinish:function(t){"\u65b0\u589e\u4f1a\u5458"===d?(e.addCus(t),o(!1)):(t._id=O._id,console.log(t),e.editCus(t),o(!1))},children:["\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{label:"\u59d3\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:Object(B.jsx)(X.a,{autoFocus:!0,placeholder:"\u59d3\u540d"})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.name,label:"\u59d3\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:Object(B.jsx)(X.a,{autoFocus:!0,placeholder:"\u59d3\u540d"})}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{label:"\u624b\u673a",name:"telephone",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}],children:Object(B.jsx)(X.a,{type:"number",placeholder:"\u624b\u673a\u53f7\u7801"})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.telephone,label:"\u624b\u673a",name:"telephone",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}],children:Object(B.jsx)(X.a,{type:"number",placeholder:"\u624b\u673a\u53f7\u7801"})}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{name:"level",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(B.jsx)(Xn.a,{placeholder:"\u4f1a\u5458\u7c7b\u522b",children:e.cateList&&e.cateList.map((function(e){return Object(B.jsx)(Ao,{value:e._id,children:e.name},e._id)}))})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.level,name:"level",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(B.jsx)(Xn.a,{placeholder:"\u4f1a\u5458\u7c7b\u522b",children:e.cateList&&e.cateList.map((function(e){return Object(B.jsx)(Ao,{value:e._id,children:e.name},e._id)}))})}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:1,label:"\u72b6\u6001",style:{marginLeft:10},name:"status",children:Object(B.jsxs)(Xn.a,{placeholder:"\u72b6\u6001",children:[Object(B.jsx)(Ao,{value:1,children:"\u6b63\u5e38"}),Object(B.jsx)(Ao,{value:0,children:"\u6302\u5931"}),Object(B.jsx)(Ao,{value:-1,children:"\u505c\u7528"})]})}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(K.a.Item,{initialValue:O.status,label:"\u72b6\u6001",style:{marginLeft:10},name:"status",children:Object(B.jsxs)(Xn.a,{placeholder:"\u72b6\u6001",children:[Object(B.jsx)(Ao,{value:1,children:"\u6b63\u5e38"}),Object(B.jsx)(Ao,{value:0,children:"\u6302\u5931"}),Object(B.jsx)(Ao,{value:-1,children:"\u505c\u7528"})]})}),Object(B.jsx)(K.a.Item,{style:{marginBottom:4},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:m,children:"\u53d6\u6d88"}),"\u65b0\u589e\u4f1a\u5458"===d&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u6dfb\u52a0"}),"\u7f16\u8f91\u4f1a\u5458"===d&&Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})]})})]})})]})})})})),Uo=[{path:"/",redirect:"/login",component:Ne,exact:!0},{path:"/home",component:Mc,exact:!0},{path:"/home/shopcar",component:Xc,exact:!0},{path:"/prehome/:id",component:gs,exact:!0},{path:"/home/orderdetail/:type",component:Rs,exact:!0},{path:"/home/search",component:to,exact:!0},{path:"/notfound",component:pi,exact:!0},{path:"/noauth",component:mi,exact:!0},{path:"/pay",component:Ui,exact:!0}],Go=[{path:"/admin/dashboard",component:Tt,exact:!0},{path:"/admin/staffs",component:jn,exact:!0},{path:"/admin/dishes",component:ea,exact:!0},{path:"/admin/dishes/category",component:fa,exact:!0},{path:"/admin/customer/cate",component:Xa,exact:!0},{path:"/admin/customer",component:vr,exact:!0},{path:"/admin/orders",component:Ur,exact:!0},{path:"/admin/table",component:fi,exact:!0}],_o=[{path:"/chef/orders",component:qi,exact:!0}],Fo=[{path:"/waiter/orders",component:Ii,exact:!0},{path:"/waiter/table",component:bo,exact:!0},{path:"/waiter/customer/cate",component:vo,exact:!0},{path:"/waiter/customer",component:Mo,exact:!0}],zo=(n(470),n(494)),Bo=n.n(zo),Po=(n(2928),n(489)),qo=n.n(Po),Wo=(n(2930),n(114)),Ho=n.n(Wo),Vo=(n(2932),n(254)),Jo=n.n(Vo),Yo=n(2972),Ko=n(2973),Qo=n(2974),Xo=n(2975),Zo=n(2976),$o=n(2977),el=n.p+"static/media/logo_small.082d41f6.png",tl=(n(2934),n(811)),nl=n.n(tl),al="edituserinfo",rl="edituserinfosuc",cl="edituserinfoerr",sl=function(e){var t=Object(q.useState)(an()(Date.now()).format("YYYY-MM-DD HH:mm:ss")),n=Object(ft.a)(t,2),a=n[0],r=n[1];return setInterval((function(){r(an()(Date.now()).format("YYYY-MM-DD HH:mm:ss"))}),1e3),Object(B.jsx)("div",{children:Object(B.jsx)("span",{style:{fontSize:16},children:a})})},il=Jo.a.Header,ol=Jo.a.Content,ll=Jo.a.Footer,ul=Jo.a.Sider,dl=Ho.a.SubMenu,bl=Object(ee.b)((function(e){return{topBarEditState:e.topBarEditInfo.topBarEditState,tberr:e.topBarEditInfo.tberr}}),(function(e){return{editInfo:function(t){e({type:al,url:"/admin/staff/pwd",data:t})}}}))((function(e){var t=Object(q.useState)(!1),n=Object(ft.a)(t,2),a=n[0],r=n[1],c=Object(Le.g)(),s=Object(Le.h)().pathname;new nl.a({bottom:"30px",right:"32px",left:"unset",time:"0.5s",mixColor:"#fff",backgroundColor:"#fff",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!1,label:"\ud83c\udf13",autoMatchOsTheme:!0}).showWidget();var i=Object(B.jsxs)("div",{className:"contentss",children:[Object(B.jsx)("p",{onClick:function(){O(!0)},children:"\u4e2a\u4eba\u8d44\u6599"}),Object(B.jsx)("p",{onClick:function(){x(!0)},children:"\u4fee\u6539\u5bc6\u7801"}),Object(B.jsx)("p",{onClick:function(){Ie("userInfo"),Ie("token"),Ie("topBarEditState"),c.push("/")},children:"\u9000\u51fa\u767b\u5f55"})]}),o=Object(q.useState)({name:void 0,account:void 0,role:void 0,joinTime:void 0,status:void 0}),l=Object(ft.a)(o,2),u=l[0],d=l[1];Object(q.useEffect)((function(){var e=JSON.parse(Re("userInfo"));console.log(e),d(e)}),[]);var b=Object(q.useState)(!1),j=Object(ft.a)(b,2),f=j[0],O=j[1],h=Object(q.useState)(!1),p=Object(ft.a)(h,2),m=p[0],x=p[1];return Object(q.useEffect)((function(){var t=e.topBarEditState,n=e.tberr;console.log(n),Re("topBarEditStatus")==t||(we("topBarEditState",t),t<1?($.a.success("\u5bc6\u7801\u4fee\u6539\u6210\u529f"),x(!1)):"\u521d\u59cb\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801"===n?$.a.warn("\u521d\u59cb\u5bc6\u7801\u9519\u8bef"):"\u8bf7\u5148\u767b\u5f55"===n?$.a.error("\u8bf7\u5148\u767b\u5f55"):"\u65b0\u65e7\u5bc6\u7801\u4e00\u81f4\uff0c\u65e0\u9700\u66f4\u6539"===n?$.a.warn("\u65b0\u65e7\u5bc6\u7801\u4e00\u81f4\uff0c\u65e0\u9700\u66f4\u6539"):"\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"===n&&$.a.warn("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"))}),[e.topBarEditState,e.tberr]),Object(B.jsx)($e.a,{locale:Ot.a,children:Object(B.jsxs)(Jo.a,{style:{minHeight:"100vh"},children:[Object(B.jsxs)(ul,{collapsible:!0,collapsed:a,onCollapse:function(){r(!a)},children:[Object(B.jsx)("div",{className:"logo",children:Object(B.jsx)("img",{style:{cursor:"pointer"},className:"bigLogo",src:el,alt:"logo"})}),u&&"admin"===u.role&&Object(B.jsxs)(Ho.a,{theme:"dark",defaultSelectedKeys:[s],mode:"inline",children:[Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)(Yo.a,{}),onClick:function(){c.push("/admin/dashboard")},children:"\u7edf\u8ba1"},"/admin/dashboard"),Object(B.jsxs)(dl,{icon:Object(B.jsx)(Ko.a,{}),title:"\u83dc\u54c1",children:[Object(B.jsx)(Ho.a.Item,{onClick:function(){c.push("/admin/dishes")},children:"\u83dc\u54c1\u5217\u8868"},"/admin/dishes"),Object(B.jsx)(Ho.a.Item,{onClick:function(){c.push("/admin/dishes/category")},children:"\u83dc\u54c1\u5206\u7c7b"},"/admin/dishes/category")]},"sub122"),Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)(Qo.a,{}),onClick:function(){c.push("/admin/orders")},children:"\u8ba2\u5355"},"/admin/orders"),Object(B.jsxs)(dl,{icon:Object(B.jsx)(Xo.a,{}),title:"\u4f1a\u5458",children:[Object(B.jsx)(Ho.a.Item,{onClick:function(){c.push("/admin/customer")},children:"\u4f1a\u5458\u8d44\u6599"},"/admin/customer"),Object(B.jsx)(Ho.a.Item,{onClick:function(){c.push("/admin/customer/cate")},children:"\u4f1a\u5458\u7c7b\u522b"},"/admin/customer/cate")]},"sub2453"),Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)(Zo.a,{}),onClick:function(){c.push("/admin/staffs")},children:"\u804c\u5de5"},"/admin/staffs"),Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)($o.a,{}),onClick:function(){c.push("/admin/table")},children:"\u9910\u684c"},"/admin/table")]}),u&&"chef"===u.role&&Object(B.jsx)(Ho.a,{theme:"dark",defaultSelectedKeys:[s],mode:"inline",children:Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)(Qo.a,{}),onClick:function(){c.push("/chef/orders")},children:"\u8ba2\u5355"},"/chef/orders")}),u&&"waiter"===u.role&&Object(B.jsxs)(Ho.a,{theme:"dark",defaultSelectedKeys:[s],mode:"inline",children:[Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)(Qo.a,{}),onClick:function(){c.push("/waiter/orders")},children:"\u8ba2\u5355"},"/waiter/orders"),Object(B.jsx)(Ho.a.Item,{icon:Object(B.jsx)($o.a,{}),onClick:function(){c.push("/waiter/table")},children:"\u9910\u684c"},"/waiter/table"),Object(B.jsxs)(dl,{icon:Object(B.jsx)(Xo.a,{}),title:"\u4f1a\u5458",children:[Object(B.jsx)(Ho.a.Item,{onClick:function(){c.push("/waiter/customer")},children:"\u4f1a\u5458\u8d44\u6599"},"/waiter/customer"),Object(B.jsx)(Ho.a.Item,{onClick:function(){c.push("/waiter/customer/cate")},children:"\u4f1a\u5458\u7c7b\u522b"},"/waiter/customer/cate")]},"sub2453")]})]}),Object(B.jsxs)(Jo.a,{className:"site-layout",children:[Object(B.jsxs)(il,{className:"site-layout-background",children:[Object(B.jsx)("div",{children:"\u8d77\u4e2a\u4ec0\u4e48\u540d\u540e\u53f0"}),Object(B.jsx)("div",{className:"time",children:Object(B.jsx)(sl,{})}),Object(B.jsx)("div",{className:"avatar",children:Object(B.jsx)(Bo.a,{placement:"leftTop",content:i,title:"\u6b22\u8fce\u60a8\uff1a",children:Object(B.jsx)(Kr.a,{size:"large",style:{backgroundColor:"#2ed573"},children:null===u||void 0===u?void 0:u.name})})})]}),Object(B.jsx)(ol,{style:{margin:"16px 16px"},children:Object(B.jsx)("div",{style:{minHeight:780,height:"100%"},children:e.children})}),Object(B.jsx)(ll,{style:{textAlign:"center"},children:"Copyright \xa9 2021 \u9648\u76f8\u6750 "})]}),Object(B.jsx)(Xt.a,{visible:f,destroyOnClose:!0,onCancel:function(){O(!1)},footer:null,children:Object(B.jsxs)(Sr.a,{bordered:!0,size:"small",title:"\u4e2a\u4eba\u4fe1\u606f",children:[Object(B.jsx)(Sr.a.Item,{label:"\u5de5\u53f7",children:null===u||void 0===u?void 0:u.account}),Object(B.jsx)(Sr.a.Item,{label:"\u59d3\u540d",children:null===u||void 0===u?void 0:u.name}),Object(B.jsxs)(Sr.a.Item,{label:"\u5c97\u4f4d",children:["admin"===u.role&&Object(B.jsx)(tn.a,{color:"#108ee9",children:"\u7ba1\u7406\u5458"}),"chef"===u.role&&Object(B.jsx)(tn.a,{color:"#9c90da",children:"\u53a8\u5e08"}),"waiter"===u.role&&Object(B.jsx)(tn.a,{color:"#108ee9",children:"\u670d\u52a1\u5458"})]}),Object(B.jsxs)(Sr.a.Item,{label:"\u5728\u804c\u72b6\u6001",children:[1===(null===u||void 0===u?void 0:u.status)&&"\u5728\u804c",0===(null===u||void 0===u?void 0:u.status)&&"\u8bf7\u5047"]}),Object(B.jsx)(Sr.a.Item,{label:"\u5165\u804c\u65f6\u95f4",children:an()(null===u||void 0===u?void 0:u.joinTime).format("YYYY-MM-DD HH:mm:ss")})]})}),Object(B.jsx)(Xt.a,{visible:m,destroyOnClose:!0,onCancel:function(){x(!1)},title:"\u5bc6\u7801\u4fee\u6539",footer:null,children:Object(B.jsxs)(K.a,{onFinish:function(t){console.log(t),t.confirmPwd===t.newPwd?e.editInfo(t):qo.a.warning({message:"\u5bc6\u7801\u4e0d\u4e00\u81f4",description:"\u8bf7\u786e\u8ba4\u60a8\u8f93\u5165\u7684\u4e24\u6b21\u5bc6\u7801\u662f\u5426\u4e00\u81f4"})},children:[Object(B.jsx)(K.a.Item,{name:"lastPwd",label:"\u521d\u59cb\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}],children:Object(B.jsx)(X.a.Password,{type:"password"})}),Object(B.jsx)(K.a.Item,{name:"newPwd",label:"\u65b0\u7684\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u5417"}],children:Object(B.jsx)(X.a.Password,{type:"password"})}),Object(B.jsx)(K.a.Item,{name:"confirmPwd",label:"\u786e\u8ba4\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\u4ee5\u786e\u8ba4"}],children:Object(B.jsx)(X.a.Password,{type:"password"})}),Object(B.jsx)(K.a.Item,{style:{marginBottom:-6},children:Object(B.jsxs)($t.a,{style:{float:"right"},children:[Object(B.jsx)(J.a,{type:"default",onClick:function(){x(!1)},children:"\u5173\u95ed"}),Object(B.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})]})})]})})]})})})),jl=function(){return function(){var e=JSON.parse(Re("userInfo"));return!(0===(null===e||void 0===e?void 0:e.status)||"admin"!==(null===e||void 0===e?void 0:e.role)||!Re("token"))}()?Object(B.jsx)(bl,{children:Object(B.jsxs)(Le.d,{children:[Go.map((function(e){return Object(B.jsx)(Le.b,{path:e.path,exact:e.exact,render:function(t){return Object(B.jsx)(e.component,Object(P.a)({},t))}},e.path)})),Object(B.jsx)(Le.a,{from:"/admin",to:Go[0].path}),Object(B.jsx)(Le.a,{to:"/notauth"})]})}):function(){var e=JSON.parse(Re("userInfo"));return!(0===(null===e||void 0===e?void 0:e.status)||"chef"!==(null===e||void 0===e?void 0:e.role)||!Re("token"))}()?Object(B.jsx)(bl,{children:Object(B.jsxs)(Le.d,{children:[_o.map((function(e){return Object(B.jsx)(Le.b,{path:e.path,exact:e.exact,render:function(t){return Object(B.jsx)(e.component,Object(P.a)({},t))}},e.path)})),Object(B.jsx)(Le.a,{from:"/chef",to:_o[0].path}),Object(B.jsx)(Le.a,{to:"/notauth"})]})}):function(){var e=JSON.parse(Re("userInfo"));return!(0===(null===e||void 0===e?void 0:e.status)||"waiter"!==(null===e||void 0===e?void 0:e.role)||!Re("token"))}()?Object(B.jsx)(bl,{children:Object(B.jsxs)(Le.d,{children:[Fo.map((function(e){return console.log(e),Object(B.jsx)(Le.b,{path:e.path,exact:e.exact,render:function(t){return Object(B.jsx)(e.component,Object(P.a)({},t))}},e.path)})),Object(B.jsx)(Le.a,{from:"/waiter",to:Fo[0].path}),Object(B.jsx)(Le.a,{to:"/notauth"})]})}):Object(B.jsx)(Le.a,{to:"/noauth"})},fl=n(152),Ol=n(185),hl={topBarEditState:7,tberr:""},pl=Ue.a.mark(ml);function ml(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539\u4e2a\u4eba\u4fe1\u606fsaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(t=n.sent,console.log(t),"\u5bc6\u7801\u4fee\u6539\u6210\u529f"!==t.message){n.next=12;break}return console.log(1),n.next=10,Object(Ge.a)({type:rl,data:t});case 10:n.next=15;break;case 12:return console.log(2),n.next=15,Object(Ge.a)({type:cl,data:t});case 15:n.next=19;break;case 17:n.prev=17,n.t0=n.catch(0);case 19:case"end":return n.stop()}}),pl,null,[[0,17]])}var xl={orderlist:[],addOStatus:99999,errorMsgO:"",delOStatus:99999,editCStatus:99999},gl=Ue.a.mark(yl),vl=Ue.a.mark(Sl);function yl(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("getOrder"),n.prev=1,console.log("\u5217\u8868\u9875\u9762saga\u6267\u884c"),n.next=5,Be(e.url,e.data);case 5:if(200!==(t=n.sent).meta.status){n.next=12;break}return n.next=9,Object(Ge.a)({type:Fi,data:t});case 9:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=12;break;case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(1);case 16:case"end":return n.stop()}}),gl,null,[[1,14]])}function Sl(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=12;break}return console.log("\u4fee\u6539\u6210\u529f"),n.next=9,Object(Ge.a)({type:Bi,data:t});case 9:return n.next=11,Object(Ge.a)({type:_i,url:Se});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42");case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),vl,null,[[0,14]])}var Cl={searchlist:[]},El=Ue.a.mark(Tl);function Tl(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,qe({url:e.url},{name:e.data});case 3:if(t=n.sent,console.log("result",t),200!==t.meta.status){n.next=8;break}return n.next=8,Object(Ge.a)({type:Ki,data:t});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(Ge.a)({type:Qi});case 14:case"end":return n.stop()}}),El,null,[[0,10]])}var kl={orderlist:[],dishlist:[]},Dl=Ue.a.mark(Il),wl=Ue.a.mark(Ll),Rl=Ue.a.mark(Nl);function Il(e){var t,n;return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("getOrder"),a.prev=1,console.log("\u5217\u8868\u9875\u9762saga\u6267\u884c"),a.next=5,Be(e.url,e.data);case 5:return t=a.sent,a.next=8,Be("".concat("/waiter/dish"));case 8:if(n=a.sent,200!==t.meta.status||!n.meta.status){a.next=15;break}return a.next=12,Object(Ge.a)({type:vi,data:{result:t,dishlist:n}});case 12:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),a.next=15;break;case 15:a.next=19;break;case 17:a.prev=17,a.t0=a.catch(1);case 19:case"end":return a.stop()}}),Dl,null,[[1,17]])}function Ll(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u4fee\u6539saga\u6267\u884c"),n.next=4,We({url:e.url},e.data);case 4:if(200!==(t=n.sent).meta.status){n.next=12;break}return console.log("\u4fee\u6539\u6210\u529f"),n.next=9,Object(Ge.a)({type:Si,data:t});case 9:return n.next=11,Object(Ge.a)({type:gi,url:Se});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42");case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(0);case 16:case"end":return n.stop()}}),wl,null,[[0,14]])}function Nl(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u65b0\u589esaga\u6267\u884c"),n.next=4,qe({url:e.url},e.data);case 4:if(!(t=n.sent).status){n.next=14;break}return n.next=8,Object(Ge.a)({type:Ti,data:t});case 8:return console.log("\u6dfb\u52a0\u83dc\u54c1\u6210\u529f"),n.next=11,Object(Ge.a)({type:gi,url:Se});case 11:console.log("\u53d1\u9001\u4e86\u83b7\u53d6\u5217\u8868\u7684\u8bf7\u6c42"),n.next=14;break;case 14:n.next=18;break;case 16:n.prev=16,n.t0=n.catch(0);case 18:case"end":return n.stop()}}),Rl,null,[[0,16]])}var Al={url:"",tableList:[],staffList:[],addTStatus:99999,errorMsgT:"",delTStatus:99999,editTStatus:99999,urlArray:[]},Ml=Ue.a.mark(Gl),Ul=Ue.a.mark(_l);function Gl(e){var t;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("\u83b7\u53d6QR saga\u6267\u884c"),n.next=4,Be("".concat(e.url,"/").concat(e.data));case 4:if(t=n.sent,console.log(t),200!==t.meta.status){n.next=11;break}return n.next=9,Object(Ge.a)({type:ao,data:t});case 9:n.next=16;break;case 11:if(201!==t.meta.status){n.next=14;break}n.next=16;break;case 14:return n.next=16,Object(Ge.a)({type:ro,data:t});case 16:n.next=20;break;case 18:n.prev=18,n.t0=n.catch(0);case 20:case"end":return n.stop()}}),Ml,null,[[0,18]])}function _l(e){var t,n,a;return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("\u83b7\u53d6table saga\u6267\u884c"),r.next=4,Be(e.url);case 4:return t=r.sent,console.log(7),console.log(8),r.next=9,Be("/waiter/staff");case 9:return n=r.sent,console.log(9),console.log(n),console.log(10),a=n.user.records.map((function(e){return{name:e.name,_id:e._id}})),console.log(a),r.next=17,Object(Ge.a)({type:oo,data:a});case 17:if(200!==t.meta.status){r.next=23;break}return console.log(11111),r.next=21,Object(Ge.a)({type:so,data:t});case 21:r.next=25;break;case 23:return r.next=25,Object(Ge.a)({type:io,data:t});case 25:r.next=29;break;case 27:r.prev=27,r.t0=r.catch(0);case 29:case"end":return r.stop()}}),Ul,null,[[0,27]])}var Fl=Object(Ol.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(P.a)(Object(P.a)({},e),{},{action:t});case ue:var n=t.data.token,a=t.data.userInfo.role;switch(we("token",n),we("userInfo",t.data.userInfo),a){case"admin":return Object(P.a)(Object(P.a)({},e),{},{status:Math.random()});case"chef":return Object(P.a)(Object(P.a)({},e),{},{status:10*Math.random()});case"waiter":return Object(P.a)(Object(P.a)({},e),{},{status:100*Math.random()})}return Object(P.a)({},e);case de:return Object(P.a)(Object(P.a)({},e),{},{status:1e3*Math.random()});case be:return Object(P.a)(Object(P.a)({},e),{},{status:-1});default:return e}},staff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.user});case Dt:return Object(P.a)(Object(P.a)({},e),{},{action:t});case kt:return Object(P.a)({},e);case It:return Object(P.a)(Object(P.a)({},e),{},{addStatus:Math.random()});case Lt:return Object(P.a)(Object(P.a)({},e),{},{addStatus:10*Math.random(),errorMsg:t.data.message});case At:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.user});case Mt:return Object(P.a)(Object(P.a)({},e),{},{action:t});case Ut:return Object(P.a)(Object(P.a)({},e),{},{delStatus:Math.random()});case Gt:return Object(P.a)(Object(P.a)({},e),{},{delStatus:10*Math.random()});case _t:return Object(P.a)(Object(P.a)({},e),{},{action:t});case Ft:return Object(P.a)(Object(P.a)({},e),{},{editStatus:Math.random()});case zt:return Object(P.a)(Object(P.a)({},e),{},{editStatus:10*Math.random()});default:return e}},dish:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mn:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.dish});case On:return Object(P.a)(Object(P.a)({},e),{},{action:t});case pn:return Object(P.a)(Object(P.a)({},e),{},{cateList:t.data.acategory.records});case Tn:return Object(P.a)(Object(P.a)({},e),{},{delDishStatus:Math.random()});case kn:return Object(P.a)(Object(P.a)({},e),{},{delDishStatus:10*Math.random()});case gn:return Object(P.a)(Object(P.a)({},e),{},{addDishStatus:Math.random()});case vn:return Object(P.a)(Object(P.a)({},e),{},{addDishStatus:10*Math.random(),errorMsgDish:t.data.message});case yn:return Object(P.a)(Object(P.a)({},e),{},{editDishStatus:Math.random()});case Sn:return Object(P.a)(Object(P.a)({},e),{},{errorMsgDish:t.data.message,editDishStatus:10*Math.random()});case Cn:return Object(P.a)(Object(P.a)({},e),{},{action:t});default:return e}},cate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aa:return Object(P.a)(Object(P.a)({},e),{},{categoryList:t.data.acategory});case na:return Object(P.a)(Object(P.a)({},e),{},{action:t});case sa:return Object(P.a)(Object(P.a)({},e),{},{addCateStatus:Math.random()});case ia:return Object(P.a)(Object(P.a)({},e),{},{addCateStatus:10*Math.random(),errorMsgCate:t.data.message});case la:return Object(P.a)(Object(P.a)({},e),{},{editCateStatus:Math.random()});case ua:return Object(P.a)(Object(P.a)({},e),{},{editCateStatus:10*Math.random(),errorMsgCate:t.data.message});case ba:return Object(P.a)(Object(P.a)({},e),{},{delCateStatus:Math.random()});case ja:return Object(P.a)(Object(P.a)({},e),{},{delCateStatus:10*Math.random(),errorMsgCate:t.data.message});default:return e}},cuscate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ta:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.acuscate});case Ea:return Object(P.a)(Object(P.a)({},e),{},{action:t});case Ia:return Object(P.a)(Object(P.a)({},e),{},{delCcateStatus:Math.random()});case La:return Object(P.a)(Object(P.a)({},e),{},{delCcateStatus:10*Math.random()});case Aa:return Object(P.a)(Object(P.a)({},e),{},{addCcateStatus:Math.random()});case Ma:return Object(P.a)(Object(P.a)({},e),{},{addCcateStatus:10*Math.random(),errorMsgCcate:t.data.message});case Da:return Object(P.a)(Object(P.a)({},e),{},{editCcateStatus:Math.random()});case wa:return Object(P.a)(Object(P.a)({},e),{},{editCcateStatus:10*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},cus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case er:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.customer,cateList:t.data.acuscate.records});case tr:return Object(P.a)(Object(P.a)({},e),{},{cateList:t.data.acuscate.records});case sr:return Object(P.a)(Object(P.a)({},e),{},{delCStatus:Math.random()});case ir:return Object(P.a)(Object(P.a)({},e),{},{delCStatus:10*Math.random()});case lr:return Object(P.a)(Object(P.a)({},e),{},{addCStatus:Math.random()});case ur:return Object(P.a)(Object(P.a)({},e),{},{addCStatus:10*Math.random(),errorMsgC:t.data.message});case ar:return Object(P.a)(Object(P.a)({},e),{},{editCStatus:Math.random()});case rr:return Object(P.a)(Object(P.a)({},e),{},{editCStatus:10*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tr:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.order});case Ir:return Object(P.a)(Object(P.a)({},e),{},{delOStatus:Math.random()});case Lr:return Object(P.a)(Object(P.a)({},e),{},{delOStatus:10*Math.random()});case Ar:return Object(P.a)(Object(P.a)({},e),{},{addOStatus:Math.random()});case Mr:return Object(P.a)(Object(P.a)({},e),{},{addOStatus:10*Math.random(),errorMsgO:t.data.message});case Dr:return Object(P.a)(Object(P.a)({},e),{},{editOStatus:Math.random()});case wr:return Object(P.a)(Object(P.a)({},e),{},{editOStatus:10*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return Object(P.a)(Object(P.a)({},e),{},{detail:t.data});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},topBarEditInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rl:return Object(P.a)(Object(P.a)({},e),{},{topBarEditState:Math.random()});case cl:return Object(P.a)(Object(P.a)({},e),{},{tberr:t.data.message,topBarEditState:10*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ms:return Object(P.a)(Object(P.a)({},e),{},{url:t.data.url});case Qs:return Object(P.a)(Object(P.a)({},e),{},{urlArray:t.data.qrarray});case Us:return Object(P.a)(Object(P.a)({},e),{},{status:0});case _s:return Object(P.a)(Object(P.a)({},e),{},{tableList:t.data.table.records});case Fs:return Object(P.a)(Object(P.a)({},e),{},{status:0});case zs:return Object(P.a)(Object(P.a)({},e),{},{staffList:t.data});case Ps:return Object(P.a)(Object(P.a)({},e),{},{addTStatus:Math.random()});case qs:return Object(P.a)(Object(P.a)({},e),{},{addTStatus:10*Math.random(),errorMsgT:t.data.message});case Hs:return Object(P.a)(Object(P.a)({},e),{},{editTStatus:Math.random()});case Vs:return Object(P.a)(Object(P.a)({},e),{},{editTStatus:10*Math.random(),errorMsgT:t.data.message});case Ys:return Object(P.a)(Object(P.a)({},e),{},{delTStatus:Math.random()});case Ks:return Object(P.a)(Object(P.a)({},e),{},{delTStatus:10*Math.random(),errorMsgT:t.data.message});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xc:return Object(P.a)(Object(P.a)({},e),{},{hotlist:t.data.list.hotlist,randomlist:t.data.list.randomlist});case gc:return Object(P.a)(Object(P.a)({},e),{},{homeDishState:10*Math.random()});case yc:return Object(P.a)(Object(P.a)({},e),{},{cate:t.data.acategory,catedish:t.data.dishes});case Cc:var n=t.data,a=Gc.shopcar;a.some((function(e){return e._id===n._id}))?(console.log("\u5b58\u5728"),a.forEach((function(e){e._id===n._id&&e.num++}))):a.push({_id:n._id,price:n.price,name:n.name,num:1,url:n.url});var r=JSON.stringify(Gc.shopcar);return we("shopcar",r),Object(P.a)(Object(P.a)({},e),{},{shopcar:Object(Uc.a)(JSON.parse(JSON.stringify(Gc.shopcar)))});case Ec:var c=t.data,s=Gc.shopcar;s.forEach((function(e,t){e._id===c._id&&e.num--,0===e.num&&s.splice(t,1)}));var i=JSON.stringify(Gc.shopcar);return we("shopcar",i),Object(P.a)(Object(P.a)({},e),{},{shopcar:Object(Uc.a)(JSON.parse(JSON.stringify(Gc.shopcar)))});case Tc:return Gc.shopcar=t.data,Object(P.a)(Object(P.a)({},e),{},{shopcar:t.data});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},orderDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Is,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ts:return console.log("action",t),Object(P.a)(Object(P.a)({},e),{},{iscus:10*Math.random(),cusInfo:t.data});case ks:return console.log("actionshibai",t),Object(P.a)(Object(P.a)({},e),{},{iscus:100*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},shopCar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $c:return Object(P.a)(Object(P.a)({},e),{},{handle:Math.random(),notEnough:[]});case es:return Object(P.a)(Object(P.a)({},e),{},{handle:10*Math.random(),notEnough:t.data.notEnough});case ns:return Object(P.a)(Object(P.a)({},e),{},{handleEdit:Math.random(),notE:[]});case as:return Object(P.a)(Object(P.a)({},e),{},{handleEdit:10*Math.random(),notE:t.data.notE});case rs:var n=JSON.parse(JSON.stringify(cs));return console.log(n),Object(P.a)({},n);default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},chef:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fi:return Object(P.a)(Object(P.a)({},e),{},{orderlist:t.data.order});case Bi:return Object(P.a)(Object(P.a)({},e),{},{editCStatus:Math.random()});case Pi:return Object(P.a)(Object(P.a)({},e),{},{editOStatus:10*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ki:return Object(P.a)(Object(P.a)({},e),{},{searchlist:t.data.dishes});case Qi:return Object(P.a)(Object(P.a)({},e),{},{searchlist:[]});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},waiterOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vi:return console.log(t.data),Object(P.a)(Object(P.a)({},e),{},{orderlist:t.data.result.order,dishlist:t.data.dishlist.dish});case Si:return Object(P.a)(Object(P.a)({},e),{},{editCStatus:Math.random()});case Ci:return Object(P.a)(Object(P.a)({},e),{},{editOStatus:10*Math.random()});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},waiterTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ao:return Object(P.a)(Object(P.a)({},e),{},{url:t.data.url});case ro:return Object(P.a)(Object(P.a)({},e),{},{status:0});case so:return console.log(t.data.table.records),Object(P.a)(Object(P.a)({},e),{},{tableList:t.data.table.records});case io:return Object(P.a)(Object(P.a)({},e),{},{status:0});case oo:return Object(P.a)(Object(P.a)({},e),{},{staffList:t.data});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},wcuslist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Co:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.customer,cateList:t.data.acuscate.records});case Eo:return Object(P.a)(Object(P.a)({},e),{},{cateList:t.data.acuscate.records});case ko:return Object(P.a)(Object(P.a)({},e),{},{addCStatus:Math.random()});case Do:return Object(P.a)(Object(P.a)({},e),{},{addCStatus:10*Math.random(),errorMsgC:t.data.message});default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}},wcuscate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oo:return Object(P.a)(Object(P.a)({},e),{},{list:t.data.acuscate});case fo:default:return Object(P.a)(Object(P.a)({},e),{},{action:t})}}}),zl=Ue.a.mark(Vu),Bl=r.types.TOLOGIN,Pl=o.types,ql=Pl.GETLIST,Wl=Pl.ADDSTAFF,Hl=Pl.TOGGLEPAGE,Vl=Pl.DELSTAFF,Jl=Pl.EDITSTAFF,Yl=u.types,Kl=Yl.GETDISHLIST,Ql=Yl.ADDDISH,Xl=Yl.DELDISH,Zl=Yl.EDITDISH,$l=b.types,eu=$l.GETCATELISTS,tu=$l.CATEADD,nu=$l.CATEEDIT,au=$l.CATEDEL,ru=f.types,cu=ru.GETCUSCATELIST,su=ru.CUSCATEADD,iu=ru.CUSCATEEDIT,ou=ru.CUSCATEDEL,lu=h.types,uu=lu.GETCUSLIST,du=lu.CUSADD,bu=lu.CUSEDIT,ju=lu.CUSDEL,fu=m.types,Ou=fu.GETORDERLIST,hu=fu.ORDERDEL,pu=s.types.GETDASHBOARD,mu=U.types.EDITUSERINFO,xu=T.types,gu=xu.GETQRCODE,vu=xu.GETTABLE,yu=xu.ADDTABLE,Su=xu.EDITTABLE,Cu=xu.DELTABLE,Eu=g.types.GETHDISH,Tu=C.types.ISCUS,ku=y.types,Du=ku.SCUSORDERADD,wu=ku.CUSOREDEREDIT,Ru=ku.RESET,Iu=G.types,Lu=Iu.CGETORDERLIST,Nu=Iu.CORDEREDIT,Au=_.types.SEARCHDISH,Mu=F.types,Uu=Mu.WGETORDERLIST,Gu=Mu.WORDEREDIT,_u=Mu.WORDERADD,Fu=z.types,zu=Fu.WGETTABLE,Bu=Fu.WGETQRCODE,Pu=L.types.WGETCUSCATELIST,qu=A.types,Wu=qu.WGETCUSLIST,Hu=qu.WCUSADD;function Vu(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saga\u603b\u76d1\u542c\u6267\u884c"),e.next=3,Object(Ge.b)(Bl,r.toLogin);case 3:return e.next=5,Object(Ge.b)(Wl,o.addStaff);case 5:return e.next=7,Object(Ge.b)(Hl,o.togglePage);case 7:return e.next=9,Object(Ge.b)(ql,o.togglePage);case 9:return e.next=11,Object(Ge.b)(Vl,o.delStaff);case 11:return e.next=13,Object(Ge.b)(Jl,o.editStaff);case 13:return e.next=15,Object(Ge.b)(Kl,u.toggleDishPage);case 15:return e.next=17,Object(Ge.b)(Ql,u.addDish);case 17:return e.next=19,Object(Ge.b)(Xl,u.delDish);case 19:return e.next=21,Object(Ge.b)(Zl,u.editDish);case 21:return e.next=23,Object(Ge.b)(eu,b.toggleCatePage);case 23:return e.next=25,Object(Ge.b)(tu,b.addCate);case 25:return e.next=27,Object(Ge.b)(nu,b.editCate);case 27:return e.next=29,Object(Ge.b)(au,b.delCate);case 29:return e.next=31,Object(Ge.b)(cu,f.toggleCusCatePage);case 31:return e.next=33,Object(Ge.b)(su,f.addCusCate);case 33:return e.next=35,Object(Ge.b)(iu,f.editCusCate);case 35:return e.next=37,Object(Ge.b)(ou,f.delCusCate);case 37:return e.next=39,Object(Ge.b)(Pu,L.toggleCusCatePage);case 39:return e.next=41,Object(Ge.b)(Pu,L.toggleCusCatePage);case 41:return e.next=43,Object(Ge.b)(Wu,A.toggleCusPage);case 43:return e.next=45,Object(Ge.b)(uu,h.toggleCusPage);case 45:return e.next=47,Object(Ge.b)(du,h.addCus);case 47:return e.next=49,Object(Ge.b)(bu,h.editCus);case 49:return e.next=51,Object(Ge.b)(ju,h.delCus);case 51:return e.next=53,Object(Ge.b)(Hu,A.addCus);case 53:return e.next=55,Object(Ge.b)(Ou,m.toggleOrderPage);case 55:return e.next=57,Object(Ge.b)(hu,m.delOrder);case 57:return e.next=59,Object(Ge.b)(Du,y.addOrder);case 59:return e.next=61,Object(Ge.b)(wu,y.updateOrder);case 61:return e.next=63,Object(Ge.b)(Lu,G.GetOrder);case 63:return e.next=65,Object(Ge.b)(Nu,G.UpdateOrder);case 65:return e.next=67,Object(Ge.b)(Gu,F.updateOrder);case 67:return e.next=69,Object(Ge.b)(Uu,F.getOrderList);case 69:return e.next=71,Object(Ge.b)(_u,F.addDish);case 71:return e.next=73,Object(Ge.b)(Ru,y.retSetShopCarState);case 73:return e.next=75,Object(Ge.b)(pu,s.getDetail);case 75:return e.next=77,Object(Ge.b)(mu,U.editInfo);case 77:return e.next=79,Object(Ge.b)(gu,T.getQR);case 79:return e.next=81,Object(Ge.b)(vu,T.getTable);case 81:return e.next=83,Object(Ge.b)(yu,T.addTable);case 83:return e.next=85,Object(Ge.b)(Su,T.editTable);case 85:return e.next=87,Object(Ge.b)(Cu,T.delTable);case 87:return e.next=89,Object(Ge.b)(zu,z.getTable);case 89:return e.next=91,Object(Ge.b)(Bu,z.getQR);case 91:return e.next=93,Object(Ge.b)(Eu,g.GetHomeDish);case 93:return e.next=95,Object(Ge.b)(Tu,C.isCus);case 95:return e.next=97,Object(Ge.b)(Au,_.searchDish);case 97:case"end":return e.stop()}}),zl)}var Ju=Vu,Yu=n(813),Ku=n(812),Qu=Object(Yu.a)(),Xu=Object(Ol.createStore)(Fl,Object(Ku.composeWithDevTools)(Object(Ol.applyMiddleware)(Qu)));Qu.run(Ju),H.a.render(Object(B.jsx)(ee.a,{store:Xu,children:Object(B.jsx)(fl.a,{children:Object(B.jsxs)(Le.d,{children:[Object(B.jsx)(Le.b,{path:"/admin",render:function(e){return Object(B.jsx)(jl,Object(P.a)({},e))}}),Object(B.jsx)(Le.b,{path:"/waiter",render:function(e){return Object(B.jsx)(jl,Object(P.a)({},e))}}),Object(B.jsx)(Le.b,{path:"/chef",render:function(e){return Object(B.jsx)(jl,Object(P.a)({},e))}}),Uo.map((function(e){return Object(B.jsx)(Le.b,Object(P.a)({},e),e.path)})),Object(B.jsx)(Le.a,{to:"/noauth"})]})})}),document.getElementById("root"))},731:function(e,t,n){},828:function(e,t,n){}},[[2935,1,2]]]);
//# sourceMappingURL=main.99e9c086.chunk.js.map