[{"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\index.tsx":"1","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\App.tsx":"2","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\routes\\index.ts":"3","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\index.tsx":"4","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\reducers.ts":"5","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\sagas.ts":"6","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\index.ts":"7","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\reducers.ts":"8","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\sagas.ts":"9","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\Login.tsx":"10","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\actions.ts":"11","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\login-style.js":"12","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\http.ts":"13","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\storage.ts":"14","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\api\\index.ts":"15","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dashboard\\index.tsx":"16","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\index.ts":"17","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\reducers.ts":"18","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\sagas.ts":"19","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\Staff.tsx":"20","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\actions.ts":"21","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\index.ts":"22","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\sagas.ts":"23","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\reducers.ts":"24","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\actions.ts":"25","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\Dish.tsx":"26","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\Layout\\index.tsx":"27","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\components\\Paging.tsx":"28"},{"size":956,"mtime":1611237116896,"results":"29","hashOfConfig":"30"},{"size":1259,"mtime":1611236605855,"results":"31","hashOfConfig":"30"},{"size":688,"mtime":1611132517294,"results":"32","hashOfConfig":"30"},{"size":448,"mtime":1611132517297,"results":"33","hashOfConfig":"30"},{"size":322,"mtime":1611132517300,"results":"34","hashOfConfig":"30"},{"size":1174,"mtime":1611132517301,"results":"35","hashOfConfig":"30"},{"size":133,"mtime":1608124844178,"results":"36","hashOfConfig":"30"},{"size":1427,"mtime":1611489202282,"results":"37","hashOfConfig":"30"},{"size":1563,"mtime":1611482072477,"results":"38","hashOfConfig":"30"},{"size":4340,"mtime":1611483061137,"results":"39","hashOfConfig":"30"},{"size":669,"mtime":1611481941239,"results":"40","hashOfConfig":"30"},{"size":1443,"mtime":1611132517289,"results":"41","hashOfConfig":"30"},{"size":1915,"mtime":1611236149747,"results":"42","hashOfConfig":"30"},{"size":579,"mtime":1611232508696,"results":"43","hashOfConfig":"30"},{"size":1200,"mtime":1611472248214,"results":"44","hashOfConfig":"30"},{"size":273,"mtime":1611132517266,"results":"45","hashOfConfig":"30"},{"size":133,"mtime":1611132517280,"results":"46","hashOfConfig":"30"},{"size":2249,"mtime":1611132517281,"results":"47","hashOfConfig":"30"},{"size":2546,"mtime":1611132517282,"results":"48","hashOfConfig":"30"},{"size":17876,"mtime":1611132517278,"results":"49","hashOfConfig":"30"},{"size":1140,"mtime":1611132517279,"results":"50","hashOfConfig":"30"},{"size":130,"mtime":1611132517274,"results":"51","hashOfConfig":"30"},{"size":3175,"mtime":1611132517276,"results":"52","hashOfConfig":"30"},{"size":2167,"mtime":1611132517275,"results":"53","hashOfConfig":"30"},{"size":1912,"mtime":1611132517270,"results":"54","hashOfConfig":"30"},{"size":18778,"mtime":1611132517268,"results":"55","hashOfConfig":"30"},{"size":3538,"mtime":1611132517254,"results":"56","hashOfConfig":"30"},{"size":564,"mtime":1611132517257,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"17trjw0",{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"60"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"60"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"60"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"60"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"60"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"60"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\index.tsx",[],["122","123"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\App.tsx",["124"],"import React, {FunctionComponent} from \"react\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport {adminRoute} from \"./routes\";\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport LayoutWrap from \"./common/Layout\";\r\nimport {isLogined} from './utils/storage'\r\n\r\ntype Props = RouteComponentProps;\r\n\r\nconst App: FunctionComponent<Props> = () => {\r\n      return (\r\n          isLogined() ?\r\n              <LayoutWrap>\r\n                <Switch>\r\n                  {\r\n                    adminRoute.map((route: any) => {\r\n                      return (\r\n                          <Route\r\n                              key={route.path}\r\n                              path={route.path}\r\n                              exact={route.exact}\r\n                              render={routeProps => {\r\n                                return <route.component {...routeProps} />\r\n                              }}\r\n                          />\r\n\r\n                      )\r\n                    })\r\n                  }\r\n                  <Redirect from='/admin' to={adminRoute[0].path}/>\r\n                  <Redirect to='404'/>\r\n                </Switch>\r\n              </LayoutWrap> : <Redirect to='/login'/>\r\n      )\r\n    }\r\n;\r\n\r\nexport default App;\r\n\r\n\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\routes\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\Login.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\actions.ts",["125","126","127","128"],"/*\r\n* @name: Login页面动作声明\r\n* @description: 声明action触发类型\r\n* @author: 陈相材\r\n* @time: 2020-12-15 20:01:24\r\n*/\r\n\r\nexport const TOLOGIN = 'TOLOGIN';\r\nexport type TOLOGIN = typeof TOLOGIN\r\n\r\nexport const SUCCESSLOGIN = 'SUCCESSLOGIN';\r\nexport type SUCCESSLOGIN = typeof SUCCESSLOGIN\r\n\r\nexport const ERRORLOGIN = 'ERRORLOGIN';\r\nexport type ERRORLOGIN = typeof ERRORLOGIN\r\n\r\nexport const NETERROR = 'NETERROR'\r\nexport type NETERROR = typeof NETERROR\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\login-style.js",[],["129","130"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\http.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\storage.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\api\\index.ts",["131","132","133","134","135","136","137","138","139","140","141","142"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dashboard\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\Staff.tsx",["143","144","145","146","147","148"],"import React, {FunctionComponent, useEffect, useMemo, useRef, useState} from 'react';\r\nimport {Button, Card, ConfigProvider, Form, Input, message, Modal, Popconfirm, Radio, Space, Table, Tag} from 'antd';\r\nimport {ColumnsType} from 'antd/es/table';\r\nimport {Dispatch} from \"redux\";\r\nimport {ADDSTAFF, DELSTAFF, EDITSTAFF, TOGGLEPAGE} from \"./actions\";\r\nimport {DELSTAFF_URL, EDITSTAFF_URL, STAFFADD, STAFFLIST} from \"../../../common/api\";\r\nimport DocumentTitle from \"react-document-title\";\r\nimport moment from 'moment';\r\nimport {FieldNumberOutlined, LockOutlined, UserOutlined} from \"@ant-design/icons\";\r\nimport {connect} from \"react-redux\";\r\nimport {getStore, setStore} from \"../../../utils/storage\";\r\nimport zhCN from 'antd/es/locale/zh_CN';\r\nimport Paging from \"../../../components/Paging\";\r\n\r\ninterface OwnProps {\r\n    [prop: string]: any\r\n\r\n    togglePage(value?: object): void\r\n\r\n    delStaff(value: string): void,\r\n\r\n    addStaff(value: object): void,\r\n\r\n    editStaff(value: object): void\r\n\r\n}\r\n\r\ninterface User {\r\n    _id: any,\r\n    name: string,\r\n    role: string,\r\n    title: string,\r\n    status: number,\r\n    account: number,\r\n    joinTime: string\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n    list: state.staff.list || [],\r\n    addStatus: state.staff.addStatus,\r\n    delStatus: state.staff.delStatus,\r\n    errorMsg: state.staff.errorMsg,\r\n    editStatus: state.staff.editStatus\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    delStaff(value: string) {\r\n        dispatch({\r\n            type: DELSTAFF,\r\n            url: DELSTAFF_URL,\r\n            data: value\r\n        })\r\n    },\r\n    addStaff(value: object) {\r\n        dispatch({\r\n            type: ADDSTAFF,\r\n            url: STAFFADD,\r\n            data: value\r\n        })\r\n    },\r\n    togglePage(value: object) {\r\n        dispatch({\r\n            type: TOGGLEPAGE,\r\n            url: STAFFLIST,\r\n            data: value\r\n        })\r\n    },\r\n    editStaff(value: object) {\r\n        dispatch({\r\n            type: EDITSTAFF,\r\n            url: EDITSTAFF_URL,\r\n            data: value\r\n        })\r\n    }\r\n})\r\n\r\n\r\n// todo 路由拦截\r\nconst Staff: FunctionComponent<Props> = (props) => {\r\n\r\n    // 表格列\r\n    const columns: ColumnsType<User> = [\r\n        {\r\n            title: '姓名',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: '角色',\r\n            key: 'role',\r\n            dataIndex: 'role',\r\n            render: (role: any) => (\r\n                <>\r\n                    {\r\n                        role === 'admin' &&\r\n                        <Tag color={'#0083B0'} key={role}>\r\n                            {\r\n                                role === 'admin' ? '管理员' : '员工'\r\n                            }\r\n                        </Tag>\r\n                    }\r\n                    {\r\n                        role === 'waiter' &&\r\n                        <Tag color={'#2ed573'} key={role}>\r\n                            {\r\n                                role = '服务员'\r\n                            }\r\n                        </Tag>\r\n                    }\r\n                    {\r\n                        role === 'chef' &&\r\n                        <Tag color={'#a17fe0'} key={role}>\r\n                            {\r\n                                role = '厨师'\r\n                            }\r\n                        </Tag>\r\n                    }\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: '入职时间',\r\n            key: 'joinTime',\r\n            dataIndex: 'joinTime',\r\n            render: (time: any) => (\r\n                <>\r\n                    {\r\n                        moment(time).format('YYYY-MM-DD')\r\n                    }\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: '在职状态',\r\n            key: 'status',\r\n            dataIndex: 'status',\r\n            render: (status: any) => (\r\n                <>\r\n                    {\r\n                        status === 1 && '在职'\r\n                    }\r\n                    {\r\n                        status === 0 && '请假'\r\n                    }\r\n                    {\r\n                        status === -1 && '离职'\r\n                    }\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: '操作',\r\n            key: '_id',\r\n            width: 300,\r\n            render: (text, records, index) => (\r\n                <Space>\r\n                    <Button type='primary' size={\"small\"} onClick={() => {\r\n                        edit_staff(records)\r\n                    }}>修改</Button>\r\n                    {\r\n                        <Popconfirm\r\n                            title=\"确定要删除此用户吗？\"\r\n                            placement=\"top\"\r\n                            okText=\"确定\"\r\n                            cancelText=\"取消\"\r\n                            onConfirm={() => {\r\n                                del_staff(records)\r\n                            }}\r\n                        >\r\n                            <Button type='primary' danger size={\"small\"}>删除</Button>\r\n                        </Popconfirm>\r\n                    }\r\n                </Space>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    //选择框(身份信息)\r\n    const positionOptions = [\r\n        {label: '服务员', value: 'waiter', style: {marginRight: 10}},\r\n        {label: '厨师', value: 'chef', style: {marginRight: 10}},\r\n        {label: '管理员', value: 'admin'},\r\n    ];\r\n\r\n    //列表显示\r\n    const [pageMsg, setPageMsg] = useState({\r\n        query: '',\r\n        page: 1,\r\n        pagesize: 10\r\n    })\r\n    const [userList, setUserList] = useState([])\r\n\r\n\r\n    /**\r\n     * 新增和编辑弹出框\r\n     * visible: 弹框可见性\r\n     * selected: 选中项\r\n     * popStaffStyle: 弹窗类型\r\n     */\r\n    const [visible, setVisible] = useState(false);\r\n    const [selected, setSelected] = useState(['waiter'])\r\n    const [popStaffStyle, setPopStaffStyle] = useState('')\r\n    const [editValues, setEditValues] = useState({account: 0, name: '', role: '', status: -9})\r\n\r\n    // 表单提交函数 新增和编辑\r\n    const handleOk = (value: any) => {\r\n        if (value.hasOwnProperty('password')) {\r\n            // 找出最大值 作为账号account的值\r\n            value.account = props.list.records.reduce((pre: any, cur: any) => pre > cur.account ? pre : `${cur.account + 1}`, 0)\r\n            value.joinTime = new Date().getTime()\r\n            props.addStaff(value)\r\n            setVisible(false);\r\n        } else {\r\n            // @ts-ignore\r\n            value.name = edited_name.current.state.value\r\n            value.account = editValues.account\r\n\r\n            // Dispach编辑行为\r\n            props.editStaff(value)\r\n            setVisible(false)\r\n        }\r\n    };\r\n\r\n    const edited_name = useRef(null);\r\n\r\n    // 取消弹出框\r\n    const handleCancel = () => {\r\n        // todo 取消弹出框确认\r\n        console.log('Clicked cancel button');\r\n        setVisible(false);\r\n    };\r\n\r\n    // 新增用户身份选择项\r\n    const onChange1 = (e: any) => {\r\n        const selectedValue = e.target.value\r\n        setSelected(selectedValue)\r\n    }\r\n\r\n    // 删除员工触发\r\n    const del_staff = (value: User) => {\r\n        const {_id} = value\r\n        props.delStaff(_id)\r\n    }\r\n\r\n    // 编辑员工触发\r\n    const edit_staff = (value: User) => {\r\n        setVisible(true)\r\n        setPopStaffStyle('编辑员工')\r\n        setEditValues({\r\n                account: value.account,\r\n                name: value.name,\r\n                role: value.role,\r\n                status: value.status\r\n            }\r\n        )\r\n    }\r\n\r\n    // 监听拿到最新的修改信息 状态更新立即更改\r\n    useEffect(() => {\r\n        const {role} = editValues\r\n        setSelected([`${role}`])\r\n        // console.log(selected)\r\n        // console.log(editValues)\r\n    }, [editValues])\r\n\r\n    // 员工列表数据和事件处理\r\n    useEffect(() => {\r\n        props.togglePage(pageMsg)\r\n        const {list} = props\r\n        const user_List = list.records\r\n        setUserList(user_List)\r\n        //数组长度发生变化后 获取数据 渲染列表\r\n    }, [props.list.total, props.list.page, props.list.size])\r\n\r\n    // 修改状态后 部分信息改变 通过memo监听list变化 重新渲染页面\r\n    useMemo(() => {\r\n        const {list} = props\r\n        const user_List = list.records\r\n        setUserList(user_List)\r\n    }, [props.list])\r\n\r\n\r\n    // 弹框状态管理 fix 状态存储在缓存 解决每次重新加载页面弹框问题\r\n    useEffect(() => {\r\n        const {errorMsg, addStatus, delStatus, editStatus} = props\r\n        const astatus = getStore('addStatus')\r\n        const dstatus = getStore('delStatus')\r\n        const estatus = getStore('editStatus')\r\n        //添加\r\n        if (astatus == addStatus) {\r\n        } else {\r\n            setStore('addStatus', addStatus)\r\n            if (addStatus < 1) message.success('员工添加成功！')\r\n            else if (errorMsg && errorMsg.includes('密码')) message.warning('请输入3位数以上的密码！')\r\n            else if (errorMsg && errorMsg.includes('姓名')) message.warning('请输入正确的姓名格式！')\r\n            else if (errorMsg && errorMsg.includes('注册')) message.error('此账号已被注册！')\r\n        }\r\n        //删除\r\n        if (dstatus == delStatus) {\r\n        } else {\r\n            setStore('delStatus', delStatus)\r\n            if (delStatus < 1) message.success('员工删除成功！')\r\n        }\r\n        //修改\r\n        if (estatus == editStatus) {\r\n        } else {\r\n            setStore('editStatus', editStatus)\r\n            if (editStatus < 1) message.success('资料修改成功！')\r\n        }\r\n    }, [props.addStatus, props.delStatus, props.editStatus])\r\n\r\n    return (\r\n        <DocumentTitle title=\"员工管理\">\r\n            <ConfigProvider locale={zhCN}>\r\n                <Card title=\"员工列表\"\r\n                      extra={\r\n                          <Button type=\"primary\" onClick={() => {\r\n                              setVisible(true)\r\n                              setPopStaffStyle('新增员工')\r\n                          }}>新增</Button>\r\n                      }\r\n                      headStyle={{fontSize: 18}}\r\n                      style={{width: '100%'}}\r\n                >\r\n                    {\r\n                        userList &&\r\n                        < Table\r\n                            rowKey='_id'\r\n                            bordered\r\n                            columns={columns}\r\n                            dataSource={userList}\r\n                            pagination={false}\r\n                        />\r\n                    }\r\n                    {\r\n                        userList &&\r\n                        <Paging page={props.list.page} total={props.list.total} fun={(page = 1, pageSize = 10): any => {\r\n                            props.togglePage({\r\n                                query: '',\r\n                                page: page,\r\n                                pagesize: pageSize\r\n                            })\r\n                            setPageMsg({\r\n                                query: '',\r\n                                page: page,\r\n                                pagesize: pageSize\r\n                            })\r\n                        }}/>\r\n                    }\r\n                    {/*新增员工弹出框*/}\r\n                    <Modal\r\n                        title={popStaffStyle}\r\n                        visible={visible}\r\n                        onCancel={handleCancel}\r\n                        destroyOnClose\r\n                        footer={null}\r\n                    >\r\n                        <Form name=\"normal_login\" className=\"login-form\" onFinish={handleOk}>\r\n                            <Form.Item name=\"account\"\r\n                            >\r\n                                {\r\n                                    popStaffStyle === '新增员工' &&\r\n                                    <Form.Item name=\"account\" style={{margin: 0}}>\r\n                                        <Input\r\n                                            defaultValue={props.list.records.reduce((pre: any, cur: any) => {\r\n                                                // console.log(pre, cur.account)\r\n                                                return pre > cur.account ? `${pre}` : `${cur.account + 1}`\r\n                                            }, 0)}\r\n                                            disabled prefix={<FieldNumberOutlined className=\"site-form-item-icon\"/>}\r\n                                            placeholder=\"工号\"/>\r\n                                    </Form.Item>\r\n                                }\r\n                                {\r\n                                    popStaffStyle === '编辑员工' &&\r\n                                    <Form.Item name=\"account\" style={{margin: 0}}>\r\n                                        <Input\r\n                                            defaultValue={editValues.account}\r\n                                            disabled prefix={<FieldNumberOutlined className=\"site-form-item-icon\"/>}\r\n                                            placeholder=\"工号\"/>\r\n                                    </Form.Item>\r\n                                }\r\n                            </Form.Item>\r\n                            {\r\n                                popStaffStyle === '新增员工' &&\r\n                                <Form.Item name=\"name\" rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: '请输入姓名',\r\n                                    },\r\n                                ]}>\r\n                                    <Input autoFocus={true}\r\n                                           prefix={<UserOutlined className=\"site-form-item-icon\"/>}\r\n                                           placeholder=\"请输入2位及以上的姓名\"/>\r\n                                </Form.Item>\r\n                            }\r\n                            {\r\n                                popStaffStyle === '编辑员工' &&\r\n                                <Form.Item name=\"name\" initialValue={editValues.name}>\r\n                                    <Input autoFocus={true}\r\n                                           defaultValue={editValues.name}\r\n                                           ref={edited_name}\r\n                                           prefix={<UserOutlined className=\"site-form-item-icon\"/>}\r\n                                           placeholder=\"请输入2位及以上的姓名\"/>\r\n                                </Form.Item>\r\n                            }\r\n                            {\r\n                                popStaffStyle === '新增员工' &&\r\n                                <Form.Item name=\"password\" rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: '请输入密码',\r\n                                    },\r\n                                ]}>\r\n                                    <Input.Password prefix={<LockOutlined className=\"site-form-item-icon\"/>}\r\n                                                    type=\"password\"\r\n                                                    placeholder=\"请输入3位及以上的密码\"/>\r\n                                </Form.Item>\r\n                            }\r\n                            <Form.Item name=\"role\" initialValue={popStaffStyle === '编辑员工' ? selected[0] : 'waiter'}>\r\n                                <Radio.Group\r\n                                    options={positionOptions}\r\n                                    onChange={onChange1}\r\n                                    value={selected[0]}\r\n                                    optionType=\"button\"\r\n                                />\r\n                            </Form.Item>\r\n                            <Form.Item name=\"status\" initialValue={popStaffStyle === '编辑员工' ? editValues.status : 1}\r\n                                       style={{marginTop: -10}}>\r\n                                <Radio.Group>\r\n                                    <Radio value={1}>在职</Radio>\r\n                                    <Radio value={0}>请假</Radio>\r\n                                    <Radio value={-1}>离职</Radio>\r\n                                </Radio.Group>\r\n                            </Form.Item>\r\n                            <Form.Item style={{marginBottom: 0}}>\r\n                                <Space style={{float: \"right\"}}>\r\n                                    <Button type=\"default\" onClick={handleCancel}>取消</Button>\r\n                                    {\r\n                                        popStaffStyle === '新增员工' &&\r\n                                        <Button type=\"primary\" htmlType=\"submit\"\r\n                                                className=\"login-form-button\">添加</Button>\r\n                                    }\r\n                                    {\r\n                                        popStaffStyle === '编辑员工' &&\r\n                                        <Button type=\"primary\" htmlType=\"submit\"\r\n                                                className=\"login-form-button\">提交</Button>\r\n                                    }\r\n                                </Space>\r\n                            </Form.Item>\r\n                        </Form>\r\n                    </Modal>\r\n                </Card>\r\n            </ConfigProvider>\r\n        </DocumentTitle>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Staff);\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\actions.ts",["149","150","151","152","153","154","155","156","157","158","159","160","161","162"],"export const GETFAILED = 'getfailed'\r\nexport type GETFAILED = typeof GETFAILED\r\n\r\nexport const GETLIST = 'getlist'\r\nexport type GETLIST = typeof GETLIST\r\n\r\nexport const GETSUCCESS = 'getsuccess'\r\nexport type GETSUCCESS = typeof GETSUCCESS\r\n\r\nexport const ADDSTAFF = 'addstaff'\r\nexport type ADDSTAFF = typeof ADDSTAFF\r\n\r\nexport const ADDSUCCESS = 'addsuccess'\r\nexport type ADDSUCCESS = typeof ADDSUCCESS\r\n\r\nexport const ADDERROR = 'adderror'\r\nexport type ADDERROR = typeof ADDERROR\r\n\r\nexport const TOGGLEPAGE = 'togglePage'\r\nexport type TOGGLEPAGE = typeof TOGGLEPAGE\r\n\r\nexport const TOGGLED = 'toggled'\r\nexport type TOGGLED = typeof TOGGLED\r\n\r\nexport const DELSTAFF = 'delstaff'\r\nexport type DELSTAFF = typeof DELSTAFF\r\n\r\nexport const DELSUCCESS = 'delsuccess'\r\nexport type DELSUCCESS = typeof DELSUCCESS\r\n\r\nexport const DELERROR = 'delerror'\r\nexport type DELERROR = typeof DELERROR\r\n\r\nexport const EDITSTAFF = 'editstaff'\r\nexport type EDITSTAFF = typeof EDITSTAFF\r\n\r\nexport const EDITSUCCESS = 'editsuccess'\r\nexport type EDITSUCCESS = typeof EDITSUCCESS\r\n\r\nexport const EDITERROR = 'editerror'\r\nexport type EDITERROR = typeof EDITERROR\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\actions.ts",["163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184"],"export const GETFAILED = 'getfailed'\r\nexport type GETFAILED = typeof GETFAILED\r\n\r\nexport const GETDISHLIST = 'getlist'\r\nexport type GETDISHLIST = typeof GETDISHLIST\r\n\r\nexport const GETCATELIST = 'getcatelist'\r\nexport type GETCATELIST = typeof GETCATELIST\r\n\r\nexport const GETCATELISTSUCCESS = 'getcatelistsuccess'\r\nexport type GETCATELISTSUCCESS = typeof GETCATELISTSUCCESS\r\n\r\n\r\nexport const GETSUCCESS = 'getsuccess'\r\nexport type GETSUCCESS = typeof GETSUCCESS\r\n\r\n//菜品\r\nexport const ADDDISH = 'adddish'\r\nexport type ADDDISH = typeof ADDDISH\r\n\r\nexport const ADDDISHSUC = 'adddishsuc'\r\nexport type ADDDISHSUC = typeof ADDDISHSUC\r\n\r\nexport const ADDDISHERR = 'adddisherr'\r\nexport type ADDDISHERR = typeof ADDDISHERR\r\n\r\nexport const EDITDISHDISHSUC = 'editdishdishsuc'\r\nexport type EDITDISHDISHSUC = typeof EDITDISHDISHSUC\r\n\r\nexport const EDITDISHERR = 'editdisherr'\r\nexport type EDITDISHERR = typeof EDITDISHERR\r\n\r\nexport const EDITDISH = 'editdish'\r\nexport type EDITDISH = typeof EDITDISH\r\n\r\nexport const DELDISH = 'deldish'\r\nexport type DELDISH = typeof DELDISH\r\n\r\nexport const DELDISHSUC = 'deldishsuc'\r\nexport type DELDISHSUC = typeof DELDISHSUC\r\n\r\nexport const DELDISHERR = 'deldisherr'\r\nexport type DELDISHERR = typeof DELDISHERR\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const ADDSUCCESS = 'addsuccess'\r\nexport type ADDSUCCESS = typeof ADDSUCCESS\r\n\r\nexport const ADDERROR = 'adderror'\r\nexport type ADDERROR = typeof ADDERROR\r\n\r\nexport const TOGGLEPAGE = 'togglePage'\r\nexport type TOGGLEPAGE = typeof TOGGLEPAGE\r\n\r\nexport const TOGGLED = 'toggled'\r\nexport type TOGGLED = typeof TOGGLED\r\n\r\n\r\nexport const DELSUCCESS = 'delsuccess'\r\nexport type DELSUCCESS = typeof DELSUCCESS\r\n\r\nexport const DELERROR = 'delerror'\r\nexport type DELERROR = typeof DELERROR\r\n\r\nexport const EDITSUCCESS = 'editsuccess'\r\nexport type EDITSUCCESS = typeof EDITSUCCESS\r\n\r\nexport const EDITERROR = 'editerror'\r\nexport type EDITERROR = typeof EDITERROR\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\Dish.tsx",["185","186","187","188","189"],"import React, {FunctionComponent, useEffect, useMemo, useState} from 'react';\r\nimport {Dispatch} from \"redux\";\r\nimport {ADDDISH_URL, DELDISH_URL, DISHLIST, EDITDISH_URL, SERVER_URL, UPPIC_URL} from \"../../../common/api\";\r\nimport {connect} from \"react-redux\";\r\nimport DocumentTitle from \"react-document-title\";\r\nimport zhCN from \"antd/es/locale/zh_CN\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  Col,\r\n  ConfigProvider,\r\n  Drawer,\r\n  Form,\r\n  Input,\r\n  message,\r\n  Modal,\r\n  Popconfirm,\r\n  Row,\r\n  Select,\r\n  Space,\r\n  Table,\r\n  Upload\r\n} from \"antd\";\r\nimport {ColumnsType} from \"antd/es/table\";\r\nimport {ADDDISH, DELDISH, EDITDISH, GETDISHLIST} from \"./actions\";\r\nimport Paging from \"../../../components/Paging\";\r\nimport {DeleteOutlined, EditOutlined, PlusOutlined,} from '@ant-design/icons';\r\nimport './dish.css'\r\nimport {getStore, setStore} from \"../../../utils/storage\";\r\n\r\nconst {Option} = Select;\r\n\r\ninterface OwnProps {\r\n  [prop: string]: any\r\n\r\n  toggleDishPage(value?: object): void\r\n\r\n  getCateList(): void,\r\n\r\n  addDish(value: object): void,\r\n\r\n  delDish(value: string): void\r\n\r\n  editDish(value: object): void\r\n\r\n\r\n}\r\n\r\ninterface Dishes {\r\n  _id: any,\r\n  name: string,\r\n  category: {\r\n    _id: string,\r\n    foodTypeName: string\r\n  },\r\n  number: number,\r\n  price: number,\r\n  picture: string\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  list: state.dish.list || [],\r\n  cateList: state.dish.cateList,\r\n  addDishStatus: state.dish.addDishStatus,\r\n  delDishStatus: state.dish.delDishStatus,\r\n  errorMsgDish: state.dish.errorMsgDish,\r\n  editDishStatus: state.dish.editDishStatus\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  delDish(value: string) {\r\n    dispatch({\r\n      type: DELDISH,\r\n      url: DELDISH_URL,\r\n      data: value\r\n    })\r\n  },\r\n  addDish(value: object) {\r\n    dispatch({\r\n      type: ADDDISH,\r\n      url: ADDDISH_URL,\r\n      data: value\r\n    })\r\n  },\r\n  toggleDishPage(value: object) {\r\n    dispatch({\r\n      type: GETDISHLIST,\r\n      url: DISHLIST,\r\n      data: value\r\n    })\r\n  },\r\n  editDish(value: object) {\r\n    dispatch({\r\n      type: EDITDISH,\r\n      url: EDITDISH_URL,\r\n      data: value\r\n    })\r\n  }\r\n})\r\n\r\n\r\nconst Dish: FunctionComponent<Props> = (props) => {\r\n  // 表格列\r\n  const columns: ColumnsType<Dishes> = [\r\n    {\r\n      title: '菜品',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: '分类',\r\n      key: 'category',\r\n      dataIndex: 'category',\r\n      render: (value, records, index) => (\r\n          <>\r\n            {records.category.foodTypeName}\r\n          </>\r\n      ),\r\n    },\r\n    {\r\n      title: '售价(元)',\r\n      dataIndex: 'price',\r\n      key: 'price',\r\n    },\r\n    {\r\n      title: '库存',\r\n      key: 'number',\r\n      dataIndex: 'number',\r\n      render: (number: number) => (\r\n          <>\r\n            {number}\r\n          </>\r\n      ),\r\n    },\r\n    {\r\n      title: '操作',\r\n      key: '_id',\r\n      width: 300,\r\n      render: (text, records, index) => (\r\n          <Space>\r\n            <Button type=\"primary\" onClick={() => {\r\n              edit_dish(records)\r\n            }} shape=\"circle\" icon={<EditOutlined/>} size={\"small\"}/>\r\n            {\r\n              <Popconfirm\r\n                  title=\"确定要删除此菜品吗？\"\r\n                  placement=\"top\"\r\n                  okText=\"确定\"\r\n                  cancelText=\"取消\"\r\n                  onConfirm={() => {\r\n                    del_dish(records)\r\n                  }}\r\n              >\r\n                <Button type=\"primary\" danger shape=\"circle\" icon={<DeleteOutlined/>} size={\"small\"}/>\r\n              </Popconfirm>\r\n            }\r\n          </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 修改菜品信息\r\n  const edit_dish = (records: Dishes) => {\r\n    console.log(records)\r\n    SetStateVisible(true)\r\n    setDrawerType('编辑菜品')\r\n    SetEditValue({\r\n      _id: records._id,\r\n      name: records.name,\r\n      picture: records.picture,\r\n      number: records.number,\r\n      price: records.price,\r\n      categoryId: records.category._id,\r\n      foodTypeName: records.category.foodTypeName\r\n    })\r\n\r\n  }\r\n\r\n  const [editValue, SetEditValue] = useState({\r\n    _id: '',\r\n    name: '',\r\n    picture: '',\r\n    number: 888,\r\n    price: 0,\r\n    categoryId: '',\r\n    foodTypeName: ''\r\n\r\n  })\r\n  const [dishList, setDishList] = useState([])\r\n\r\n\r\n  //列表显示\r\n  const [pageMsg, setPageMsg] = useState({\r\n    query: '',\r\n    page: 1,\r\n    pagesize: 10\r\n  })\r\n  const [stateVisible, SetStateVisible] = useState(false)\r\n  const onClose = () => {\r\n    setFileList([])\r\n    SetStateVisible(false)\r\n  };\r\n\r\n\r\n  // 列表数据和事件处理\r\n  useEffect(() => {\r\n    props.toggleDishPage(pageMsg)\r\n    const {list} = props\r\n    const dish_List = list.records\r\n    setDishList(dish_List)\r\n    //数组长度发生变化后 获取数据 渲染列表\r\n  }, [props.list.total, props.list.page, props.list.size])\r\n\r\n  // 修改状态后 部分信息改变 通过memo监听list变化 重新渲染页面\r\n  useMemo(() => {\r\n    const {list} = props\r\n    const dishList = list.records\r\n    setDishList(dishList)\r\n  }, [props.list])\r\n\r\n\r\n  // 点击编辑按钮后 立马获得点击当前元素的信息\r\n  useEffect(() => {\r\n    // console.log(editValue)\r\n    // console.log(fileLists)\r\n    const picurl = editValue.picture || ''\r\n    if (picurl !== '') {\r\n      console.log(111111)\r\n      const photo = [{\r\n        uid: 123,\r\n        status: 'done',\r\n        type: 'image/png',\r\n        url: `${SERVER_URL}${picurl}`\r\n      }]\r\n      // @ts-ignore\r\n      setFileList(photo)\r\n    } else {\r\n\r\n    }\r\n  }, [editValue])\r\n\r\n\r\n  /**\r\n   * 图片上传组件\r\n   * previewVisible 预览可见性\r\n   * previewImage 预览图片\r\n   * previewTitle 预览标题\r\n   * fileList 图片数组\r\n   *\r\n   */\r\n  const [previewVisible, setPreviewVisible] = useState(false)\r\n  const [previewImage, setPreviewImage] = useState('')\r\n  const [previewTitle, setPreviewTitle] = useState('')\r\n  const [fileLists, setFileList] = useState([])\r\n  const [drawerType, setDrawerType] = useState('')\r\n\r\n\r\n  const handleCancel = () => onClose();\r\n\r\n  function getBase64(file: any) {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  }\r\n\r\n  // 图片预览\r\n  const handlePreview = async (file: any) => {\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n    setPreviewImage(file.url || file.preview)\r\n    setPreviewVisible(true)\r\n    setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1))\r\n  };\r\n\r\n  // todo 上传多张照片\r\n  const [dishImgUrl, setDishImgUrl] = useState('')\r\n  // @ts-ignore  图片状态发生变化时\r\n  const handleChange = ({fileList}) => {\r\n    setFileList(fileList)\r\n    if (fileList.length > 0 && fileList[0].status === 'done') setDishImgUrl(fileList[0].response[0].file)\r\n  };\r\n\r\n  // 图片上传按钮\r\n  const uploadButton = (<div>\r\n    <PlusOutlined/>\r\n    <div style={{marginTop: 8}}>点击上传</div>\r\n  </div>);\r\n\r\n  // 新增/编辑菜品表单提交函数\r\n  const handleForm = (value: any) => {\r\n    if (drawerType === '新增菜品') {\r\n      value.picture = dishImgUrl\r\n      props.addDish(value)\r\n    } else {\r\n      value.categoryId = editValue.categoryId\r\n      value._id = editValue._id\r\n      value.picture = dishImgUrl\r\n      console.log(value)\r\n      props.editDish(value)\r\n    }\r\n    onClose()\r\n  }\r\n\r\n  // 删除菜品触发\r\n  const del_dish = (value: Dishes) => {\r\n    const {_id} = value\r\n    props.delDish(_id)\r\n  }\r\n\r\n\r\n  // 上传前验证图片类型和大小\r\n  function beforeUpload(file: any) {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n      message.error('只能上传JPG或者PNG图片!');\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n      message.error('图片大小不能超过2M!');\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n  }\r\n\r\n\r\n  // 弹框状态管理 fix 状态存储在缓存 解决每次重新加载页面弹框问题\r\n  useEffect(() => {\r\n    console.log(props)\r\n    const {errorMsgDish, addDishStatus, delDishStatus, editDishStatus} = props\r\n    const aastatus = getStore('addDishStatus')\r\n    const ddstatus = getStore('delDishStatus')\r\n    const eestatus = getStore('editDishStatus')\r\n    //添加\r\n    if (aastatus == addDishStatus) {\r\n    } else {\r\n      console.log(props)\r\n      console.log(errorMsgDish)\r\n      setStore('addDishStatus', addDishStatus)\r\n      if (addDishStatus < 1) message.success('菜品添加成功！')\r\n      else if (errorMsgDish && errorMsgDish.includes('存在')) message.error('此菜品已存在！')\r\n    }\r\n    //删除\r\n    if (ddstatus == delDishStatus) {\r\n    } else {\r\n      setStore('delDishStatus', delDishStatus)\r\n      if (delDishStatus < 1) message.success('菜品删除成功！')\r\n    }\r\n    //修改\r\n    if (eestatus == editDishStatus) {\r\n    } else {\r\n      setStore('editDishStatus', editDishStatus)\r\n      if (editDishStatus < 1) message.success('菜品修改成功！')\r\n    }\r\n  }, [props])\r\n\r\n  // .addDishStatus, props.delDishStatus, props.editDishStatus\r\n\r\n  return (\r\n      <DocumentTitle title=\"菜品管理\">\r\n        <ConfigProvider locale={zhCN}>\r\n          <Card title=\"菜品列表\" extra={\r\n            <Button onClick={() => {\r\n              SetStateVisible(true)\r\n              setDrawerType('新增菜品')\r\n            }} type=\"primary\" shape=\"circle\" icon={<PlusOutlined/>} size={\"large\"}/>\r\n          }\r\n                style={{width: '100%'}}>\r\n            {\r\n              dishList && <Table\r\n                  rowKey='_id'\r\n                  bordered\r\n                  columns={columns}\r\n                  dataSource={dishList}\r\n                  pagination={false}\r\n              />\r\n            }\r\n            {\r\n              dishList &&\r\n              <Paging page={props.list.page} total={props.list.total} fun={(page = 1, pageSize = 10): any => {\r\n                props.toggleDishPage({\r\n                  query: '',\r\n                  page: page,\r\n                  pagesize: pageSize\r\n                })\r\n                setPageMsg({\r\n                  query: '',\r\n                  page: page,\r\n                  pagesize: pageSize\r\n                })\r\n              }}/>\r\n            }\r\n\r\n            {/*新增菜品抽屉框*/}\r\n            <Drawer\r\n                title={drawerType}\r\n                width={330}\r\n                onClose={onClose}\r\n                visible={stateVisible}\r\n                footer={null}\r\n                destroyOnClose\r\n            >\r\n              <>\r\n                <Upload\r\n                    action={UPPIC_URL}\r\n                    listType=\"picture-card\"\r\n                    fileList={fileLists}\r\n                    onPreview={handlePreview}\r\n                    onChange={handleChange}\r\n                    beforeUpload={beforeUpload}\r\n                >\r\n                  {fileLists.length >= 1 ? null : uploadButton}\r\n                </Upload>\r\n                <Modal\r\n                    visible={previewVisible}\r\n                    title={previewTitle}\r\n                    footer={null}\r\n                    onCancel={handleCancel}\r\n                >\r\n                  <img alt=\"example\" style={{width: '100%'}} src={previewImage}/>\r\n                </Modal>\r\n              </>\r\n\r\n              <Form layout=\"vertical\"\r\n                    requiredMark\r\n                    style={{marginTop: 30}}\r\n                    onFinish={handleForm}\r\n              >\r\n                <Row gutter={16}>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          name=\"name\"\r\n                          label=\"菜名\"\r\n                          rules={[{required: true, message: '请输入名称'}]}\r\n                      >\r\n                          <Input autoFocus={true} placeholder=\"请输入名称\"/>\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          name=\"name\"\r\n                          label=\"菜名\"\r\n                          initialValue={editValue.name}\r\n                          rules={[{required: true, message: '请输入名称'}]}\r\n                      >\r\n                          <Input placeholder=\"请输入名称\" defaultValue={editValue.name} autoFocus={true}/>\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          name=\"price\"\r\n                          label=\"单价\"\r\n                          rules={[{required: true, message: '请输入单价'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              addonAfter=\"元\"\r\n                              placeholder=\"请输入单价\"\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          initialValue={editValue.price}\r\n                          name=\"price\"\r\n                          label=\"单价\"\r\n                          rules={[{required: true, message: '请输入单价'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              addonAfter=\"元\"\r\n                              placeholder=\"请输入单价\"\r\n                              defaultValue={editValue.price}\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                </Row>\r\n                <Row gutter={16}>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          name=\"category\"\r\n                          label=\"分类\"\r\n                          rules={[{required: true, message: '请选择分类'}]}\r\n                      >\r\n                          <Select placeholder=\"请选择分类\">\r\n                            {\r\n                              props.cateList &&\r\n                              props.cateList.map((value: any) => (\r\n                                      <Option value={value._id}\r\n                                              key={value._id}>\r\n                                        {value.foodTypeName}\r\n                                      </Option>\r\n                                  )\r\n                              )\r\n                            }\r\n                          </Select>\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          initialValue={editValue.foodTypeName}\r\n                          name=\"category\"\r\n                          label=\"分类\"\r\n                          rules={[{required: true, message: '请选择分类'}]}\r\n                      >\r\n                          <Select placeholder=\"请选择分类\" defaultValue={editValue.foodTypeName}>\r\n                            {\r\n                              props.cateList &&\r\n                              props.cateList.map((value: any) => (\r\n                                      <Option value={value._id}\r\n                                              key={value._id}>\r\n                                        {value.foodTypeName}\r\n                                      </Option>\r\n                                  )\r\n                              )\r\n                            }\r\n                          </Select>\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          initialValue={888}\r\n                          name=\"number\"\r\n                          label=\"库存\"\r\n                          rules={[{required: true, message: '请输入库存'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              placeholder=\"请输入库存\"\r\n                              defaultValue={888}\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          initialValue={editValue.number}\r\n                          name=\"number\"\r\n                          label=\"库存\"\r\n                          rules={[{required: true, message: '请输入库存'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              placeholder=\"请输入库存\"\r\n                              defaultValue={editValue.number}\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                </Row>\r\n                <Form.Item style={{marginTop: 66, marginRight: 14}}>\r\n                  <Space style={{float: \"right\"}}>\r\n                    <Button type=\"default\" onClick={onClose}>取消</Button>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Button type=\"primary\" htmlType=\"submit\"\r\n                              className=\"login-form-button\">添加</Button>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Button type=\"primary\" htmlType=\"submit\"\r\n                              className=\"login-form-button\">提交</Button>\r\n                    }\r\n                  </Space>\r\n                </Form.Item>\r\n              </Form>\r\n            </Drawer>\r\n          </Card>\r\n        </ConfigProvider>\r\n      </DocumentTitle>\r\n  );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dish)\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\Layout\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\components\\Paging.tsx",[],{"ruleId":"190","replacedBy":"191"},{"ruleId":"192","replacedBy":"193"},{"ruleId":"194","severity":1,"message":"195","line":6,"column":9,"nodeType":"196","messageId":"197","endLine":6,"endColumn":18},{"ruleId":"198","severity":1,"message":"199","line":9,"column":13,"nodeType":"196","messageId":"200","endLine":9,"endColumn":20},{"ruleId":"198","severity":1,"message":"201","line":12,"column":13,"nodeType":"196","messageId":"200","endLine":12,"endColumn":25},{"ruleId":"198","severity":1,"message":"202","line":15,"column":13,"nodeType":"196","messageId":"200","endLine":15,"endColumn":23},{"ruleId":"198","severity":1,"message":"203","line":18,"column":13,"nodeType":"196","messageId":"200","endLine":18,"endColumn":21},{"ruleId":"190","replacedBy":"191"},{"ruleId":"192","replacedBy":"193"},{"ruleId":"198","severity":1,"message":"204","line":3,"column":13,"nodeType":"196","messageId":"200","endLine":3,"endColumn":21},{"ruleId":"198","severity":1,"message":"205","line":7,"column":13,"nodeType":"196","messageId":"200","endLine":7,"endColumn":22},{"ruleId":"198","severity":1,"message":"206","line":10,"column":13,"nodeType":"196","messageId":"200","endLine":10,"endColumn":21},{"ruleId":"198","severity":1,"message":"207","line":13,"column":13,"nodeType":"196","messageId":"200","endLine":13,"endColumn":25},{"ruleId":"198","severity":1,"message":"208","line":16,"column":13,"nodeType":"196","messageId":"200","endLine":16,"endColumn":26},{"ruleId":"198","severity":1,"message":"209","line":20,"column":13,"nodeType":"196","messageId":"200","endLine":20,"endColumn":21},{"ruleId":"198","severity":1,"message":"210","line":23,"column":13,"nodeType":"196","messageId":"200","endLine":23,"endColumn":25},{"ruleId":"198","severity":1,"message":"211","line":26,"column":13,"nodeType":"196","messageId":"200","endLine":26,"endColumn":24},{"ruleId":"198","severity":1,"message":"212","line":29,"column":13,"nodeType":"196","messageId":"200","endLine":29,"endColumn":24},{"ruleId":"198","severity":1,"message":"213","line":32,"column":13,"nodeType":"196","messageId":"200","endLine":32,"endColumn":25},{"ruleId":"198","severity":1,"message":"214","line":36,"column":13,"nodeType":"196","messageId":"200","endLine":36,"endColumn":22},{"ruleId":"198","severity":1,"message":"215","line":40,"column":13,"nodeType":"196","messageId":"200","endLine":40,"endColumn":23},{"ruleId":"216","severity":1,"message":"217","line":274,"column":8,"nodeType":"218","endLine":274,"endColumn":60,"suggestions":"219"},{"ruleId":"216","severity":1,"message":"220","line":281,"column":8,"nodeType":"218","endLine":281,"endColumn":20,"suggestions":"221"},{"ruleId":"222","severity":1,"message":"223","line":291,"column":21,"nodeType":"224","messageId":"225","endLine":291,"endColumn":23},{"ruleId":"222","severity":1,"message":"223","line":300,"column":21,"nodeType":"224","messageId":"225","endLine":300,"endColumn":23},{"ruleId":"222","severity":1,"message":"223","line":306,"column":21,"nodeType":"224","messageId":"225","endLine":306,"endColumn":23},{"ruleId":"216","severity":1,"message":"226","line":311,"column":8,"nodeType":"218","endLine":311,"endColumn":60,"suggestions":"227"},{"ruleId":"198","severity":1,"message":"228","line":2,"column":13,"nodeType":"196","messageId":"200","endLine":2,"endColumn":22},{"ruleId":"198","severity":1,"message":"229","line":5,"column":13,"nodeType":"196","messageId":"200","endLine":5,"endColumn":20},{"ruleId":"198","severity":1,"message":"230","line":8,"column":13,"nodeType":"196","messageId":"200","endLine":8,"endColumn":23},{"ruleId":"198","severity":1,"message":"231","line":11,"column":13,"nodeType":"196","messageId":"200","endLine":11,"endColumn":21},{"ruleId":"198","severity":1,"message":"232","line":14,"column":13,"nodeType":"196","messageId":"200","endLine":14,"endColumn":23},{"ruleId":"198","severity":1,"message":"233","line":17,"column":13,"nodeType":"196","messageId":"200","endLine":17,"endColumn":21},{"ruleId":"198","severity":1,"message":"234","line":20,"column":13,"nodeType":"196","messageId":"200","endLine":20,"endColumn":23},{"ruleId":"198","severity":1,"message":"235","line":23,"column":13,"nodeType":"196","messageId":"200","endLine":23,"endColumn":20},{"ruleId":"198","severity":1,"message":"236","line":26,"column":13,"nodeType":"196","messageId":"200","endLine":26,"endColumn":21},{"ruleId":"198","severity":1,"message":"237","line":29,"column":13,"nodeType":"196","messageId":"200","endLine":29,"endColumn":23},{"ruleId":"198","severity":1,"message":"238","line":32,"column":13,"nodeType":"196","messageId":"200","endLine":32,"endColumn":21},{"ruleId":"198","severity":1,"message":"239","line":35,"column":13,"nodeType":"196","messageId":"200","endLine":35,"endColumn":22},{"ruleId":"198","severity":1,"message":"240","line":38,"column":13,"nodeType":"196","messageId":"200","endLine":38,"endColumn":24},{"ruleId":"198","severity":1,"message":"241","line":41,"column":13,"nodeType":"196","messageId":"200","endLine":41,"endColumn":22},{"ruleId":"198","severity":1,"message":"228","line":2,"column":13,"nodeType":"196","messageId":"200","endLine":2,"endColumn":22},{"ruleId":"198","severity":1,"message":"242","line":5,"column":13,"nodeType":"196","messageId":"200","endLine":5,"endColumn":24},{"ruleId":"198","severity":1,"message":"243","line":8,"column":13,"nodeType":"196","messageId":"200","endLine":8,"endColumn":24},{"ruleId":"198","severity":1,"message":"244","line":11,"column":13,"nodeType":"196","messageId":"200","endLine":11,"endColumn":31},{"ruleId":"198","severity":1,"message":"230","line":15,"column":13,"nodeType":"196","messageId":"200","endLine":15,"endColumn":23},{"ruleId":"198","severity":1,"message":"245","line":19,"column":13,"nodeType":"196","messageId":"200","endLine":19,"endColumn":20},{"ruleId":"198","severity":1,"message":"246","line":22,"column":13,"nodeType":"196","messageId":"200","endLine":22,"endColumn":23},{"ruleId":"198","severity":1,"message":"247","line":25,"column":13,"nodeType":"196","messageId":"200","endLine":25,"endColumn":23},{"ruleId":"198","severity":1,"message":"248","line":28,"column":13,"nodeType":"196","messageId":"200","endLine":28,"endColumn":28},{"ruleId":"198","severity":1,"message":"249","line":31,"column":13,"nodeType":"196","messageId":"200","endLine":31,"endColumn":24},{"ruleId":"198","severity":1,"message":"250","line":34,"column":13,"nodeType":"196","messageId":"200","endLine":34,"endColumn":21},{"ruleId":"198","severity":1,"message":"251","line":37,"column":13,"nodeType":"196","messageId":"200","endLine":37,"endColumn":20},{"ruleId":"198","severity":1,"message":"252","line":40,"column":13,"nodeType":"196","messageId":"200","endLine":40,"endColumn":23},{"ruleId":"198","severity":1,"message":"253","line":43,"column":13,"nodeType":"196","messageId":"200","endLine":43,"endColumn":23},{"ruleId":"198","severity":1,"message":"232","line":51,"column":13,"nodeType":"196","messageId":"200","endLine":51,"endColumn":23},{"ruleId":"198","severity":1,"message":"233","line":54,"column":13,"nodeType":"196","messageId":"200","endLine":54,"endColumn":21},{"ruleId":"198","severity":1,"message":"234","line":57,"column":13,"nodeType":"196","messageId":"200","endLine":57,"endColumn":23},{"ruleId":"198","severity":1,"message":"235","line":60,"column":13,"nodeType":"196","messageId":"200","endLine":60,"endColumn":20},{"ruleId":"198","severity":1,"message":"237","line":64,"column":13,"nodeType":"196","messageId":"200","endLine":64,"endColumn":23},{"ruleId":"198","severity":1,"message":"238","line":67,"column":13,"nodeType":"196","messageId":"200","endLine":67,"endColumn":21},{"ruleId":"198","severity":1,"message":"240","line":70,"column":13,"nodeType":"196","messageId":"200","endLine":70,"endColumn":24},{"ruleId":"198","severity":1,"message":"241","line":73,"column":13,"nodeType":"196","messageId":"200","endLine":73,"endColumn":22},{"ruleId":"216","severity":1,"message":"217","line":213,"column":6,"nodeType":"218","endLine":213,"endColumn":58,"suggestions":"254"},{"ruleId":"216","severity":1,"message":"220","line":220,"column":6,"nodeType":"218","endLine":220,"endColumn":18,"suggestions":"255"},{"ruleId":"222","severity":1,"message":"223","line":338,"column":18,"nodeType":"224","messageId":"225","endLine":338,"endColumn":20},{"ruleId":"222","severity":1,"message":"223","line":347,"column":18,"nodeType":"224","messageId":"225","endLine":347,"endColumn":20},{"ruleId":"222","severity":1,"message":"223","line":353,"column":18,"nodeType":"224","messageId":"225","endLine":353,"endColumn":20},"no-native-reassign",["256"],"no-negated-in-lhs",["257"],"@typescript-eslint/no-unused-vars","'isLogined' is defined but never used.","Identifier","unusedVar","@typescript-eslint/no-redeclare","'TOLOGIN' is already defined.","redeclared","'SUCCESSLOGIN' is already defined.","'ERRORLOGIN' is already defined.","'NETERROR' is already defined.","'LoginApi' is already defined.","'STAFFLIST' is already defined.","'STAFFADD' is already defined.","'DELSTAFF_URL' is already defined.","'EDITSTAFF_URL' is already defined.","'DISHLIST' is already defined.","'CATELIST_URL' is already defined.","'ADDDISH_URL' is already defined.","'DELDISH_URL' is already defined.","'EDITDISH_URL' is already defined.","'UPPIC_URL' is already defined.","'SERVER_URL' is already defined.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'pageMsg' and 'props'. Either include them or remove the dependency array.","ArrayExpression",["258"],"React Hook useMemo has a missing dependency: 'props'. Either include it or remove the dependency array.",["259"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array.",["260"],"'GETFAILED' is already defined.","'GETLIST' is already defined.","'GETSUCCESS' is already defined.","'ADDSTAFF' is already defined.","'ADDSUCCESS' is already defined.","'ADDERROR' is already defined.","'TOGGLEPAGE' is already defined.","'TOGGLED' is already defined.","'DELSTAFF' is already defined.","'DELSUCCESS' is already defined.","'DELERROR' is already defined.","'EDITSTAFF' is already defined.","'EDITSUCCESS' is already defined.","'EDITERROR' is already defined.","'GETDISHLIST' is already defined.","'GETCATELIST' is already defined.","'GETCATELISTSUCCESS' is already defined.","'ADDDISH' is already defined.","'ADDDISHSUC' is already defined.","'ADDDISHERR' is already defined.","'EDITDISHDISHSUC' is already defined.","'EDITDISHERR' is already defined.","'EDITDISH' is already defined.","'DELDISH' is already defined.","'DELDISHSUC' is already defined.","'DELDISHERR' is already defined.",["261"],["262"],"no-global-assign","no-unsafe-negation",{"desc":"263","fix":"264"},{"desc":"265","fix":"266"},{"desc":"267","fix":"268"},{"desc":"263","fix":"269"},{"desc":"265","fix":"270"},"Update the dependencies array to be: [props.list.total, props.list.page, props.list.size, props, pageMsg]",{"range":"271","text":"272"},"Update the dependencies array to be: [props]",{"range":"273","text":"274"},"Update the dependencies array to be: [props, props.addStatus, props.delStatus, props.editStatus]",{"range":"275","text":"276"},{"range":"277","text":"272"},{"range":"278","text":"274"},[7856,7908],"[props.list.total, props.list.page, props.list.size, props, pageMsg]",[8086,8098],"[props]",[9212,9264],"[props, props.addStatus, props.delStatus, props.editStatus]",[4718,4770],[4928,4940]]
[{"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\index.tsx":"1","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\App.tsx":"2","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\routes\\index.ts":"3","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\index.tsx":"4","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\reducers.ts":"5","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\sagas.ts":"6","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\index.ts":"7","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\reducers.ts":"8","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\sagas.ts":"9","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\Login.tsx":"10","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\actions.ts":"11","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\login-style.js":"12","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\http.ts":"13","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\storage.ts":"14","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\api\\index.ts":"15","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dashboard\\index.tsx":"16","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\index.ts":"17","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\reducers.ts":"18","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\sagas.ts":"19","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\Staff.tsx":"20","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\actions.ts":"21","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\index.ts":"22","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\sagas.ts":"23","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\reducers.ts":"24","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\actions.ts":"25","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\Dish.tsx":"26","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\Layout\\index.tsx":"27","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\components\\Paging.tsx":"28","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\index.ts":"29","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\Category.tsx":"30","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\reducers.ts":"31","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\sagas.ts":"32","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\action.ts":"33"},{"size":1085,"mtime":1611490223162,"results":"34","hashOfConfig":"35"},{"size":1243,"mtime":1611490223054,"results":"36","hashOfConfig":"35"},{"size":825,"mtime":1611490223348,"results":"37","hashOfConfig":"35"},{"size":448,"mtime":1611132517297,"results":"38","hashOfConfig":"35"},{"size":387,"mtime":1611490223377,"results":"39","hashOfConfig":"35"},{"size":1370,"mtime":1611490223396,"results":"40","hashOfConfig":"35"},{"size":133,"mtime":1608124844178,"results":"41","hashOfConfig":"35"},{"size":926,"mtime":1611490223297,"results":"42","hashOfConfig":"35"},{"size":888,"mtime":1611490223313,"results":"43","hashOfConfig":"35"},{"size":4067,"mtime":1611490223288,"results":"44","hashOfConfig":"35"},{"size":473,"mtime":1611490223290,"results":"45","hashOfConfig":"35"},{"size":1443,"mtime":1611132517289,"results":"46","hashOfConfig":"35"},{"size":1915,"mtime":1611236149747,"results":"47","hashOfConfig":"35"},{"size":509,"mtime":1611490223398,"results":"48","hashOfConfig":"35"},{"size":1555,"mtime":1611490223155,"results":"49","hashOfConfig":"35"},{"size":273,"mtime":1611132517266,"results":"50","hashOfConfig":"35"},{"size":133,"mtime":1611132517280,"results":"51","hashOfConfig":"35"},{"size":2249,"mtime":1611132517281,"results":"52","hashOfConfig":"35"},{"size":2546,"mtime":1611132517282,"results":"53","hashOfConfig":"35"},{"size":17876,"mtime":1611132517278,"results":"54","hashOfConfig":"35"},{"size":1140,"mtime":1611132517279,"results":"55","hashOfConfig":"35"},{"size":130,"mtime":1611132517274,"results":"56","hashOfConfig":"35"},{"size":3175,"mtime":1611132517276,"results":"57","hashOfConfig":"35"},{"size":2167,"mtime":1611132517275,"results":"58","hashOfConfig":"35"},{"size":1912,"mtime":1611132517270,"results":"59","hashOfConfig":"35"},{"size":18778,"mtime":1611132517268,"results":"60","hashOfConfig":"35"},{"size":3870,"mtime":1611490223152,"results":"61","hashOfConfig":"35"},{"size":564,"mtime":1611132517257,"results":"62","hashOfConfig":"35"},{"size":142,"mtime":1611490223237,"results":"63","hashOfConfig":"35"},{"size":9329,"mtime":1611490223200,"results":"64","hashOfConfig":"35"},{"size":853,"mtime":1611490223253,"results":"65","hashOfConfig":"35"},{"size":2897,"mtime":1611490223286,"results":"66","hashOfConfig":"35"},{"size":1056,"mtime":1611490223212,"results":"67","hashOfConfig":"35"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"17trjw0",{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"73"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"73"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"73"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"73"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"73"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"73"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"128","usedDeprecatedRules":"73"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"139","messages":"140","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"141","messages":"142","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\App.tsx",["143"],"import React, {FunctionComponent} from \"react\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport {adminRoute} from \"./routes\";\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport LayoutWrap from \"./common/Layout\";\r\nimport {isLogined} from './utils/storage'\r\n\r\ntype Props = RouteComponentProps;\r\n\r\nconst App: FunctionComponent<Props> = () => {\r\n      return (\r\n          isLogined() ?\r\n              <LayoutWrap>\r\n                <Switch>\r\n                  {\r\n                    adminRoute.map((route: any) => {\r\n                      return (\r\n                          <Route\r\n                              key={route.path}\r\n                              path={route.path}\r\n                              exact={route.exact}\r\n                              render={routeProps => {\r\n                                return <route.component {...routeProps} />\r\n                              }}\r\n                          />\r\n\r\n                      )\r\n                    })\r\n                  }\r\n                  <Redirect from='/admin' to={adminRoute[0].path}/>\r\n                  <Redirect to='404'/>\r\n                </Switch>\r\n              </LayoutWrap> : <Redirect to='/login'/>\r\n      )\r\n    }\r\n;\r\n\r\nexport default App;\r\n\r\n\r\n\r\n",["144","145"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\routes\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\store\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\Login.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\actions.ts",["146","147","148","149"],"/*\r\n* @name: Login页面动作声明\r\n* @description: 声明action触发类型\r\n* @author: 陈相材\r\n* @time: 2020-12-15 20:01:24\r\n*/\r\n\r\nexport const TOLOGIN = 'TOLOGIN';\r\nexport type TOLOGIN = typeof TOLOGIN\r\n\r\nexport const SUCCESSLOGIN = 'SUCCESSLOGIN';\r\nexport type SUCCESSLOGIN = typeof SUCCESSLOGIN\r\n\r\nexport const ERRORLOGIN = 'ERRORLOGIN';\r\nexport type ERRORLOGIN = typeof ERRORLOGIN\r\n\r\nexport const NETERROR = 'NETERROR'\r\nexport type NETERROR = typeof NETERROR\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\login\\login-style.js",[],["150","151"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\http.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\utils\\storage.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\api\\index.ts",["152","153","154","155","156","157","158","159","160","161","162","163"],"// 登录模块\r\nexport const LoginApi = '/login'\r\nexport type LoginApi = typeof LoginApi\r\n\r\n// 员工模块\r\nexport const STAFFLIST = '/staff'\r\nexport type STAFFLIST = typeof STAFFLIST\r\n\r\nexport const STAFFADD = '/staff/add'\r\nexport type STAFFADD = typeof STAFFADD\r\n\r\nexport const DELSTAFF_URL = '/staff'\r\nexport type DELSTAFF_URL = typeof DELSTAFF_URL\r\n\r\nexport const EDITSTAFF_URL = '/staff/edit'\r\nexport type EDITSTAFF_URL = typeof EDITSTAFF_URL\r\n\r\n// 菜品模块\r\nexport const DISHLIST = '/dish'\r\nexport type DISHLIST = typeof DISHLIST\r\n\r\nexport const CATELIST_URL = '/category'\r\nexport type CATELIST_URL = typeof CATELIST_URL\r\n\r\nexport const ADDDISH_URL = '/dish/add'\r\nexport type ADDDISH_URL = typeof ADDDISH_URL\r\n\r\nexport const DELDISH_URL = '/dish/del'\r\nexport type DELDISH_URL = typeof DELDISH_URL\r\n\r\nexport const EDITDISH_URL = '/dish/edit'\r\nexport type EDITDISH_URL = typeof EDITDISH_URL\r\n\r\n// 图片上传地址\r\nexport const UPPIC_URL = 'http://localhost:8080/upload'\r\nexport type UPPIC_URL = typeof UPPIC_URL\r\n\r\n// 服务器端地址\r\nexport const SERVER_URL = 'http://localhost:8080'\r\nexport type SERVER_URL = typeof SERVER_URL\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dashboard\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\Staff.tsx",["164","165","166","167","168","169"],"import React, {FunctionComponent, useEffect, useMemo, useRef, useState} from 'react';\r\nimport {Button, Card, ConfigProvider, Form, Input, message, Modal, Popconfirm, Radio, Space, Table, Tag} from 'antd';\r\nimport {ColumnsType} from 'antd/es/table';\r\nimport {Dispatch} from \"redux\";\r\nimport {ADDSTAFF, DELSTAFF, EDITSTAFF, TOGGLEPAGE} from \"./actions\";\r\nimport {DELSTAFF_URL, EDITSTAFF_URL, STAFFADD, STAFFLIST} from \"../../../common/api\";\r\nimport DocumentTitle from \"react-document-title\";\r\nimport moment from 'moment';\r\nimport {FieldNumberOutlined, LockOutlined, UserOutlined} from \"@ant-design/icons\";\r\nimport {connect} from \"react-redux\";\r\nimport {getStore, setStore} from \"../../../utils/storage\";\r\nimport zhCN from 'antd/es/locale/zh_CN';\r\nimport Paging from \"../../../components/Paging\";\r\n\r\ninterface OwnProps {\r\n    [prop: string]: any\r\n\r\n    togglePage(value?: object): void\r\n\r\n    delStaff(value: string): void,\r\n\r\n    addStaff(value: object): void,\r\n\r\n    editStaff(value: object): void\r\n\r\n}\r\n\r\ninterface User {\r\n    _id: any,\r\n    name: string,\r\n    role: string,\r\n    title: string,\r\n    status: number,\r\n    account: number,\r\n    joinTime: string\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n    list: state.staff.list || [],\r\n    addStatus: state.staff.addStatus,\r\n    delStatus: state.staff.delStatus,\r\n    errorMsg: state.staff.errorMsg,\r\n    editStatus: state.staff.editStatus\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    delStaff(value: string) {\r\n        dispatch({\r\n            type: DELSTAFF,\r\n            url: DELSTAFF_URL,\r\n            data: value\r\n        })\r\n    },\r\n    addStaff(value: object) {\r\n        dispatch({\r\n            type: ADDSTAFF,\r\n            url: STAFFADD,\r\n            data: value\r\n        })\r\n    },\r\n    togglePage(value: object) {\r\n        dispatch({\r\n            type: TOGGLEPAGE,\r\n            url: STAFFLIST,\r\n            data: value\r\n        })\r\n    },\r\n    editStaff(value: object) {\r\n        dispatch({\r\n            type: EDITSTAFF,\r\n            url: EDITSTAFF_URL,\r\n            data: value\r\n        })\r\n    }\r\n})\r\n\r\n\r\n// todo 路由拦截\r\nconst Staff: FunctionComponent<Props> = (props) => {\r\n\r\n    // 表格列\r\n    const columns: ColumnsType<User> = [\r\n        {\r\n            title: '姓名',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: '角色',\r\n            key: 'role',\r\n            dataIndex: 'role',\r\n            render: (role: any) => (\r\n                <>\r\n                    {\r\n                        role === 'admin' &&\r\n                        <Tag color={'#0083B0'} key={role}>\r\n                            {\r\n                                role === 'admin' ? '管理员' : '员工'\r\n                            }\r\n                        </Tag>\r\n                    }\r\n                    {\r\n                        role === 'waiter' &&\r\n                        <Tag color={'#2ed573'} key={role}>\r\n                            {\r\n                                role = '服务员'\r\n                            }\r\n                        </Tag>\r\n                    }\r\n                    {\r\n                        role === 'chef' &&\r\n                        <Tag color={'#a17fe0'} key={role}>\r\n                            {\r\n                                role = '厨师'\r\n                            }\r\n                        </Tag>\r\n                    }\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: '入职时间',\r\n            key: 'joinTime',\r\n            dataIndex: 'joinTime',\r\n            render: (time: any) => (\r\n                <>\r\n                    {\r\n                        moment(time).format('YYYY-MM-DD')\r\n                    }\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: '在职状态',\r\n            key: 'status',\r\n            dataIndex: 'status',\r\n            render: (status: any) => (\r\n                <>\r\n                    {\r\n                        status === 1 && '在职'\r\n                    }\r\n                    {\r\n                        status === 0 && '请假'\r\n                    }\r\n                    {\r\n                        status === -1 && '离职'\r\n                    }\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: '操作',\r\n            key: '_id',\r\n            width: 300,\r\n            render: (text, records, index) => (\r\n                <Space>\r\n                    <Button type='primary' size={\"small\"} onClick={() => {\r\n                        edit_staff(records)\r\n                    }}>修改</Button>\r\n                    {\r\n                        <Popconfirm\r\n                            title=\"确定要删除此用户吗？\"\r\n                            placement=\"top\"\r\n                            okText=\"确定\"\r\n                            cancelText=\"取消\"\r\n                            onConfirm={() => {\r\n                                del_staff(records)\r\n                            }}\r\n                        >\r\n                            <Button type='primary' danger size={\"small\"}>删除</Button>\r\n                        </Popconfirm>\r\n                    }\r\n                </Space>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    //选择框(身份信息)\r\n    const positionOptions = [\r\n        {label: '服务员', value: 'waiter', style: {marginRight: 10}},\r\n        {label: '厨师', value: 'chef', style: {marginRight: 10}},\r\n        {label: '管理员', value: 'admin'},\r\n    ];\r\n\r\n    //列表显示\r\n    const [pageMsg, setPageMsg] = useState({\r\n        query: '',\r\n        page: 1,\r\n        pagesize: 10\r\n    })\r\n    const [userList, setUserList] = useState([])\r\n\r\n\r\n    /**\r\n     * 新增和编辑弹出框\r\n     * visible: 弹框可见性\r\n     * selected: 选中项\r\n     * popStaffStyle: 弹窗类型\r\n     */\r\n    const [visible, setVisible] = useState(false);\r\n    const [selected, setSelected] = useState(['waiter'])\r\n    const [popStaffStyle, setPopStaffStyle] = useState('')\r\n    const [editValues, setEditValues] = useState({account: 0, name: '', role: '', status: -9})\r\n\r\n    // 表单提交函数 新增和编辑\r\n    const handleOk = (value: any) => {\r\n        if (value.hasOwnProperty('password')) {\r\n            // 找出最大值 作为账号account的值\r\n            value.account = props.list.records.reduce((pre: any, cur: any) => pre > cur.account ? pre : `${cur.account + 1}`, 0)\r\n            value.joinTime = new Date().getTime()\r\n            props.addStaff(value)\r\n            setVisible(false);\r\n        } else {\r\n            // @ts-ignore\r\n            value.name = edited_name.current.state.value\r\n            value.account = editValues.account\r\n\r\n            // Dispach编辑行为\r\n            props.editStaff(value)\r\n            setVisible(false)\r\n        }\r\n    };\r\n\r\n    const edited_name = useRef(null);\r\n\r\n    // 取消弹出框\r\n    const handleCancel = () => {\r\n        // todo 取消弹出框确认\r\n        console.log('Clicked cancel button');\r\n        setVisible(false);\r\n    };\r\n\r\n    // 新增用户身份选择项\r\n    const onChange1 = (e: any) => {\r\n        const selectedValue = e.target.value\r\n        setSelected(selectedValue)\r\n    }\r\n\r\n    // 删除员工触发\r\n    const del_staff = (value: User) => {\r\n        const {_id} = value\r\n        props.delStaff(_id)\r\n    }\r\n\r\n    // 编辑员工触发\r\n    const edit_staff = (value: User) => {\r\n        setVisible(true)\r\n        setPopStaffStyle('编辑员工')\r\n        setEditValues({\r\n                account: value.account,\r\n                name: value.name,\r\n                role: value.role,\r\n                status: value.status\r\n            }\r\n        )\r\n    }\r\n\r\n    // 监听拿到最新的修改信息 状态更新立即更改\r\n    useEffect(() => {\r\n        const {role} = editValues\r\n        setSelected([`${role}`])\r\n        // console.log(selected)\r\n        // console.log(editValues)\r\n    }, [editValues])\r\n\r\n    // 员工列表数据和事件处理\r\n    useEffect(() => {\r\n        props.togglePage(pageMsg)\r\n        const {list} = props\r\n        const user_List = list.records\r\n        setUserList(user_List)\r\n        //数组长度发生变化后 获取数据 渲染列表\r\n    }, [props.list.total, props.list.page, props.list.size])\r\n\r\n    // 修改状态后 部分信息改变 通过memo监听list变化 重新渲染页面\r\n    useMemo(() => {\r\n        const {list} = props\r\n        const user_List = list.records\r\n        setUserList(user_List)\r\n    }, [props.list])\r\n\r\n\r\n    // 弹框状态管理 fix 状态存储在缓存 解决每次重新加载页面弹框问题\r\n    useEffect(() => {\r\n        const {errorMsg, addStatus, delStatus, editStatus} = props\r\n        const astatus = getStore('addStatus')\r\n        const dstatus = getStore('delStatus')\r\n        const estatus = getStore('editStatus')\r\n        //添加\r\n        if (astatus == addStatus) {\r\n        } else {\r\n            setStore('addStatus', addStatus)\r\n            if (addStatus < 1) message.success('员工添加成功！')\r\n            else if (errorMsg && errorMsg.includes('密码')) message.warning('请输入3位数以上的密码！')\r\n            else if (errorMsg && errorMsg.includes('姓名')) message.warning('请输入正确的姓名格式！')\r\n            else if (errorMsg && errorMsg.includes('注册')) message.error('此账号已被注册！')\r\n        }\r\n        //删除\r\n        if (dstatus == delStatus) {\r\n        } else {\r\n            setStore('delStatus', delStatus)\r\n            if (delStatus < 1) message.success('员工删除成功！')\r\n        }\r\n        //修改\r\n        if (estatus == editStatus) {\r\n        } else {\r\n            setStore('editStatus', editStatus)\r\n            if (editStatus < 1) message.success('资料修改成功！')\r\n        }\r\n    }, [props.addStatus, props.delStatus, props.editStatus])\r\n\r\n    return (\r\n        <DocumentTitle title=\"员工管理\">\r\n            <ConfigProvider locale={zhCN}>\r\n                <Card title=\"员工列表\"\r\n                      extra={\r\n                          <Button type=\"primary\" onClick={() => {\r\n                              setVisible(true)\r\n                              setPopStaffStyle('新增员工')\r\n                          }}>新增</Button>\r\n                      }\r\n                      headStyle={{fontSize: 18}}\r\n                      style={{width: '100%'}}\r\n                >\r\n                    {\r\n                        userList &&\r\n                        < Table\r\n                            rowKey='_id'\r\n                            bordered\r\n                            columns={columns}\r\n                            dataSource={userList}\r\n                            pagination={false}\r\n                        />\r\n                    }\r\n                    {\r\n                        userList &&\r\n                        <Paging page={props.list.page} total={props.list.total} fun={(page = 1, pageSize = 10): any => {\r\n                            props.togglePage({\r\n                                query: '',\r\n                                page: page,\r\n                                pagesize: pageSize\r\n                            })\r\n                            setPageMsg({\r\n                                query: '',\r\n                                page: page,\r\n                                pagesize: pageSize\r\n                            })\r\n                        }}/>\r\n                    }\r\n                    {/*新增员工弹出框*/}\r\n                    <Modal\r\n                        title={popStaffStyle}\r\n                        visible={visible}\r\n                        onCancel={handleCancel}\r\n                        destroyOnClose\r\n                        footer={null}\r\n                    >\r\n                        <Form name=\"normal_login\" className=\"login-form\" onFinish={handleOk}>\r\n                            <Form.Item name=\"account\"\r\n                            >\r\n                                {\r\n                                    popStaffStyle === '新增员工' &&\r\n                                    <Form.Item name=\"account\" style={{margin: 0}}>\r\n                                        <Input\r\n                                            defaultValue={props.list.records.reduce((pre: any, cur: any) => {\r\n                                                // console.log(pre, cur.account)\r\n                                                return pre > cur.account ? `${pre}` : `${cur.account + 1}`\r\n                                            }, 0)}\r\n                                            disabled prefix={<FieldNumberOutlined className=\"site-form-item-icon\"/>}\r\n                                            placeholder=\"工号\"/>\r\n                                    </Form.Item>\r\n                                }\r\n                                {\r\n                                    popStaffStyle === '编辑员工' &&\r\n                                    <Form.Item name=\"account\" style={{margin: 0}}>\r\n                                        <Input\r\n                                            defaultValue={editValues.account}\r\n                                            disabled prefix={<FieldNumberOutlined className=\"site-form-item-icon\"/>}\r\n                                            placeholder=\"工号\"/>\r\n                                    </Form.Item>\r\n                                }\r\n                            </Form.Item>\r\n                            {\r\n                                popStaffStyle === '新增员工' &&\r\n                                <Form.Item name=\"name\" rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: '请输入姓名',\r\n                                    },\r\n                                ]}>\r\n                                    <Input autoFocus={true}\r\n                                           prefix={<UserOutlined className=\"site-form-item-icon\"/>}\r\n                                           placeholder=\"请输入2位及以上的姓名\"/>\r\n                                </Form.Item>\r\n                            }\r\n                            {\r\n                                popStaffStyle === '编辑员工' &&\r\n                                <Form.Item name=\"name\" initialValue={editValues.name}>\r\n                                    <Input autoFocus={true}\r\n                                           defaultValue={editValues.name}\r\n                                           ref={edited_name}\r\n                                           prefix={<UserOutlined className=\"site-form-item-icon\"/>}\r\n                                           placeholder=\"请输入2位及以上的姓名\"/>\r\n                                </Form.Item>\r\n                            }\r\n                            {\r\n                                popStaffStyle === '新增员工' &&\r\n                                <Form.Item name=\"password\" rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: '请输入密码',\r\n                                    },\r\n                                ]}>\r\n                                    <Input.Password prefix={<LockOutlined className=\"site-form-item-icon\"/>}\r\n                                                    type=\"password\"\r\n                                                    placeholder=\"请输入3位及以上的密码\"/>\r\n                                </Form.Item>\r\n                            }\r\n                            <Form.Item name=\"role\" initialValue={popStaffStyle === '编辑员工' ? selected[0] : 'waiter'}>\r\n                                <Radio.Group\r\n                                    options={positionOptions}\r\n                                    onChange={onChange1}\r\n                                    value={selected[0]}\r\n                                    optionType=\"button\"\r\n                                />\r\n                            </Form.Item>\r\n                            <Form.Item name=\"status\" initialValue={popStaffStyle === '编辑员工' ? editValues.status : 1}\r\n                                       style={{marginTop: -10}}>\r\n                                <Radio.Group>\r\n                                    <Radio value={1}>在职</Radio>\r\n                                    <Radio value={0}>请假</Radio>\r\n                                    <Radio value={-1}>离职</Radio>\r\n                                </Radio.Group>\r\n                            </Form.Item>\r\n                            <Form.Item style={{marginBottom: 0}}>\r\n                                <Space style={{float: \"right\"}}>\r\n                                    <Button type=\"default\" onClick={handleCancel}>取消</Button>\r\n                                    {\r\n                                        popStaffStyle === '新增员工' &&\r\n                                        <Button type=\"primary\" htmlType=\"submit\"\r\n                                                className=\"login-form-button\">添加</Button>\r\n                                    }\r\n                                    {\r\n                                        popStaffStyle === '编辑员工' &&\r\n                                        <Button type=\"primary\" htmlType=\"submit\"\r\n                                                className=\"login-form-button\">提交</Button>\r\n                                    }\r\n                                </Space>\r\n                            </Form.Item>\r\n                        </Form>\r\n                    </Modal>\r\n                </Card>\r\n            </ConfigProvider>\r\n        </DocumentTitle>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Staff);\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\staff\\actions.ts",["170","171","172","173","174","175","176","177","178","179","180","181","182","183"],"export const GETFAILED = 'getfailed'\r\nexport type GETFAILED = typeof GETFAILED\r\n\r\nexport const GETLIST = 'getlist'\r\nexport type GETLIST = typeof GETLIST\r\n\r\nexport const GETSUCCESS = 'getsuccess'\r\nexport type GETSUCCESS = typeof GETSUCCESS\r\n\r\nexport const ADDSTAFF = 'addstaff'\r\nexport type ADDSTAFF = typeof ADDSTAFF\r\n\r\nexport const ADDSUCCESS = 'addsuccess'\r\nexport type ADDSUCCESS = typeof ADDSUCCESS\r\n\r\nexport const ADDERROR = 'adderror'\r\nexport type ADDERROR = typeof ADDERROR\r\n\r\nexport const TOGGLEPAGE = 'togglePage'\r\nexport type TOGGLEPAGE = typeof TOGGLEPAGE\r\n\r\nexport const TOGGLED = 'toggled'\r\nexport type TOGGLED = typeof TOGGLED\r\n\r\nexport const DELSTAFF = 'delstaff'\r\nexport type DELSTAFF = typeof DELSTAFF\r\n\r\nexport const DELSUCCESS = 'delsuccess'\r\nexport type DELSUCCESS = typeof DELSUCCESS\r\n\r\nexport const DELERROR = 'delerror'\r\nexport type DELERROR = typeof DELERROR\r\n\r\nexport const EDITSTAFF = 'editstaff'\r\nexport type EDITSTAFF = typeof EDITSTAFF\r\n\r\nexport const EDITSUCCESS = 'editsuccess'\r\nexport type EDITSUCCESS = typeof EDITSUCCESS\r\n\r\nexport const EDITERROR = 'editerror'\r\nexport type EDITERROR = typeof EDITERROR\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\sagas.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\actions.ts",["184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205"],"export const GETFAILED = 'getfailed'\r\nexport type GETFAILED = typeof GETFAILED\r\n\r\nexport const GETDISHLIST = 'getlist'\r\nexport type GETDISHLIST = typeof GETDISHLIST\r\n\r\nexport const GETCATELIST = 'getcatelist'\r\nexport type GETCATELIST = typeof GETCATELIST\r\n\r\nexport const GETCATELISTSUCCESS = 'getcatelistsuccess'\r\nexport type GETCATELISTSUCCESS = typeof GETCATELISTSUCCESS\r\n\r\n\r\nexport const GETSUCCESS = 'getsuccess'\r\nexport type GETSUCCESS = typeof GETSUCCESS\r\n\r\n//菜品\r\nexport const ADDDISH = 'adddish'\r\nexport type ADDDISH = typeof ADDDISH\r\n\r\nexport const ADDDISHSUC = 'adddishsuc'\r\nexport type ADDDISHSUC = typeof ADDDISHSUC\r\n\r\nexport const ADDDISHERR = 'adddisherr'\r\nexport type ADDDISHERR = typeof ADDDISHERR\r\n\r\nexport const EDITDISHDISHSUC = 'editdishdishsuc'\r\nexport type EDITDISHDISHSUC = typeof EDITDISHDISHSUC\r\n\r\nexport const EDITDISHERR = 'editdisherr'\r\nexport type EDITDISHERR = typeof EDITDISHERR\r\n\r\nexport const EDITDISH = 'editdish'\r\nexport type EDITDISH = typeof EDITDISH\r\n\r\nexport const DELDISH = 'deldish'\r\nexport type DELDISH = typeof DELDISH\r\n\r\nexport const DELDISHSUC = 'deldishsuc'\r\nexport type DELDISHSUC = typeof DELDISHSUC\r\n\r\nexport const DELDISHERR = 'deldisherr'\r\nexport type DELDISHERR = typeof DELDISHERR\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const ADDSUCCESS = 'addsuccess'\r\nexport type ADDSUCCESS = typeof ADDSUCCESS\r\n\r\nexport const ADDERROR = 'adderror'\r\nexport type ADDERROR = typeof ADDERROR\r\n\r\nexport const TOGGLEPAGE = 'togglePage'\r\nexport type TOGGLEPAGE = typeof TOGGLEPAGE\r\n\r\nexport const TOGGLED = 'toggled'\r\nexport type TOGGLED = typeof TOGGLED\r\n\r\n\r\nexport const DELSUCCESS = 'delsuccess'\r\nexport type DELSUCCESS = typeof DELSUCCESS\r\n\r\nexport const DELERROR = 'delerror'\r\nexport type DELERROR = typeof DELERROR\r\n\r\nexport const EDITSUCCESS = 'editsuccess'\r\nexport type EDITSUCCESS = typeof EDITSUCCESS\r\n\r\nexport const EDITERROR = 'editerror'\r\nexport type EDITERROR = typeof EDITERROR\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\dish\\Dish.tsx",["206","207","208","209","210"],"import React, {FunctionComponent, useEffect, useMemo, useState} from 'react';\r\nimport {Dispatch} from \"redux\";\r\nimport {ADDDISH_URL, DELDISH_URL, DISHLIST, EDITDISH_URL, SERVER_URL, UPPIC_URL} from \"../../../common/api\";\r\nimport {connect} from \"react-redux\";\r\nimport DocumentTitle from \"react-document-title\";\r\nimport zhCN from \"antd/es/locale/zh_CN\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  Col,\r\n  ConfigProvider,\r\n  Drawer,\r\n  Form,\r\n  Input,\r\n  message,\r\n  Modal,\r\n  Popconfirm,\r\n  Row,\r\n  Select,\r\n  Space,\r\n  Table,\r\n  Upload\r\n} from \"antd\";\r\nimport {ColumnsType} from \"antd/es/table\";\r\nimport {ADDDISH, DELDISH, EDITDISH, GETDISHLIST} from \"./actions\";\r\nimport Paging from \"../../../components/Paging\";\r\nimport {DeleteOutlined, EditOutlined, PlusOutlined,} from '@ant-design/icons';\r\nimport './dish.css'\r\nimport {getStore, setStore} from \"../../../utils/storage\";\r\n\r\nconst {Option} = Select;\r\n\r\ninterface OwnProps {\r\n  [prop: string]: any\r\n\r\n  toggleDishPage(value?: object): void\r\n\r\n  getCateList(): void,\r\n\r\n  addDish(value: object): void,\r\n\r\n  delDish(value: string): void\r\n\r\n  editDish(value: object): void\r\n\r\n\r\n}\r\n\r\ninterface Dishes {\r\n  _id: any,\r\n  name: string,\r\n  category: {\r\n    _id: string,\r\n    foodTypeName: string\r\n  },\r\n  number: number,\r\n  price: number,\r\n  picture: string\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  list: state.dish.list || [],\r\n  cateList: state.dish.cateList,\r\n  addDishStatus: state.dish.addDishStatus,\r\n  delDishStatus: state.dish.delDishStatus,\r\n  errorMsgDish: state.dish.errorMsgDish,\r\n  editDishStatus: state.dish.editDishStatus\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  delDish(value: string) {\r\n    dispatch({\r\n      type: DELDISH,\r\n      url: DELDISH_URL,\r\n      data: value\r\n    })\r\n  },\r\n  addDish(value: object) {\r\n    dispatch({\r\n      type: ADDDISH,\r\n      url: ADDDISH_URL,\r\n      data: value\r\n    })\r\n  },\r\n  toggleDishPage(value: object) {\r\n    dispatch({\r\n      type: GETDISHLIST,\r\n      url: DISHLIST,\r\n      data: value\r\n    })\r\n  },\r\n  editDish(value: object) {\r\n    dispatch({\r\n      type: EDITDISH,\r\n      url: EDITDISH_URL,\r\n      data: value\r\n    })\r\n  }\r\n})\r\n\r\n\r\nconst Dish: FunctionComponent<Props> = (props) => {\r\n  // 表格列\r\n  const columns: ColumnsType<Dishes> = [\r\n    {\r\n      title: '菜品',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: '分类',\r\n      key: 'category',\r\n      dataIndex: 'category',\r\n      render: (value, records, index) => (\r\n          <>\r\n            {records.category.foodTypeName}\r\n          </>\r\n      ),\r\n    },\r\n    {\r\n      title: '售价(元)',\r\n      dataIndex: 'price',\r\n      key: 'price',\r\n    },\r\n    {\r\n      title: '库存',\r\n      key: 'number',\r\n      dataIndex: 'number',\r\n      render: (number: number) => (\r\n          <>\r\n            {number}\r\n          </>\r\n      ),\r\n    },\r\n    {\r\n      title: '操作',\r\n      key: '_id',\r\n      width: 300,\r\n      render: (text, records, index) => (\r\n          <Space>\r\n            <Button type=\"primary\" onClick={() => {\r\n              edit_dish(records)\r\n            }} shape=\"circle\" icon={<EditOutlined/>} size={\"small\"}/>\r\n            {\r\n              <Popconfirm\r\n                  title=\"确定要删除此菜品吗？\"\r\n                  placement=\"top\"\r\n                  okText=\"确定\"\r\n                  cancelText=\"取消\"\r\n                  onConfirm={() => {\r\n                    del_dish(records)\r\n                  }}\r\n              >\r\n                <Button type=\"primary\" danger shape=\"circle\" icon={<DeleteOutlined/>} size={\"small\"}/>\r\n              </Popconfirm>\r\n            }\r\n          </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 修改菜品信息\r\n  const edit_dish = (records: Dishes) => {\r\n    console.log(records)\r\n    SetStateVisible(true)\r\n    setDrawerType('编辑菜品')\r\n    SetEditValue({\r\n      _id: records._id,\r\n      name: records.name,\r\n      picture: records.picture,\r\n      number: records.number,\r\n      price: records.price,\r\n      categoryId: records.category._id,\r\n      foodTypeName: records.category.foodTypeName\r\n    })\r\n\r\n  }\r\n\r\n  const [editValue, SetEditValue] = useState({\r\n    _id: '',\r\n    name: '',\r\n    picture: '',\r\n    number: 888,\r\n    price: 0,\r\n    categoryId: '',\r\n    foodTypeName: ''\r\n\r\n  })\r\n  const [dishList, setDishList] = useState([])\r\n\r\n\r\n  //列表显示\r\n  const [pageMsg, setPageMsg] = useState({\r\n    query: '',\r\n    page: 1,\r\n    pagesize: 10\r\n  })\r\n  const [stateVisible, SetStateVisible] = useState(false)\r\n  const onClose = () => {\r\n    setFileList([])\r\n    SetStateVisible(false)\r\n  };\r\n\r\n\r\n  // 列表数据和事件处理\r\n  useEffect(() => {\r\n    props.toggleDishPage(pageMsg)\r\n    const {list} = props\r\n    const dish_List = list.records\r\n    setDishList(dish_List)\r\n    //数组长度发生变化后 获取数据 渲染列表\r\n  }, [props.list.total, props.list.page, props.list.size])\r\n\r\n  // 修改状态后 部分信息改变 通过memo监听list变化 重新渲染页面\r\n  useMemo(() => {\r\n    const {list} = props\r\n    const dishList = list.records\r\n    setDishList(dishList)\r\n  }, [props.list])\r\n\r\n\r\n  // 点击编辑按钮后 立马获得点击当前元素的信息\r\n  useEffect(() => {\r\n    // console.log(editValue)\r\n    // console.log(fileLists)\r\n    const picurl = editValue.picture || ''\r\n    if (picurl !== '') {\r\n      console.log(111111)\r\n      const photo = [{\r\n        uid: 123,\r\n        status: 'done',\r\n        type: 'image/png',\r\n        url: `${SERVER_URL}${picurl}`\r\n      }]\r\n      // @ts-ignore\r\n      setFileList(photo)\r\n    } else {\r\n\r\n    }\r\n  }, [editValue])\r\n\r\n\r\n  /**\r\n   * 图片上传组件\r\n   * previewVisible 预览可见性\r\n   * previewImage 预览图片\r\n   * previewTitle 预览标题\r\n   * fileList 图片数组\r\n   *\r\n   */\r\n  const [previewVisible, setPreviewVisible] = useState(false)\r\n  const [previewImage, setPreviewImage] = useState('')\r\n  const [previewTitle, setPreviewTitle] = useState('')\r\n  const [fileLists, setFileList] = useState([])\r\n  const [drawerType, setDrawerType] = useState('')\r\n\r\n\r\n  const handleCancel = () => onClose();\r\n\r\n  function getBase64(file: any) {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  }\r\n\r\n  // 图片预览\r\n  const handlePreview = async (file: any) => {\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n    setPreviewImage(file.url || file.preview)\r\n    setPreviewVisible(true)\r\n    setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1))\r\n  };\r\n\r\n  // todo 上传多张照片\r\n  const [dishImgUrl, setDishImgUrl] = useState('')\r\n  // @ts-ignore  图片状态发生变化时\r\n  const handleChange = ({fileList}) => {\r\n    setFileList(fileList)\r\n    if (fileList.length > 0 && fileList[0].status === 'done') setDishImgUrl(fileList[0].response[0].file)\r\n  };\r\n\r\n  // 图片上传按钮\r\n  const uploadButton = (<div>\r\n    <PlusOutlined/>\r\n    <div style={{marginTop: 8}}>点击上传</div>\r\n  </div>);\r\n\r\n  // 新增/编辑菜品表单提交函数\r\n  const handleForm = (value: any) => {\r\n    if (drawerType === '新增菜品') {\r\n      value.picture = dishImgUrl\r\n      props.addDish(value)\r\n    } else {\r\n      value.categoryId = editValue.categoryId\r\n      value._id = editValue._id\r\n      value.picture = dishImgUrl\r\n      console.log(value)\r\n      props.editDish(value)\r\n    }\r\n    onClose()\r\n  }\r\n\r\n  // 删除菜品触发\r\n  const del_dish = (value: Dishes) => {\r\n    const {_id} = value\r\n    props.delDish(_id)\r\n  }\r\n\r\n\r\n  // 上传前验证图片类型和大小\r\n  function beforeUpload(file: any) {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n      message.error('只能上传JPG或者PNG图片!');\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n      message.error('图片大小不能超过2M!');\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n  }\r\n\r\n\r\n  // 弹框状态管理 fix 状态存储在缓存 解决每次重新加载页面弹框问题\r\n  useEffect(() => {\r\n    console.log(props)\r\n    const {errorMsgDish, addDishStatus, delDishStatus, editDishStatus} = props\r\n    const aastatus = getStore('addDishStatus')\r\n    const ddstatus = getStore('delDishStatus')\r\n    const eestatus = getStore('editDishStatus')\r\n    //添加\r\n    if (aastatus == addDishStatus) {\r\n    } else {\r\n      console.log(props)\r\n      console.log(errorMsgDish)\r\n      setStore('addDishStatus', addDishStatus)\r\n      if (addDishStatus < 1) message.success('菜品添加成功！')\r\n      else if (errorMsgDish && errorMsgDish.includes('存在')) message.error('此菜品已存在！')\r\n    }\r\n    //删除\r\n    if (ddstatus == delDishStatus) {\r\n    } else {\r\n      setStore('delDishStatus', delDishStatus)\r\n      if (delDishStatus < 1) message.success('菜品删除成功！')\r\n    }\r\n    //修改\r\n    if (eestatus == editDishStatus) {\r\n    } else {\r\n      setStore('editDishStatus', editDishStatus)\r\n      if (editDishStatus < 1) message.success('菜品修改成功！')\r\n    }\r\n  }, [props])\r\n\r\n  // .addDishStatus, props.delDishStatus, props.editDishStatus\r\n\r\n  return (\r\n      <DocumentTitle title=\"菜品管理\">\r\n        <ConfigProvider locale={zhCN}>\r\n          <Card title=\"菜品列表\" extra={\r\n            <Button onClick={() => {\r\n              SetStateVisible(true)\r\n              setDrawerType('新增菜品')\r\n            }} type=\"primary\" shape=\"circle\" icon={<PlusOutlined/>} size={\"large\"}/>\r\n          }\r\n                style={{width: '100%'}}>\r\n            {\r\n              dishList && <Table\r\n                  rowKey='_id'\r\n                  bordered\r\n                  columns={columns}\r\n                  dataSource={dishList}\r\n                  pagination={false}\r\n              />\r\n            }\r\n            {\r\n              dishList &&\r\n              <Paging page={props.list.page} total={props.list.total} fun={(page = 1, pageSize = 10): any => {\r\n                props.toggleDishPage({\r\n                  query: '',\r\n                  page: page,\r\n                  pagesize: pageSize\r\n                })\r\n                setPageMsg({\r\n                  query: '',\r\n                  page: page,\r\n                  pagesize: pageSize\r\n                })\r\n              }}/>\r\n            }\r\n\r\n            {/*新增菜品抽屉框*/}\r\n            <Drawer\r\n                title={drawerType}\r\n                width={330}\r\n                onClose={onClose}\r\n                visible={stateVisible}\r\n                footer={null}\r\n                destroyOnClose\r\n            >\r\n              <>\r\n                <Upload\r\n                    action={UPPIC_URL}\r\n                    listType=\"picture-card\"\r\n                    fileList={fileLists}\r\n                    onPreview={handlePreview}\r\n                    onChange={handleChange}\r\n                    beforeUpload={beforeUpload}\r\n                >\r\n                  {fileLists.length >= 1 ? null : uploadButton}\r\n                </Upload>\r\n                <Modal\r\n                    visible={previewVisible}\r\n                    title={previewTitle}\r\n                    footer={null}\r\n                    onCancel={handleCancel}\r\n                >\r\n                  <img alt=\"example\" style={{width: '100%'}} src={previewImage}/>\r\n                </Modal>\r\n              </>\r\n\r\n              <Form layout=\"vertical\"\r\n                    requiredMark\r\n                    style={{marginTop: 30}}\r\n                    onFinish={handleForm}\r\n              >\r\n                <Row gutter={16}>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          name=\"name\"\r\n                          label=\"菜名\"\r\n                          rules={[{required: true, message: '请输入名称'}]}\r\n                      >\r\n                          <Input autoFocus={true} placeholder=\"请输入名称\"/>\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          name=\"name\"\r\n                          label=\"菜名\"\r\n                          initialValue={editValue.name}\r\n                          rules={[{required: true, message: '请输入名称'}]}\r\n                      >\r\n                          <Input placeholder=\"请输入名称\" defaultValue={editValue.name} autoFocus={true}/>\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          name=\"price\"\r\n                          label=\"单价\"\r\n                          rules={[{required: true, message: '请输入单价'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              addonAfter=\"元\"\r\n                              placeholder=\"请输入单价\"\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          initialValue={editValue.price}\r\n                          name=\"price\"\r\n                          label=\"单价\"\r\n                          rules={[{required: true, message: '请输入单价'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              addonAfter=\"元\"\r\n                              placeholder=\"请输入单价\"\r\n                              defaultValue={editValue.price}\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                </Row>\r\n                <Row gutter={16}>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          name=\"category\"\r\n                          label=\"分类\"\r\n                          rules={[{required: true, message: '请选择分类'}]}\r\n                      >\r\n                          <Select placeholder=\"请选择分类\">\r\n                            {\r\n                              props.cateList &&\r\n                              props.cateList.map((value: any) => (\r\n                                      <Option value={value._id}\r\n                                              key={value._id}>\r\n                                        {value.foodTypeName}\r\n                                      </Option>\r\n                                  )\r\n                              )\r\n                            }\r\n                          </Select>\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          initialValue={editValue.foodTypeName}\r\n                          name=\"category\"\r\n                          label=\"分类\"\r\n                          rules={[{required: true, message: '请选择分类'}]}\r\n                      >\r\n                          <Select placeholder=\"请选择分类\" defaultValue={editValue.foodTypeName}>\r\n                            {\r\n                              props.cateList &&\r\n                              props.cateList.map((value: any) => (\r\n                                      <Option value={value._id}\r\n                                              key={value._id}>\r\n                                        {value.foodTypeName}\r\n                                      </Option>\r\n                                  )\r\n                              )\r\n                            }\r\n                          </Select>\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                  <Col span={23}>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Form.Item\r\n                          initialValue={888}\r\n                          name=\"number\"\r\n                          label=\"库存\"\r\n                          rules={[{required: true, message: '请输入库存'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              placeholder=\"请输入库存\"\r\n                              defaultValue={888}\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Form.Item\r\n                          initialValue={editValue.number}\r\n                          name=\"number\"\r\n                          label=\"库存\"\r\n                          rules={[{required: true, message: '请输入库存'}]}\r\n                      >\r\n                          <Input\r\n                              type={'number'}\r\n                              style={{width: '100%'}}\r\n                              placeholder=\"请输入库存\"\r\n                              defaultValue={editValue.number}\r\n                          />\r\n                      </Form.Item>\r\n                    }\r\n                  </Col>\r\n                </Row>\r\n                <Form.Item style={{marginTop: 66, marginRight: 14}}>\r\n                  <Space style={{float: \"right\"}}>\r\n                    <Button type=\"default\" onClick={onClose}>取消</Button>\r\n                    {\r\n                      drawerType === '新增菜品' &&\r\n                      <Button type=\"primary\" htmlType=\"submit\"\r\n                              className=\"login-form-button\">添加</Button>\r\n                    }\r\n                    {\r\n                      drawerType === '编辑菜品' &&\r\n                      <Button type=\"primary\" htmlType=\"submit\"\r\n                              className=\"login-form-button\">提交</Button>\r\n                    }\r\n                  </Space>\r\n                </Form.Item>\r\n              </Form>\r\n            </Drawer>\r\n          </Card>\r\n        </ConfigProvider>\r\n      </DocumentTitle>\r\n  );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dish)\r\n\r\n","D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\common\\Layout\\index.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\components\\Paging.tsx",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\index.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\Category.tsx",["211","212"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\reducers.ts",[],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\sagas.ts",["213","214","215"],"D:\\Users\\Chen\\WebstormProjects\\restaurant-ordering-system\\src\\pages\\admin\\category\\action.ts",["216","217","218","219","220","221","222","223","224","225","226","227"],{"ruleId":"228","severity":1,"message":"229","line":6,"column":9,"nodeType":"230","messageId":"231","endLine":6,"endColumn":18},{"ruleId":"232","replacedBy":"233"},{"ruleId":"234","replacedBy":"235"},{"ruleId":"236","severity":1,"message":"237","line":9,"column":13,"nodeType":"230","messageId":"238","endLine":9,"endColumn":20},{"ruleId":"236","severity":1,"message":"239","line":12,"column":13,"nodeType":"230","messageId":"238","endLine":12,"endColumn":25},{"ruleId":"236","severity":1,"message":"240","line":15,"column":13,"nodeType":"230","messageId":"238","endLine":15,"endColumn":23},{"ruleId":"236","severity":1,"message":"241","line":18,"column":13,"nodeType":"230","messageId":"238","endLine":18,"endColumn":21},{"ruleId":"232","replacedBy":"233"},{"ruleId":"234","replacedBy":"235"},{"ruleId":"236","severity":1,"message":"242","line":3,"column":13,"nodeType":"230","messageId":"238","endLine":3,"endColumn":21},{"ruleId":"236","severity":1,"message":"243","line":7,"column":13,"nodeType":"230","messageId":"238","endLine":7,"endColumn":22},{"ruleId":"236","severity":1,"message":"244","line":10,"column":13,"nodeType":"230","messageId":"238","endLine":10,"endColumn":21},{"ruleId":"236","severity":1,"message":"245","line":13,"column":13,"nodeType":"230","messageId":"238","endLine":13,"endColumn":25},{"ruleId":"236","severity":1,"message":"246","line":16,"column":13,"nodeType":"230","messageId":"238","endLine":16,"endColumn":26},{"ruleId":"236","severity":1,"message":"247","line":20,"column":13,"nodeType":"230","messageId":"238","endLine":20,"endColumn":21},{"ruleId":"236","severity":1,"message":"248","line":23,"column":13,"nodeType":"230","messageId":"238","endLine":23,"endColumn":25},{"ruleId":"236","severity":1,"message":"249","line":26,"column":13,"nodeType":"230","messageId":"238","endLine":26,"endColumn":24},{"ruleId":"236","severity":1,"message":"250","line":29,"column":13,"nodeType":"230","messageId":"238","endLine":29,"endColumn":24},{"ruleId":"236","severity":1,"message":"251","line":32,"column":13,"nodeType":"230","messageId":"238","endLine":32,"endColumn":25},{"ruleId":"236","severity":1,"message":"252","line":36,"column":13,"nodeType":"230","messageId":"238","endLine":36,"endColumn":22},{"ruleId":"236","severity":1,"message":"253","line":40,"column":13,"nodeType":"230","messageId":"238","endLine":40,"endColumn":23},{"ruleId":"254","severity":1,"message":"255","line":274,"column":8,"nodeType":"256","endLine":274,"endColumn":60,"suggestions":"257"},{"ruleId":"254","severity":1,"message":"258","line":281,"column":8,"nodeType":"256","endLine":281,"endColumn":20,"suggestions":"259"},{"ruleId":"260","severity":1,"message":"261","line":291,"column":21,"nodeType":"262","messageId":"263","endLine":291,"endColumn":23},{"ruleId":"260","severity":1,"message":"261","line":300,"column":21,"nodeType":"262","messageId":"263","endLine":300,"endColumn":23},{"ruleId":"260","severity":1,"message":"261","line":306,"column":21,"nodeType":"262","messageId":"263","endLine":306,"endColumn":23},{"ruleId":"254","severity":1,"message":"264","line":311,"column":8,"nodeType":"256","endLine":311,"endColumn":60,"suggestions":"265"},{"ruleId":"236","severity":1,"message":"266","line":2,"column":13,"nodeType":"230","messageId":"238","endLine":2,"endColumn":22},{"ruleId":"236","severity":1,"message":"267","line":5,"column":13,"nodeType":"230","messageId":"238","endLine":5,"endColumn":20},{"ruleId":"236","severity":1,"message":"268","line":8,"column":13,"nodeType":"230","messageId":"238","endLine":8,"endColumn":23},{"ruleId":"236","severity":1,"message":"269","line":11,"column":13,"nodeType":"230","messageId":"238","endLine":11,"endColumn":21},{"ruleId":"236","severity":1,"message":"270","line":14,"column":13,"nodeType":"230","messageId":"238","endLine":14,"endColumn":23},{"ruleId":"236","severity":1,"message":"271","line":17,"column":13,"nodeType":"230","messageId":"238","endLine":17,"endColumn":21},{"ruleId":"236","severity":1,"message":"272","line":20,"column":13,"nodeType":"230","messageId":"238","endLine":20,"endColumn":23},{"ruleId":"236","severity":1,"message":"273","line":23,"column":13,"nodeType":"230","messageId":"238","endLine":23,"endColumn":20},{"ruleId":"236","severity":1,"message":"274","line":26,"column":13,"nodeType":"230","messageId":"238","endLine":26,"endColumn":21},{"ruleId":"236","severity":1,"message":"275","line":29,"column":13,"nodeType":"230","messageId":"238","endLine":29,"endColumn":23},{"ruleId":"236","severity":1,"message":"276","line":32,"column":13,"nodeType":"230","messageId":"238","endLine":32,"endColumn":21},{"ruleId":"236","severity":1,"message":"277","line":35,"column":13,"nodeType":"230","messageId":"238","endLine":35,"endColumn":22},{"ruleId":"236","severity":1,"message":"278","line":38,"column":13,"nodeType":"230","messageId":"238","endLine":38,"endColumn":24},{"ruleId":"236","severity":1,"message":"279","line":41,"column":13,"nodeType":"230","messageId":"238","endLine":41,"endColumn":22},{"ruleId":"236","severity":1,"message":"266","line":2,"column":13,"nodeType":"230","messageId":"238","endLine":2,"endColumn":22},{"ruleId":"236","severity":1,"message":"280","line":5,"column":13,"nodeType":"230","messageId":"238","endLine":5,"endColumn":24},{"ruleId":"236","severity":1,"message":"281","line":8,"column":13,"nodeType":"230","messageId":"238","endLine":8,"endColumn":24},{"ruleId":"236","severity":1,"message":"282","line":11,"column":13,"nodeType":"230","messageId":"238","endLine":11,"endColumn":31},{"ruleId":"236","severity":1,"message":"268","line":15,"column":13,"nodeType":"230","messageId":"238","endLine":15,"endColumn":23},{"ruleId":"236","severity":1,"message":"283","line":19,"column":13,"nodeType":"230","messageId":"238","endLine":19,"endColumn":20},{"ruleId":"236","severity":1,"message":"284","line":22,"column":13,"nodeType":"230","messageId":"238","endLine":22,"endColumn":23},{"ruleId":"236","severity":1,"message":"285","line":25,"column":13,"nodeType":"230","messageId":"238","endLine":25,"endColumn":23},{"ruleId":"236","severity":1,"message":"286","line":28,"column":13,"nodeType":"230","messageId":"238","endLine":28,"endColumn":28},{"ruleId":"236","severity":1,"message":"287","line":31,"column":13,"nodeType":"230","messageId":"238","endLine":31,"endColumn":24},{"ruleId":"236","severity":1,"message":"288","line":34,"column":13,"nodeType":"230","messageId":"238","endLine":34,"endColumn":21},{"ruleId":"236","severity":1,"message":"289","line":37,"column":13,"nodeType":"230","messageId":"238","endLine":37,"endColumn":20},{"ruleId":"236","severity":1,"message":"290","line":40,"column":13,"nodeType":"230","messageId":"238","endLine":40,"endColumn":23},{"ruleId":"236","severity":1,"message":"291","line":43,"column":13,"nodeType":"230","messageId":"238","endLine":43,"endColumn":23},{"ruleId":"236","severity":1,"message":"270","line":51,"column":13,"nodeType":"230","messageId":"238","endLine":51,"endColumn":23},{"ruleId":"236","severity":1,"message":"271","line":54,"column":13,"nodeType":"230","messageId":"238","endLine":54,"endColumn":21},{"ruleId":"236","severity":1,"message":"272","line":57,"column":13,"nodeType":"230","messageId":"238","endLine":57,"endColumn":23},{"ruleId":"236","severity":1,"message":"273","line":60,"column":13,"nodeType":"230","messageId":"238","endLine":60,"endColumn":20},{"ruleId":"236","severity":1,"message":"275","line":64,"column":13,"nodeType":"230","messageId":"238","endLine":64,"endColumn":23},{"ruleId":"236","severity":1,"message":"276","line":67,"column":13,"nodeType":"230","messageId":"238","endLine":67,"endColumn":21},{"ruleId":"236","severity":1,"message":"278","line":70,"column":13,"nodeType":"230","messageId":"238","endLine":70,"endColumn":24},{"ruleId":"236","severity":1,"message":"279","line":73,"column":13,"nodeType":"230","messageId":"238","endLine":73,"endColumn":22},{"ruleId":"254","severity":1,"message":"255","line":213,"column":6,"nodeType":"256","endLine":213,"endColumn":58,"suggestions":"292"},{"ruleId":"254","severity":1,"message":"258","line":220,"column":6,"nodeType":"256","endLine":220,"endColumn":18,"suggestions":"293"},{"ruleId":"260","severity":1,"message":"261","line":338,"column":18,"nodeType":"262","messageId":"263","endLine":338,"endColumn":20},{"ruleId":"260","severity":1,"message":"261","line":347,"column":18,"nodeType":"262","messageId":"263","endLine":347,"endColumn":20},{"ruleId":"260","severity":1,"message":"261","line":353,"column":18,"nodeType":"262","messageId":"263","endLine":353,"endColumn":20},{"ruleId":"228","severity":1,"message":"294","line":5,"column":39,"nodeType":"230","messageId":"231","endLine":5,"endColumn":58},{"ruleId":"254","severity":1,"message":"264","line":165,"column":9,"nodeType":"256","endLine":165,"endColumn":27,"suggestions":"295"},{"ruleId":"228","severity":1,"message":"296","line":3,"column":9,"nodeType":"230","messageId":"231","endLine":3,"endColumn":12},{"ruleId":"228","severity":1,"message":"297","line":3,"column":19,"nodeType":"230","messageId":"231","endLine":3,"endColumn":23},{"ruleId":"228","severity":1,"message":"298","line":3,"column":25,"nodeType":"230","messageId":"231","endLine":3,"endColumn":29},{"ruleId":"236","severity":1,"message":"299","line":2,"column":13,"nodeType":"230","messageId":"238","endLine":2,"endColumn":25},{"ruleId":"236","severity":1,"message":"300","line":5,"column":13,"nodeType":"230","messageId":"238","endLine":5,"endColumn":27},{"ruleId":"236","severity":1,"message":"301","line":8,"column":13,"nodeType":"230","messageId":"238","endLine":8,"endColumn":27},{"ruleId":"236","severity":1,"message":"302","line":12,"column":13,"nodeType":"230","messageId":"238","endLine":12,"endColumn":20},{"ruleId":"236","severity":1,"message":"303","line":15,"column":13,"nodeType":"230","messageId":"238","endLine":15,"endColumn":23},{"ruleId":"236","severity":1,"message":"304","line":18,"column":13,"nodeType":"230","messageId":"238","endLine":18,"endColumn":23},{"ruleId":"236","severity":1,"message":"305","line":22,"column":13,"nodeType":"230","messageId":"238","endLine":22,"endColumn":21},{"ruleId":"236","severity":1,"message":"306","line":25,"column":13,"nodeType":"230","messageId":"238","endLine":25,"endColumn":24},{"ruleId":"236","severity":1,"message":"307","line":28,"column":13,"nodeType":"230","messageId":"238","endLine":28,"endColumn":24},{"ruleId":"236","severity":1,"message":"308","line":34,"column":13,"nodeType":"230","messageId":"238","endLine":34,"endColumn":20},{"ruleId":"236","severity":1,"message":"309","line":37,"column":13,"nodeType":"230","messageId":"238","endLine":37,"endColumn":23},{"ruleId":"236","severity":1,"message":"310","line":40,"column":13,"nodeType":"230","messageId":"238","endLine":40,"endColumn":23},"@typescript-eslint/no-unused-vars","'isLogined' is defined but never used.","Identifier","unusedVar","no-native-reassign",["311"],"no-negated-in-lhs",["312"],"@typescript-eslint/no-redeclare","'TOLOGIN' is already defined.","redeclared","'SUCCESSLOGIN' is already defined.","'ERRORLOGIN' is already defined.","'NETERROR' is already defined.","'LoginApi' is already defined.","'STAFFLIST' is already defined.","'STAFFADD' is already defined.","'DELSTAFF_URL' is already defined.","'EDITSTAFF_URL' is already defined.","'DISHLIST' is already defined.","'CATELIST_URL' is already defined.","'ADDDISH_URL' is already defined.","'DELDISH_URL' is already defined.","'EDITDISH_URL' is already defined.","'UPPIC_URL' is already defined.","'SERVER_URL' is already defined.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'pageMsg' and 'props'. Either include them or remove the dependency array.","ArrayExpression",["313"],"React Hook useMemo has a missing dependency: 'props'. Either include it or remove the dependency array.",["314"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array.",["315"],"'GETFAILED' is already defined.","'GETLIST' is already defined.","'GETSUCCESS' is already defined.","'ADDSTAFF' is already defined.","'ADDSUCCESS' is already defined.","'ADDERROR' is already defined.","'TOGGLEPAGE' is already defined.","'TOGGLED' is already defined.","'DELSTAFF' is already defined.","'DELSUCCESS' is already defined.","'DELERROR' is already defined.","'EDITSTAFF' is already defined.","'EDITSUCCESS' is already defined.","'EDITERROR' is already defined.","'GETDISHLIST' is already defined.","'GETCATELIST' is already defined.","'GETCATELISTSUCCESS' is already defined.","'ADDDISH' is already defined.","'ADDDISHSUC' is already defined.","'ADDDISHERR' is already defined.","'EDITDISHDISHSUC' is already defined.","'EDITDISHERR' is already defined.","'EDITDISH' is already defined.","'DELDISH' is already defined.","'DELDISHSUC' is already defined.","'DELDISHERR' is already defined.",["316"],["317"],"'FieldNumberOutlined' is defined but never used.",["318"],"'del' is defined but never used.","'post' is defined but never used.","'puts' is defined but never used.","'GETCATELISTS' is already defined.","'GETCATELISTSUC' is already defined.","'GETCATELISTERR' is already defined.","'CATEADD' is already defined.","'CATEADDSUC' is already defined.","'CATEADDERR' is already defined.","'CATEEDIT' is already defined.","'CATEEDITSUC' is already defined.","'CATEEDITERR' is already defined.","'CATEDEL' is already defined.","'CATEDELSUC' is already defined.","'CATEDELERR' is already defined.","no-global-assign","no-unsafe-negation",{"desc":"319","fix":"320"},{"desc":"321","fix":"322"},{"desc":"323","fix":"324"},{"desc":"319","fix":"325"},{"desc":"321","fix":"326"},{"desc":"327","fix":"328"},"Update the dependencies array to be: [props.list.total, props.list.page, props.list.size, props, pageMsg]",{"range":"329","text":"330"},"Update the dependencies array to be: [props]",{"range":"331","text":"332"},"Update the dependencies array to be: [props, props.addStatus, props.delStatus, props.editStatus]",{"range":"333","text":"334"},{"range":"335","text":"330"},{"range":"336","text":"332"},"Update the dependencies array to be: [props, props.list.total]",{"range":"337","text":"338"},[7856,7908],"[props.list.total, props.list.page, props.list.size, props, pageMsg]",[8086,8098],"[props]",[9212,9264],"[props, props.addStatus, props.delStatus, props.editStatus]",[4718,4770],[4928,4940],[4717,4735],"[props, props.list.total]"]
